<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Privacy Policy | Lee Foropoulos</title>
  <meta name="description" content="Privacy Policy for foropoulosnow.com - Learn how we collect, use, and protect your personal information.">
  <meta name="ambient:music" content="classical-peaceful">
  <meta name="facebook-domain-verification" content="vx40czm6ccxtpl4crzqbiso70hmjoi" />
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="canonical" href="https://foropoulosnow.com/privacy.html">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            navy: { 900: '#0f172a', 800: '#1e293b', 700: '#334155', 600: '#475569' },
            gold: { 700: '#b45309', 600: '#d97706', 500: '#f59e0b', 400: '#fbbf24', 300: '#fcd34d', 200: '#fde68a', 100: '#fef3c7', 50: '#fffbeb' }
          },
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
        }
      }
    }
  </script>
  <script>
    (function() {
      function getCookie(name) {
        const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        return match ? match[2] : null;
      }
      const darkPref = getCookie('darkMode');
      if (darkPref === 'true' || (!darkPref && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, sans-serif; }
    .dark-mode-toggle { transition: transform 0.3s ease; }
    .dark-mode-toggle:hover { transform: rotate(15deg); }
    .prose { line-height: 1.8; }
    .prose h2 { margin-top: 2.5rem; margin-bottom: 1rem; font-size: 1.5rem; font-weight: 700; }
    .prose h3 { margin-top: 1.5rem; margin-bottom: 0.75rem; font-size: 1.125rem; font-weight: 600; }
    .prose p { margin-bottom: 1rem; }
    .prose ul { margin-bottom: 1rem; padding-left: 1.5rem; list-style-type: disc; }
    .prose li { margin-bottom: 0.5rem; }
    #back-to-top { opacity: 0; visibility: hidden; transition: all 0.3s ease; }
    #back-to-top.visible { opacity: 1; visibility: visible; }
  </style>
  <script src="/analytics.js" defer></script>
</head>
<body class="bg-white dark:bg-navy-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">

  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-navy-900/95 backdrop-blur-md border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <a href="./" class="text-white font-bold text-xl tracking-tight">
          Foropoulos<span class="text-gold-400">Now</span><span class="text-gray-400 text-sm">.com</span>
        </a>
        <div class="flex items-center gap-4">
          <a href="./" class="text-gray-300 hover:text-gold-400 transition text-sm font-medium">&larr; Back to Home</a>
          <button id="dark-mode-toggle" class="dark-mode-toggle text-gray-300 hover:text-gold-400 p-2 rounded-lg hover:bg-white/10 transition" aria-label="Toggle dark mode">
            <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
            <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Header -->
  <header class="bg-navy-900 pt-24 pb-12">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <h1 class="text-3xl sm:text-4xl font-bold text-white mb-4">Privacy Policy</h1>
      <p class="text-gray-400">Last updated: January 21, 2026</p>
    </div>
  </header>

  <!-- Content -->
  <article class="py-12">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="prose prose-lg dark:prose-invert text-gray-700 dark:text-gray-300">

        <p>
          This Privacy Policy describes how Greek-Fire Corporation ("we", "us", or "our") collects, uses, and shares information about you when you visit foropoulosnow.com (the "Site").
        </p>

        <h2>Information We Collect</h2>

        <h3>Information You Provide</h3>
        <p>We collect information you provide directly to us, such as when you:</p>
        <ul>
          <li>Subscribe to our newsletter</li>
          <li>Contact us through the Site</li>
          <li>Book a consultation through our scheduling links</li>
        </ul>
        <p>This information may include your name, email address, and any other information you choose to provide.</p>

        <h3>Information Collected Automatically</h3>
        <p>When you visit our Site, we may automatically collect certain information about your device and your visit, including:</p>
        <ul>
          <li>Device type, browser type, and operating system</li>
          <li>IP address (anonymized)</li>
          <li>Pages viewed and links clicked</li>
          <li>Time spent on pages</li>
          <li>Referring website</li>
        </ul>
        <p>This information is collected only if you consent to analytics cookies through our cookie consent banner.</p>

        <h2>Cookies and Tracking Technologies</h2>

        <p>We use cookies and similar tracking technologies to collect and use personal information about you. You can manage your cookie preferences at any time by clicking "Cookie Settings" in the footer of any page.</p>

        <h3>Essential Cookies</h3>
        <p>These cookies are necessary for the Site to function and cannot be disabled. They include cookies that:</p>
        <ul>
          <li>Remember your dark/light mode preference</li>
          <li>Store your cookie consent preferences</li>
        </ul>

        <h3>Analytics Cookies</h3>
        <p>With your consent, we use analytics cookies to understand how visitors interact with our Site. We use:</p>
        <ul>
          <li><strong>Google Analytics 4</strong> - Helps us understand site traffic and user behavior. Google's privacy policy: <a href="https://policies.google.com/privacy" target="_blank" rel="noopener" class="text-gold-600 dark:text-gold-400">policies.google.com/privacy</a></li>
          <li><strong>Microsoft Clarity</strong> - Provides session recordings and heatmaps. Microsoft's privacy policy: <a href="https://privacy.microsoft.com" target="_blank" rel="noopener" class="text-gold-600 dark:text-gold-400">privacy.microsoft.com</a></li>
        </ul>

        <h3>Marketing Cookies</h3>
        <p>With your consent, marketing cookies may be used to track visitors across websites for advertising purposes.</p>

        <h2>How We Use Your Information</h2>
        <p>We use the information we collect to:</p>
        <ul>
          <li>Provide, maintain, and improve our Site</li>
          <li>Send you newsletters and updates (if you've subscribed)</li>
          <li>Respond to your comments, questions, and requests</li>
          <li>Analyze trends and understand how our Site is used</li>
          <li>Detect, prevent, and address technical issues</li>
        </ul>

        <h2>Information Sharing</h2>
        <p>We do not sell your personal information. We may share your information with:</p>
        <ul>
          <li>Service providers who assist in operating our Site (e.g., hosting, analytics)</li>
          <li>Professional advisors, such as lawyers and accountants</li>
          <li>Law enforcement or government agencies when required by law</li>
        </ul>

        <h2>Data Retention</h2>
        <p>We retain personal information for as long as necessary to fulfill the purposes for which it was collected, unless a longer retention period is required by law.</p>

        <h2>Your Rights</h2>
        <p>Depending on your location, you may have certain rights regarding your personal information, including:</p>
        <ul>
          <li>Access to your personal information</li>
          <li>Correction of inaccurate information</li>
          <li>Deletion of your personal information</li>
          <li>Objection to processing</li>
          <li>Data portability</li>
          <li>Withdrawal of consent</li>
        </ul>
        <p>To exercise these rights, please contact us using the information below.</p>

        <h2>International Transfers</h2>
        <p>Your information may be transferred to and processed in countries other than your own. We take appropriate safeguards to ensure your information remains protected.</p>

        <h2>Children's Privacy</h2>
        <p>Our Site is not intended for children under 16 years of age. We do not knowingly collect personal information from children under 16.</p>

        <h2>Changes to This Policy</h2>
        <p>We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date.</p>

        <h2>Contact Us</h2>
        <p>If you have any questions about this Privacy Policy or our privacy practices, please contact us at:</p>
        <p>
          Greek-Fire Corporation<br>
          Email: privacy@greek-fire.com<br>
          Website: <a href="https://greek-fire.com" target="_blank" rel="noopener" class="text-gold-600 dark:text-gold-400">greek-fire.com</a>
        </p>

      </div>
    </div>
  </article>

  <!-- Footer -->
  <footer class="bg-navy-900 border-t border-white/10 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row justify-between items-center gap-6">
        <div>
          <a href="./" class="text-white font-bold text-xl tracking-tight">Foropoulos<span class="text-gold-400">Now</span><span class="text-gray-400 text-sm">.com</span></a>
          <p class="text-gray-500 text-sm mt-2">Leadership. Technology. Performance.</p>
        </div>
        <div class="flex space-x-6">
          <a href="https://www.linkedin.com/in/thesecretchief" target="_blank" rel="noopener" class="text-gray-400 hover:text-gold-400 transition" aria-label="LinkedIn">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
          </a>
          <a href="https://x.com/thesecretchief" target="_blank" rel="noopener" class="text-gray-400 hover:text-gold-400 transition" aria-label="X (Twitter)">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
          </a>
          <a href="https://www.instagram.com/thesecretchief" target="_blank" rel="noopener" class="text-gray-400 hover:text-gold-400 transition" aria-label="Instagram">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
          </a>
        </div>
        <div class="text-center md:text-right">
          <p class="text-gray-400">&copy; 2026 Greek-Fire Corporation</p>
          <a href="https://greek-fire.com" target="_blank" rel="noopener" class="text-gold-400 hover:text-gold-300 transition text-sm">Greek-Fire Corporation</a>
        </div>
      </div>
      <div class="mt-8 pt-6 border-t border-white/10 text-center">
        <button id="cookie-settings-btn" class="text-gray-500 hover:text-gold-400 text-sm transition">Cookie Settings</button>
      </div>
    </div>
  </footer>

  <!-- Back to Top Button -->
  <button id="back-to-top" class="fixed bottom-8 right-8 z-40 bg-gold-500 hover:bg-gold-400 text-navy-900 p-3 rounded-full shadow-lg transition transform hover:scale-110" aria-label="Back to top">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
    </svg>
  </button>

  <!-- MUSIC_PLAYER -->
<!-- Ambient Music Player -->
<div id="music-player" class="fixed bottom-8 left-8 z-[60] opacity-0 translate-y-4 transition-all duration-500">
  <!-- Expanded Player Panel -->
  <div id="music-panel" class="hidden mb-3 bg-navy-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden w-72">
    <!-- Track Visualizer Header -->
    <div class="relative h-24 bg-gradient-to-br from-gold-500/20 via-purple-500/20 to-blue-500/20 overflow-hidden">
      <div id="music-visualizer" class="absolute inset-0 flex items-end justify-center gap-1 px-4 pb-2">
        <!-- Equalizer bars generated by JS -->
      </div>
      <div class="absolute inset-0 bg-gradient-to-t from-navy-900/90 to-transparent"></div>
      <div class="absolute bottom-2 left-4 right-4">
        <p id="music-track-name" class="text-white font-semibold text-sm truncate">Select a track</p>
        <p id="music-track-artist" class="text-gray-400 text-xs truncate">Ambient Music</p>
      </div>
    </div>

    <!-- Track Selector -->
    <div class="p-4 border-b border-white/10">
      <label class="text-gray-400 text-xs block mb-2">Atmosphere</label>
      <select id="music-track-select" class="w-full bg-navy-800 text-white text-sm rounded-lg px-3 py-2.5 border border-white/10 focus:border-gold-500 focus:outline-none cursor-pointer">
        <option value="">Choose your vibe...</option>
        <optgroup label="Classical">
          <option value="classical-peaceful" data-name="Peaceful Desolation" data-artist="Kevin MacLeod">Peaceful Desolation</option>
          <option value="classical-dramatic" data-name="Impact Moderato" data-artist="Kevin MacLeod">Impact Moderato</option>
          <option value="classical-baroque" data-name="Brandenburg Concerto" data-artist="Kevin MacLeod">Brandenburg Concerto</option>
        </optgroup>
        <optgroup label="Electronic">
          <option value="electronic-ambient" data-name="Floating Cities" data-artist="Kevin MacLeod">Floating Cities</option>
          <option value="electronic-chill" data-name="Chill Wave" data-artist="Kevin MacLeod">Chill Wave</option>
          <option value="electronic-dark" data-name="Dark Fog" data-artist="Kevin MacLeod">Dark Fog</option>
        </optgroup>
        <optgroup label="Acoustic">
          <option value="acoustic-guitar" data-name="Acoustic Breeze" data-artist="Kevin MacLeod">Acoustic Breeze</option>
          <option value="acoustic-jazz" data-name="Jazz Brunch" data-artist="Kevin MacLeod">Jazz Brunch</option>
        </optgroup>
        <optgroup label="Cinematic">
          <option value="cinematic-tension" data-name="Industrial Cinematic" data-artist="Kevin MacLeod">Industrial Cinematic</option>
          <option value="cinematic-inspiring" data-name="Inspiring Trailer" data-artist="Kevin MacLeod">Inspiring Trailer</option>
        </optgroup>
      </select>
    </div>

    <!-- Progress Bar -->
    <div class="px-4 pt-3">
      <div id="music-progress-container" class="relative h-1.5 bg-white/10 rounded-full cursor-pointer group">
        <div id="music-progress-bar" class="absolute left-0 top-0 h-full bg-gradient-to-r from-gold-500 to-gold-400 rounded-full transition-all duration-150" style="width: 0%"></div>
        <div id="music-progress-handle" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-gold-400 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity" style="left: 0%"></div>
      </div>
      <div class="flex justify-between mt-1 text-xs text-gray-500">
        <span id="music-current-time">0:00</span>
        <span id="music-duration">0:00</span>
      </div>
    </div>

    <!-- Playback Controls -->
    <div class="flex items-center justify-center gap-2 p-4">
      <button id="music-shuffle" class="p-2 text-gray-500 hover:text-gold-400 transition rounded-lg hover:bg-white/5" title="Shuffle">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg>
      </button>
      <button id="music-prev" class="p-2 text-gray-400 hover:text-white transition rounded-lg hover:bg-white/5" title="Previous">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path>
        </svg>
      </button>
      <button id="music-play-btn" class="p-3 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full transition transform hover:scale-105 shadow-lg" title="Play">
        <svg id="music-play-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"></path>
        </svg>
        <svg id="music-pause-icon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>
        </svg>
      </button>
      <button id="music-next" class="p-2 text-gray-400 hover:text-white transition rounded-lg hover:bg-white/5" title="Next">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path>
        </svg>
      </button>
      <button id="music-loop" class="p-2 text-gray-500 hover:text-gold-400 transition rounded-lg hover:bg-white/5" title="Loop">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg>
      </button>
    </div>

    <!-- Volume Control -->
    <div class="px-4 pb-4 flex items-center gap-3">
      <button id="music-mute" class="text-gray-400 hover:text-white transition" title="Mute">
        <svg id="music-volume-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>
        </svg>
        <svg id="music-mute-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>
        </svg>
      </button>
      <div id="music-volume-container" class="flex-1 relative h-1.5 bg-white/10 rounded-full cursor-pointer group">
        <div id="music-volume-bar" class="absolute left-0 top-0 h-full bg-gold-500 rounded-full" style="width: 70%"></div>
        <div id="music-volume-handle" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-gold-400 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity" style="left: 70%"></div>
      </div>
      <span id="music-volume-value" class="text-gray-500 text-xs w-8 text-right">70%</span>
    </div>
  </div>

  <!-- Floating Toggle Button -->
  <button id="music-toggle" class="relative bg-navy-900/90 hover:bg-navy-800 backdrop-blur-xl text-white p-4 rounded-full shadow-2xl border border-white/10 transition-all duration-300 hover:scale-110 hover:border-gold-500/50 group" style="pointer-events: auto !important; z-index: 9999 !important;">
    <!-- Pulsing ring when playing -->
    <div id="music-pulse" class="absolute inset-0 rounded-full bg-gold-500/20 animate-ping hidden"></div>

    <!-- Music note icon -->
    <svg id="music-note-icon" class="w-6 h-6 relative z-10 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
    </svg>

    <!-- Equalizer animation (shown when playing) -->
    <div id="music-eq-mini" class="hidden absolute inset-0 flex items-center justify-center gap-0.5">
      <span class="w-1 bg-gold-400 rounded-full animate-eq-1"></span>
      <span class="w-1 bg-gold-400 rounded-full animate-eq-2"></span>
      <span class="w-1 bg-gold-400 rounded-full animate-eq-3"></span>
      <span class="w-1 bg-gold-400 rounded-full animate-eq-4"></span>
    </div>

    <!-- New visitor notification badge -->
    <span id="music-badge" class="absolute -top-1 -right-1 w-3 h-3 bg-gold-500 rounded-full animate-pulse hidden"></span>
  </button>

  <!-- Welcome tooltip for new visitors -->
  <div id="music-welcome" class="absolute left-16 bottom-2 hidden opacity-0 transition-all duration-500">
    <div class="relative bg-gradient-to-r from-navy-800 to-navy-900 backdrop-blur-xl rounded-xl shadow-2xl border border-gold-500/30 p-4 min-w-[220px]">
      <!-- Glowing accent -->
      <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-gold-500/10 to-purple-500/10 animate-pulse"></div>

      <!-- Arrow pointing to button -->
      <div class="absolute -left-2 bottom-4 w-0 h-0 border-t-8 border-b-8 border-r-8 border-transparent border-r-navy-800"></div>

      <div class="relative">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-8 h-8 rounded-full bg-gold-500/20 flex items-center justify-center">
            <svg class="w-4 h-4 text-gold-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
            </svg>
          </div>
          <span class="text-gold-400 font-semibold text-sm">Enhance Your Experience</span>
        </div>
        <p class="text-gray-300 text-xs leading-relaxed mb-3">
          Enable ambient music for an immersive browsing experience. Curated tracks to match the mood.
        </p>
        <div class="flex gap-2">
          <button id="music-welcome-play" class="flex-1 bg-gold-500 hover:bg-gold-400 text-navy-900 text-xs font-semibold py-2 px-3 rounded-lg transition transform hover:scale-105">
            Play Music
          </button>
          <button id="music-welcome-dismiss" class="px-3 py-2 text-gray-400 hover:text-white text-xs rounded-lg border border-white/10 hover:border-white/30 transition">
            Later
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Equalizer animations */
  @keyframes eq-1 {
    0%, 100% { height: 4px; }
    50% { height: 16px; }
  }
  @keyframes eq-2 {
    0%, 100% { height: 8px; }
    50% { height: 20px; }
  }
  @keyframes eq-3 {
    0%, 100% { height: 12px; }
    50% { height: 8px; }
  }
  @keyframes eq-4 {
    0%, 100% { height: 6px; }
    50% { height: 14px; }
  }

  .animate-eq-1 { animation: eq-1 0.8s ease-in-out infinite; }
  .animate-eq-2 { animation: eq-2 0.6s ease-in-out infinite 0.1s; }
  .animate-eq-3 { animation: eq-3 0.7s ease-in-out infinite 0.2s; }
  .animate-eq-4 { animation: eq-4 0.5s ease-in-out infinite 0.15s; }

  /* Large visualizer bars */
  .visualizer-bar {
    width: 4px;
    background: linear-gradient(to top, #f59e0b, #fbbf24);
    border-radius: 2px;
    transition: height 0.1s ease;
  }

  /* Track select styling */
  #music-track-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%239ca3af'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 1rem;
    padding-right: 2.5rem;
  }

  #music-track-select optgroup {
    background: #1e293b;
    color: #f59e0b;
    font-weight: 600;
  }

  #music-track-select option {
    background: #0f172a;
    color: white;
    padding: 0.5rem;
  }

  /* Active states */
  #music-loop.active,
  #music-shuffle.active {
    color: #f59e0b;
    background: rgba(245, 158, 11, 0.1);
  }

  /* Player reveal animation */
  #music-player.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Responsive positioning */
  @media (max-width: 640px) {
    #music-player {
      left: 4px;
      bottom: 4px;
    }
    #music-panel {
      width: calc(100vw - 32px);
      max-width: 320px;
    }
    #music-welcome {
      left: 0;
      bottom: 72px;
      right: 4px;
    }
    #music-welcome > div {
      min-width: auto;
    }
    #music-welcome .absolute.-left-2 {
      display: none;
    }
  }

  /* Welcome notification animations */
  #music-welcome.show {
    opacity: 1;
  }

  @keyframes welcome-glow {
    0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.2); }
    50% { box-shadow: 0 0 40px rgba(245, 158, 11, 0.4); }
  }

  #music-welcome.show > div {
    animation: welcome-glow 2s ease-in-out infinite;
  }

  /* Scanning line effect for high-tech feel */
  @keyframes scan {
    0% { transform: translateY(-100%); }
    100% { transform: translateY(100%); }
  }

  #music-welcome::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 100%;
    background: linear-gradient(transparent 0%, rgba(245, 158, 11, 0.1) 50%, transparent 100%);
    animation: scan 2s linear infinite;
    pointer-events: none;
    border-radius: 0.75rem;
    overflow: hidden;
  }
</style>

<script>
(function() {
  'use strict';

  // ===== CLEAR OLD CACHE =====
  // Version 2: Reset if user has old Pixabay URLs cached
  const MUSIC_VERSION = '2';
  if (localStorage.getItem('musicVersion') !== MUSIC_VERSION) {
    localStorage.removeItem('musicTrack');
    localStorage.removeItem('musicEnabled');
    localStorage.removeItem('musicWelcomeSeen');
    localStorage.removeItem('ambientHeaderDismissed');
    localStorage.setItem('musicVersion', MUSIC_VERSION);
  }

  // ===== TRACK LIBRARY =====
  // Using royalty-free music from Kevin MacLeod (CC BY) - incompetech.com
  const TRACKS = {
    'classical-peaceful': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Peaceful%20Desolation.mp3',
      name: 'Peaceful Desolation',
      artist: 'Kevin MacLeod'
    },
    'classical-dramatic': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Impact%20Moderato.mp3',
      name: 'Impact Moderato',
      artist: 'Kevin MacLeod'
    },
    'classical-baroque': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Brandenburg%20Concerto%20No4-1%20BWV1049%20-%20Allegro.mp3',
      name: 'Brandenburg Concerto',
      artist: 'Kevin MacLeod'
    },
    'electronic-ambient': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Floating%20Cities.mp3',
      name: 'Floating Cities',
      artist: 'Kevin MacLeod'
    },
    'electronic-chill': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Chill%20Wave.mp3',
      name: 'Chill Wave',
      artist: 'Kevin MacLeod'
    },
    'electronic-dark': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Dark%20Fog.mp3',
      name: 'Dark Fog',
      artist: 'Kevin MacLeod'
    },
    'acoustic-guitar': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Acoustic%20Breeze.mp3',
      name: 'Acoustic Breeze',
      artist: 'Kevin MacLeod'
    },
    'acoustic-jazz': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Jazz%20Brunch.mp3',
      name: 'Jazz Brunch',
      artist: 'Kevin MacLeod'
    },
    'cinematic-tension': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Industrial%20Cinematic.mp3',
      name: 'Industrial Cinematic',
      artist: 'Kevin MacLeod'
    },
    'cinematic-inspiring': {
      url: 'https://incompetech.com/music/royalty-free/mp3-royaltyfree/Inspiring%20Cinematic%20Trailer.mp3',
      name: 'Inspiring Trailer',
      artist: 'Kevin MacLeod'
    }
  };

  // ===== STATE =====
  let audio = null;
  let isPlaying = false;
  let isLooping = false;
  let isShuffling = false;
  let currentTrackId = null;
  let volume = 0.7;
  let analyser = null;
  let audioContext = null;
  let animationId = null;

  // ===== CROSS-PAGE PERSISTENCE =====
  // Simple flag: is music enabled by user?
  function setMusicEnabled(enabled) {
    localStorage.setItem('musicEnabled', enabled ? 'true' : 'false');
  }

  function isMusicEnabled() {
    return localStorage.getItem('musicEnabled') === 'true';
  }

  // ===== DOM ELEMENTS =====
  const player = document.getElementById('music-player');
  if (!player) return; // Exit if player element not found

  const panel = document.getElementById('music-panel');
  const toggleBtn = document.getElementById('music-toggle');
  const playBtn = document.getElementById('music-play-btn');
  const playIcon = document.getElementById('music-play-icon');
  const pauseIcon = document.getElementById('music-pause-icon');
  const trackSelect = document.getElementById('music-track-select');
  const trackName = document.getElementById('music-track-name');
  const trackArtist = document.getElementById('music-track-artist');
  const progressBar = document.getElementById('music-progress-bar');
  const progressHandle = document.getElementById('music-progress-handle');
  const progressContainer = document.getElementById('music-progress-container');
  const currentTimeEl = document.getElementById('music-current-time');
  const durationEl = document.getElementById('music-duration');
  const volumeBar = document.getElementById('music-volume-bar');
  const volumeHandle = document.getElementById('music-volume-handle');
  const volumeContainer = document.getElementById('music-volume-container');
  const volumeValue = document.getElementById('music-volume-value');
  const muteBtn = document.getElementById('music-mute');
  const volumeIcon = document.getElementById('music-volume-icon');
  const muteIcon = document.getElementById('music-mute-icon');
  const loopBtn = document.getElementById('music-loop');
  const shuffleBtn = document.getElementById('music-shuffle');
  const prevBtn = document.getElementById('music-prev');
  const nextBtn = document.getElementById('music-next');
  const visualizer = document.getElementById('music-visualizer');
  const pulse = document.getElementById('music-pulse');
  const noteIcon = document.getElementById('music-note-icon');
  const eqMini = document.getElementById('music-eq-mini');
  const welcomeEl = document.getElementById('music-welcome');
  const welcomePlayBtn = document.getElementById('music-welcome-play');
  const welcomeDismissBtn = document.getElementById('music-welcome-dismiss');
  const musicBadge = document.getElementById('music-badge');

  // ===== WELCOME NOTIFICATION =====
  function showWelcome() {
    const hasSeenWelcome = localStorage.getItem('musicWelcomeSeen');
    if (hasSeenWelcome) return;

    // Show badge on button
    if (musicBadge) musicBadge.classList.remove('hidden');

    // Show welcome tooltip after a delay
    setTimeout(() => {
      if (welcomeEl && !isPlaying) {
        welcomeEl.classList.remove('hidden');
        setTimeout(() => welcomeEl.classList.add('show'), 50);
      }
    }, 3000);
  }

  function hideWelcome(permanent = false) {
    if (welcomeEl) {
      welcomeEl.classList.remove('show');
      setTimeout(() => welcomeEl.classList.add('hidden'), 500);
    }
    if (musicBadge) musicBadge.classList.add('hidden');
    if (permanent) {
      localStorage.setItem('musicWelcomeSeen', 'true');
    }
  }

  // ===== INITIALIZATION =====
  function init() {
    // Check for page-specific music setting
    const pageMusicMeta = document.querySelector('meta[name="ambient:music"]');
    const pageMusicTrack = pageMusicMeta ? pageMusicMeta.content : 'electronic-ambient';

    // Restore preferences
    const savedVolume = localStorage.getItem('musicVolume');
    const savedLoop = localStorage.getItem('musicLoop');

    if (savedVolume) {
      volume = parseFloat(savedVolume);
      updateVolumeUI();
    }

    if (savedLoop === 'true') {
      isLooping = true;
      if (loopBtn) loopBtn.classList.add('active');
    }

    // Set track to page's configured track
    if (pageMusicTrack && TRACKS[pageMusicTrack] && trackSelect) {
      trackSelect.value = pageMusicTrack;
    }

    // Create visualizer bars
    createVisualizerBars();

    // Check if user has enabled music (persists across pages)
    const musicWasEnabled = isMusicEnabled();

    // Show player with animation
    setTimeout(() => {
      player.classList.add('visible');

      // If music was enabled, auto-play this page's track
      if (musicWasEnabled && pageMusicTrack && TRACKS[pageMusicTrack]) {
        loadTrack(pageMusicTrack);
        play();
      } else if (!musicWasEnabled) {
        // Show welcome notification for new visitors
        showWelcome();
      }
    }, 1000);

    // Bind events
    bindEvents();
  }

  // ===== VISUALIZER =====
  function createVisualizerBars() {
    visualizer.innerHTML = '';
    for (let i = 0; i < 32; i++) {
      const bar = document.createElement('div');
      bar.className = 'visualizer-bar';
      bar.style.height = '4px';
      visualizer.appendChild(bar);
    }
  }

  function setupAudioAnalyser() {
    if (!audio || audioContext) return;

    try {
      audioContext = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioContext.createAnalyser();
      const source = audioContext.createMediaElementSource(audio);
      source.connect(analyser);
      analyser.connect(audioContext.destination);
      analyser.fftSize = 64;
    } catch (e) {
      console.log('Audio analyser not supported');
    }
  }

  function animateVisualizer() {
    if (!analyser || !isPlaying) {
      cancelAnimationFrame(animationId);
      return;
    }

    const bars = visualizer.querySelectorAll('.visualizer-bar');
    const dataArray = new Uint8Array(analyser.frequencyBinCount);
    analyser.getByteFrequencyData(dataArray);

    bars.forEach((bar, i) => {
      const value = dataArray[i] || 0;
      const height = Math.max(4, (value / 255) * 60);
      bar.style.height = `${height}px`;
    });

    animationId = requestAnimationFrame(animateVisualizer);
  }

  // ===== AUDIO CONTROLS =====
  function loadTrack(trackId) {
    if (!trackId || !TRACKS[trackId]) return;

    const track = TRACKS[trackId];
    currentTrackId = trackId;

    if (audio) {
      audio.pause();
      audio.src = '';
    }

    audio = new Audio(track.url);
    audio.volume = volume;
    audio.loop = isLooping;
    audio.crossOrigin = 'anonymous';

    // Update UI
    trackName.textContent = track.name;
    trackArtist.textContent = track.artist;

    // Audio events
    audio.addEventListener('loadedmetadata', () => {
      durationEl.textContent = formatTime(audio.duration);
    });

    audio.addEventListener('timeupdate', updateProgress);
    audio.addEventListener('ended', handleTrackEnd);
    audio.addEventListener('play', () => {
      setupAudioAnalyser();
      animateVisualizer();
    });

    // Save preference
    localStorage.setItem('musicTrack', trackId);
  }

  function play() {
    if (!audio && trackSelect && trackSelect.value) {
      loadTrack(trackSelect.value);
    }

    if (!audio) return;

    // Resume audio context if suspended
    if (audioContext && audioContext.state === 'suspended') {
      audioContext.resume();
    }

    audio.play().then(() => {
      isPlaying = true;
      setMusicEnabled(true); // Remember that user wants music
      updatePlayButton();
      animateVisualizer();
      hideWelcome(true); // Hide welcome when music starts
    }).catch(e => {
      console.log('Playback prevented:', e.message);
    });
  }

  function pause() {
    if (!audio) return;
    audio.pause();
    isPlaying = false;
    updatePlayButton();
  }

  function togglePlay() {
    if (isPlaying) {
      pause();
    } else {
      play();
    }
  }

  function handleTrackEnd() {
    if (isShuffling) {
      playRandomTrack();
    } else if (!isLooping) {
      playNextTrack();
    }
  }

  function playNextTrack() {
    const options = Array.from(trackSelect.options).filter(o => o.value);
    const currentIndex = options.findIndex(o => o.value === currentTrackId);
    const nextIndex = (currentIndex + 1) % options.length;

    trackSelect.value = options[nextIndex].value;
    loadTrack(options[nextIndex].value);
    play();
  }

  function playPrevTrack() {
    const options = Array.from(trackSelect.options).filter(o => o.value);
    const currentIndex = options.findIndex(o => o.value === currentTrackId);
    const prevIndex = (currentIndex - 1 + options.length) % options.length;

    trackSelect.value = options[prevIndex].value;
    loadTrack(options[prevIndex].value);
    play();
  }

  function playRandomTrack() {
    const options = Array.from(trackSelect.options).filter(o => o.value && o.value !== currentTrackId);
    if (options.length === 0) return;

    const randomOption = options[Math.floor(Math.random() * options.length)];
    trackSelect.value = randomOption.value;
    loadTrack(randomOption.value);
    play();
  }

  // ===== UI UPDATES =====
  function updatePlayButton() {
    if (isPlaying) {
      playIcon.classList.add('hidden');
      pauseIcon.classList.remove('hidden');
      pulse.classList.remove('hidden');
      noteIcon.classList.add('hidden');
      eqMini.classList.remove('hidden');
    } else {
      playIcon.classList.remove('hidden');
      pauseIcon.classList.add('hidden');
      pulse.classList.add('hidden');
      noteIcon.classList.remove('hidden');
      eqMini.classList.add('hidden');
    }
  }

  function updateProgress() {
    if (!audio) return;

    const percent = (audio.currentTime / audio.duration) * 100 || 0;
    progressBar.style.width = `${percent}%`;
    progressHandle.style.left = `${percent}%`;
    currentTimeEl.textContent = formatTime(audio.currentTime);
  }

  function updateVolumeUI() {
    const percent = volume * 100;
    volumeBar.style.width = `${percent}%`;
    volumeHandle.style.left = `${percent}%`;
    volumeValue.textContent = `${Math.round(percent)}%`;

    if (volume === 0) {
      volumeIcon.classList.add('hidden');
      muteIcon.classList.remove('hidden');
    } else {
      volumeIcon.classList.remove('hidden');
      muteIcon.classList.add('hidden');
    }
  }

  function formatTime(seconds) {
    if (isNaN(seconds)) return '0:00';
    const mins = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  }

  // ===== EVENT HANDLERS =====
  function bindEvents() {
    // Toggle panel
    if (toggleBtn && panel) {
      toggleBtn.addEventListener('click', () => {
        panel.classList.toggle('hidden');
        hideWelcome(true); // Hide welcome when user interacts
      });
    }

    // Welcome notification buttons
    if (welcomePlayBtn) {
      welcomePlayBtn.addEventListener('click', () => {
        hideWelcome(true);
        if (panel) panel.classList.remove('hidden');
        // Auto-play the page's recommended track or first available
        const pageMusicMeta = document.querySelector('meta[name="ambient:music"]');
        const trackId = pageMusicMeta ? pageMusicMeta.content : (trackSelect ? trackSelect.value : null) || 'electronic-ambient';
        if (trackId && TRACKS[trackId]) {
          if (trackSelect) trackSelect.value = trackId;
          loadTrack(trackId);
          play();
        }
      });
    }

    if (welcomeDismissBtn) {
      welcomeDismissBtn.addEventListener('click', () => {
        hideWelcome(true);
        setMusicEnabled(false); // User chose not to have music
      });
    }

    // Play/Pause
    if (playBtn) playBtn.addEventListener('click', togglePlay);

    // Track selection
    if (trackSelect) {
      trackSelect.addEventListener('change', (e) => {
        if (e.target.value) {
          loadTrack(e.target.value);
          play();
        }
      });
    }

    // Previous/Next
    if (prevBtn) prevBtn.addEventListener('click', playPrevTrack);
    if (nextBtn) nextBtn.addEventListener('click', playNextTrack);

    // Loop toggle
    if (loopBtn) {
      loopBtn.addEventListener('click', () => {
        isLooping = !isLooping;
        loopBtn.classList.toggle('active', isLooping);
        if (audio) audio.loop = isLooping;
        localStorage.setItem('musicLoop', isLooping);
      });
    }

    // Shuffle toggle
    if (shuffleBtn) {
      shuffleBtn.addEventListener('click', () => {
        isShuffling = !isShuffling;
        shuffleBtn.classList.toggle('active', isShuffling);
      });
    }

    // Progress seeking
    if (progressContainer) {
      progressContainer.addEventListener('click', (e) => {
        if (!audio) return;
        const rect = progressContainer.getBoundingClientRect();
        const percent = (e.clientX - rect.left) / rect.width;
        audio.currentTime = percent * audio.duration;
      });
    }

    // Volume control
    if (volumeContainer) {
      volumeContainer.addEventListener('click', (e) => {
        const rect = volumeContainer.getBoundingClientRect();
        volume = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
        if (audio) audio.volume = volume;
        updateVolumeUI();
        localStorage.setItem('musicVolume', volume);
      });
    }

    // Mute toggle
    let savedVolume = volume;
    if (muteBtn) {
      muteBtn.addEventListener('click', () => {
        if (volume > 0) {
          savedVolume = volume;
          volume = 0;
        } else {
          volume = savedVolume || 0.7;
        }
        if (audio) audio.volume = volume;
        updateVolumeUI();
      });
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      // Only handle if panel is open and no input is focused
      if (!panel || panel.classList.contains('hidden')) return;
      if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') return;

      if (e.code === 'Space' && e.target === document.body) {
        e.preventDefault();
        togglePlay();
      }
    });

    // Close panel when clicking outside
    document.addEventListener('click', (e) => {
      if (!player.contains(e.target) && !panel.classList.contains('hidden')) {
        panel.classList.add('hidden');
      }
    });
  }

  // ===== INIT =====
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

})();
</script>

<!-- /MUSIC_PLAYER -->

<!-- COOKIE_CONSENT -->
<!-- Cookie Consent Banner -->
<div id="cookie-consent" class="fixed bottom-0 left-0 right-0 z-[100] transform translate-y-full transition-transform duration-500" role="dialog" aria-labelledby="cookie-consent-title" aria-describedby="cookie-consent-description">
  <div class="bg-navy-900/98 backdrop-blur-lg border-t border-white/10 shadow-2xl">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
        <div class="flex-1">
          <h3 id="cookie-consent-title" class="text-white font-semibold text-lg mb-2">We value your privacy</h3>
          <p id="cookie-consent-description" class="text-gray-400 text-sm leading-relaxed">
            We use cookies to enhance your browsing experience, analyze site traffic, and personalize content.
            By clicking "Accept All", you consent to our use of cookies. You can manage your preferences anytime.
          </p>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 lg:ml-8">
          <button id="cookie-customize" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Customize
          </button>
          <button id="cookie-reject" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Reject All
          </button>
          <button id="cookie-accept" class="px-6 py-2.5 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full text-sm font-semibold transition transform hover:scale-105">
            Accept All
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Cookie Settings Modal -->
<div id="cookie-modal" class="fixed inset-0 z-[110] hidden" role="dialog" aria-modal="true" aria-labelledby="cookie-modal-title">
  <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" id="cookie-modal-backdrop"></div>
  <div class="fixed inset-0 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      <div class="bg-navy-800 rounded-2xl shadow-2xl max-w-lg w-full border border-white/10 transform transition-all">
        <div class="p-6 border-b border-white/10">
          <div class="flex items-center justify-between">
            <h3 id="cookie-modal-title" class="text-xl font-bold text-white">Cookie Preferences</h3>
            <button id="cookie-modal-close" class="text-gray-400 hover:text-white transition" aria-label="Close modal">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <p class="text-gray-400 text-sm mt-2">Manage your cookie preferences below. Essential cookies are always active as they're necessary for the site to function.</p>
        </div>

        <div class="p-6 space-y-4">
          <!-- Essential Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <h4 class="text-white font-semibold">Essential Cookies</h4>
              <p class="text-gray-400 text-sm mt-1">Required for basic site functionality like navigation and secure access. Cannot be disabled.</p>
            </div>
            <div class="relative">
              <input type="checkbox" id="cookie-essential" checked disabled class="sr-only">
              <div class="w-11 h-6 bg-gold-500 rounded-full opacity-50 cursor-not-allowed">
                <div class="absolute top-0.5 left-5 w-5 h-5 bg-white rounded-full shadow"></div>
              </div>
            </div>
          </div>

          <!-- Analytics Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <label for="cookie-analytics" class="text-white font-semibold cursor-pointer">Analytics Cookies</label>
              <p class="text-gray-400 text-sm mt-1">Help us understand how visitors interact with our site. We use Google Analytics and Microsoft Clarity.</p>
            </div>
            <label for="cookie-analytics" class="relative cursor-pointer">
              <input type="checkbox" id="cookie-analytics" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-600 peer-checked:bg-gold-500 rounded-full transition-colors"></div>
              <div class="absolute top-0.5 left-0.5 peer-checked:left-5 w-5 h-5 bg-white rounded-full shadow transition-all"></div>
            </label>
          </div>

          <!-- Marketing Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <label for="cookie-marketing" class="text-white font-semibold cursor-pointer">Marketing Cookies</label>
              <p class="text-gray-400 text-sm mt-1">Used to track visitors across websites to display relevant ads and measure campaign effectiveness.</p>
            </div>
            <label for="cookie-marketing" class="relative cursor-pointer">
              <input type="checkbox" id="cookie-marketing" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-600 peer-checked:bg-gold-500 rounded-full transition-colors"></div>
              <div class="absolute top-0.5 left-0.5 peer-checked:left-5 w-5 h-5 bg-white rounded-full shadow transition-all"></div>
            </label>
          </div>
        </div>

        <div class="p-6 border-t border-white/10 flex justify-end gap-3">
          <button id="cookie-modal-reject" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Reject All
          </button>
          <button id="cookie-modal-save" class="px-6 py-2.5 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full text-sm font-semibold transition">
            Save Preferences
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /COOKIE_CONSENT -->

<!-- SHARED_SCRIPTS -->
<script>
// ===== COOKIE UTILITIES =====
function getCookie(name) {
  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
  return match ? match[2] : null;
}

function setCookie(name, value, days) {
  const expires = new Date(Date.now() + days * 864e5).toUTCString();
  document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/; SameSite=Lax';
}

function deleteCookie(name) {
  document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
}

// ===== COOKIE CONSENT MANAGEMENT =====
const CookieConsent = {
  CONSENT_COOKIE: 'cookieConsent',
  CONSENT_VERSION: '1.0',

  getConsent() {
    const consent = getCookie(this.CONSENT_COOKIE);
    if (!consent) return null;
    try {
      return JSON.parse(decodeURIComponent(consent));
    } catch (e) {
      return null;
    }
  },

  setConsent(preferences) {
    const consent = {
      version: this.CONSENT_VERSION,
      timestamp: new Date().toISOString(),
      essential: true, // Always true
      analytics: preferences.analytics || false,
      marketing: preferences.marketing || false
    };
    setCookie(this.CONSENT_COOKIE, JSON.stringify(consent), 365);
    return consent;
  },

  hasConsent() {
    return this.getConsent() !== null;
  },

  hasAnalyticsConsent() {
    const consent = this.getConsent();
    return consent && consent.analytics === true;
  },

  hasMarketingConsent() {
    const consent = this.getConsent();
    return consent && consent.marketing === true;
  },

  showBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.remove('translate-y-full');
    }
  },

  hideBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.add('translate-y-full');
    }
  },

  showModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      // Set checkboxes to current preferences
      const consent = this.getConsent() || { analytics: false, marketing: false };
      const analyticsCheckbox = document.getElementById('cookie-analytics');
      const marketingCheckbox = document.getElementById('cookie-marketing');
      if (analyticsCheckbox) analyticsCheckbox.checked = consent.analytics;
      if (marketingCheckbox) marketingCheckbox.checked = consent.marketing;
    }
  },

  hideModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
  },

  acceptAll() {
    const consent = this.setConsent({ analytics: true, marketing: true });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'accept_all' });
    }
  },

  rejectAll() {
    const consent = this.setConsent({ analytics: false, marketing: false });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
  },

  savePreferences() {
    const analyticsCheckbox = document.getElementById('cookie-analytics');
    const marketingCheckbox = document.getElementById('cookie-marketing');
    const consent = this.setConsent({
      analytics: analyticsCheckbox ? analyticsCheckbox.checked : false,
      marketing: marketingCheckbox ? marketingCheckbox.checked : false
    });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (consent.analytics && typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'custom', analytics: consent.analytics, marketing: consent.marketing });
    }
  },

  applyConsent(consent) {
    // Dispatch event for analytics.js to listen to
    window.dispatchEvent(new CustomEvent('cookieConsentUpdated', { detail: consent }));
  },

  init() {
    if (!this.hasConsent()) {
      // Show banner after a short delay for better UX
      setTimeout(() => this.showBanner(), 1000);
    } else {
      // Apply existing consent
      this.applyConsent(this.getConsent());
    }
  }
};

// ===== MOBILE MENU =====
function initMobileMenu() {
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const closeMenuBtn = document.getElementById('close-menu');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOverlay = document.getElementById('menu-overlay');

  if (!mobileMenuBtn || !mobileMenu) return;

  function openMobileMenu() {
    mobileMenu.classList.add('open');
    if (menuOverlay) menuOverlay.classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeMobileMenu() {
    mobileMenu.classList.remove('open');
    if (menuOverlay) menuOverlay.classList.remove('open');
    document.body.style.overflow = '';
  }

  mobileMenuBtn.addEventListener('click', openMobileMenu);
  if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMobileMenu);
  if (menuOverlay) menuOverlay.addEventListener('click', closeMobileMenu);

  // Close menu when clicking a link
  mobileMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', closeMobileMenu);
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {
      closeMobileMenu();
    }
  });
}

// ===== DARK MODE TOGGLE =====
function initDarkMode() {
  const darkModeToggle = document.getElementById('dark-mode-toggle');
  const darkModeToggleMobile = document.getElementById('dark-mode-toggle-mobile');

  // Prevent duplicate initialization
  if (window._darkModeInitialized) return;
  window._darkModeInitialized = true;

  function toggleDarkMode() {
    document.documentElement.classList.toggle('dark');
    const isDark = document.documentElement.classList.contains('dark');
    setCookie('darkMode', isDark, 365);
  }

  if (darkModeToggle) darkModeToggle.addEventListener('click', toggleDarkMode);
  if (darkModeToggleMobile) darkModeToggleMobile.addEventListener('click', toggleDarkMode);
}

// ===== BACK TO TOP =====
function initBackToTop() {
  const backToTop = document.getElementById('back-to-top');
  if (!backToTop) return;

  function updateBackToTop() {
    if (window.scrollY > 500) {
      backToTop.classList.add('visible');
    } else {
      backToTop.classList.remove('visible');
    }
  }

  backToTop.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  window.addEventListener('scroll', updateBackToTop);
}

// ===== SCROLL REVEAL =====
function initScrollReveal() {
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

  document.querySelectorAll('.reveal, .card-hover, .stagger-children').forEach(el => {
    revealObserver.observe(el);
  });
}

// ===== SMOOTH SCROLL =====
function initSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (href !== '#') {
        e.preventDefault();
        const target = document.querySelector(href);
        if (target) {
          const headerOffset = 80;
          const elementPosition = target.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.scrollY - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      }
    });
  });
}

// ===== COOKIE CONSENT EVENT LISTENERS =====
function initCookieConsentListeners() {
  // Banner buttons
  const acceptBtn = document.getElementById('cookie-accept');
  const rejectBtn = document.getElementById('cookie-reject');
  const customizeBtn = document.getElementById('cookie-customize');

  if (acceptBtn) acceptBtn.addEventListener('click', () => CookieConsent.acceptAll());
  if (rejectBtn) rejectBtn.addEventListener('click', () => CookieConsent.rejectAll());
  if (customizeBtn) customizeBtn.addEventListener('click', () => {
    CookieConsent.hideBanner();
    CookieConsent.showModal();
  });

  // Modal buttons
  const modalClose = document.getElementById('cookie-modal-close');
  const modalBackdrop = document.getElementById('cookie-modal-backdrop');
  const modalReject = document.getElementById('cookie-modal-reject');
  const modalSave = document.getElementById('cookie-modal-save');

  if (modalClose) modalClose.addEventListener('click', () => CookieConsent.hideModal());
  if (modalBackdrop) modalBackdrop.addEventListener('click', () => CookieConsent.hideModal());
  if (modalReject) modalReject.addEventListener('click', () => CookieConsent.rejectAll());
  if (modalSave) modalSave.addEventListener('click', () => CookieConsent.savePreferences());

  // Footer cookie settings button
  const cookieSettingsBtn = document.getElementById('cookie-settings-btn');
  if (cookieSettingsBtn) cookieSettingsBtn.addEventListener('click', () => CookieConsent.showModal());

  // Note: Cookie toggles are now wrapped in <label> elements, so native browser behavior handles the toggle.
  // No additional JavaScript handlers needed for the toggle switches.
}

// ===== INITIALIZE ALL =====
function initAll() {
  initMobileMenu();
  initDarkMode();
  initBackToTop();
  initScrollReveal();
  initSmoothScroll();
  initCookieConsentListeners();
  CookieConsent.init();
}

// Handle both fresh page load and cases where DOM is already ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initAll);
} else {
  // DOM is already ready, initialize immediately
  initAll();
}

// Expose CookieConsent for external use
window.CookieConsent = CookieConsent;
</script>

<!-- /SHARED_SCRIPTS -->
</body>
</html>
