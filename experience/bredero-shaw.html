<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bredero Shaw | Lee Foropoulos - Software Engineer</title>
  <meta name="description" content="As Software Engineer at Bredero Shaw, Lee Foropoulos built industrial pipe inspection systems for Gulf of Mexico oil & gas production.">
  <meta name="ambient:music" content="cinematic-inspiring">
  <link rel="icon" type="image/svg+xml" href="../favicon.svg">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            navy: {
              900: '#0f172a',
              800: '#1e293b',
              700: '#334155',
              600: '#475569',
            },
            gold: {
              700: '#b45309',
              600: '#d97706',
              500: '#f59e0b',
              400: '#fbbf24',
              300: '#fcd34d',
              200: '#fde68a',
              100: '#fef3c7',
              50: '#fffbeb',
            }
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <script>
    function getCookie(name) {
      const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
      return match ? match[2] : null;
    }
    const darkPref = getCookie('darkMode');
    if (darkPref === 'true' || (!darkPref && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, sans-serif; }
    .hero-gradient {
      background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 50%, #1e3a5f 100%);
    }
  </style>
  <!-- Analytics: Google Analytics 4 + Microsoft Clarity -->
  <script src="/analytics.js" defer></script>
</head>
<body class="bg-white dark:bg-navy-900 text-gray-800 dark:text-gray-200">

  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-navy-900/95 backdrop-blur-md border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <a href="../" class="text-white font-bold text-xl tracking-tight group">
          <span class="group-hover:text-gold-400 transition">Foropoulos</span><span class="text-gold-400">Now</span><span class="text-gray-400 text-sm">.com</span>
        </a>
        <div class="flex items-center space-x-4">
          <button id="dark-mode-toggle" class="text-gray-300 hover:text-gold-400 p-2 rounded-lg hover:bg-white/10 transition" aria-label="Toggle dark mode">
            <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
            <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
            </svg>
          </button>
          <a href="../#journey" class="text-gray-300 hover:text-gold-400 transition flex items-center gap-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            Back to Journey
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero-gradient pt-32 pb-20">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row gap-8 items-start">
        <div class="flex-1">
          <div class="flex items-center gap-3 mb-4">
            <span class="bg-navy-700 text-gray-300 text-xs font-bold px-3 py-1 rounded-full">WHERE IT ALL BEGAN</span>
            <span class="text-gold-400 font-medium">Sep 2001 - Feb 2003</span>
          </div>
          <h1 class="text-4xl sm:text-5xl font-bold text-white mb-4">Software Engineer</h1>
          <p class="text-2xl text-gold-400 font-semibold mb-6">Bredero Shaw</p>
          <p class="text-xl text-gray-300 leading-relaxed">
            Part of a fabrication team building industrial pipe inspection systems for Gulf of Mexico oil & gas production. Engineered weld tracking applications, pipe dimensioning software (featured in Offshore Magazine), and real-time plant monitoring systems.
          </p>
        </div>
        <div class="w-40 h-28 bg-white rounded-2xl flex items-center justify-center shadow-2xl overflow-hidden p-2">
          <img src="logos/Bredero.png" alt="Bredero Shaw logo" class="w-full h-full object-contain">
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="py-16 bg-white dark:bg-navy-800">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">

      <!-- Overview -->
      <div class="mb-16">
        <h2 class="text-2xl font-bold text-navy-900 dark:text-white mb-6 flex items-center gap-3">
          <span class="w-10 h-10 bg-slate-100 dark:bg-slate-500/20 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-slate-600 dark:text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </span>
          Where It All Started
        </h2>
        <div class="prose prose-lg dark:prose-invert max-w-none">
          <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
            My career began in the industrial trenches—literally. Bredero Shaw was a pipe coating company serving the oil and gas industry, and I was part of the team building the software systems that ensured quality and safety in some of the world's most demanding environments. This is where I learned that software isn't just code—it's a tool that enables people to do important work safely and efficiently.
          </p>
          <p class="text-gray-600 dark:text-gray-300 leading-relaxed mt-4">
            The work I did here was featured in Offshore Magazine, a validation that meaningful engineering gets noticed. But more importantly, this experience gave me a deep appreciation for mission-critical systems and the responsibility that comes with building them.
          </p>
        </div>
      </div>

      <!-- Featured Work -->
      <div class="mb-16">
        <h2 class="text-2xl font-bold text-navy-900 dark:text-white mb-6 flex items-center gap-3">
          <span class="w-10 h-10 bg-gold-100 dark:bg-gold-500/20 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-gold-600 dark:text-gold-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
            </svg>
          </span>
          Featured Recognition
        </h2>
        <a href="https://www.offshore-mag.com/home/article/16759673/pipe-coating-plant-outgrows-forecasts" target="_blank" class="block bg-gradient-to-br from-gold-50 to-amber-50 dark:from-gold-500/10 dark:to-amber-500/10 rounded-2xl p-8 border border-gold-200 dark:border-gold-500/30 hover:border-gold-400 dark:hover:border-gold-400 transition group">
          <div class="flex items-center gap-4 mb-4">
            <span class="text-4xl">&#128240;</span>
            <div>
              <h3 class="text-xl font-bold text-navy-900 dark:text-white group-hover:text-gold-600 transition">Offshore Magazine Feature</h3>
              <p class="text-gray-600 dark:text-gray-400">Pipe coating plant outgrows forecasts</p>
            </div>
            <svg class="w-5 h-5 text-gold-500 ml-auto opacity-0 group-hover:opacity-100 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
            </svg>
          </div>
          <p class="text-gray-600 dark:text-gray-300">
            The pipe dimensioning software I engineered was featured in Offshore Magazine, highlighting the plant's innovation in improving accuracy and efficiency for Gulf of Mexico pipeline operations.
          </p>
          <span class="inline-flex items-center text-gold-600 dark:text-gold-400 text-sm font-medium mt-4 group-hover:underline">
            Read the article
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
          </span>
        </a>
      </div>

      <!-- Lessons Learned -->
      <div class="mb-16">
        <h2 class="text-2xl font-bold text-navy-900 dark:text-white mb-6 flex items-center gap-3">
          <span class="w-10 h-10 bg-slate-100 dark:bg-slate-500/20 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-slate-600 dark:text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
            </svg>
          </span>
          Foundation for Everything
        </h2>
        <div class="bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-8 border border-slate-200 dark:border-slate-700">
          <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
            This role taught me lessons that I've carried throughout my career:
          </p>
          <ul class="mt-4 space-y-3 text-gray-600 dark:text-gray-400">
            <li class="flex items-start gap-3">
              <span class="text-gold-500 mt-1">&#10003;</span>
              <span><strong>Precision matters</strong> — In industrial settings, software errors can have serious consequences. This instilled a commitment to quality that defines my work.</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-gold-500 mt-1">&#10003;</span>
              <span><strong>Software serves people</strong> — The best technology makes people's jobs easier, safer, and more effective.</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-gold-500 mt-1">&#10003;</span>
              <span><strong>Real-time systems require different thinking</strong> — The constraints of real-time monitoring shaped how I approach system architecture.</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-gold-500 mt-1">&#10003;</span>
              <span><strong>Industry recognition validates innovation</strong> — Being featured in Offshore Magazine showed me that doing excellent work gets noticed.</span>
            </li>
          </ul>
        </div>
      </div>

      <!-- Systems Engineered -->
      <div class="mb-16">
        <h2 class="text-2xl font-bold text-navy-900 dark:text-white mb-6 flex items-center gap-3">
          <span class="w-10 h-10 bg-slate-100 dark:bg-slate-500/20 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-slate-600 dark:text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
          </span>
          Systems Engineered
        </h2>
        <div class="space-y-6">

          <!-- Pipe Check -->
          <div class="bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-500/10 dark:to-blue-500/10 rounded-xl p-6 border border-cyan-200 dark:border-cyan-500/30">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                </svg>
              </div>
              <div class="flex-1">
                <h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Pipe Check</h3>
                <p class="text-gray-600 dark:text-gray-300 mb-4">Designed and developed the control-and-measurement software for a critical production line inspection system. The solution utilized motorized steel arms equipped with analog ball-bearing sensors to precisely map inner and outer pipe wall dimensions, including ovality measurements. Achieved certified measurement accuracy to ±10 µm, enabling Gulf of Mexico oil-and-gas pipeline components to meet stringent quality assurance and regulatory specifications. Additionally supported hardware fabrication, on-site calibration procedures, and comprehensive operator training programs, resulting in increased throughput and elimination of costly manual rework.</p>
                <div class="flex flex-wrap gap-2">
                  <span class="bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-300 px-3 py-1 rounded-full text-xs font-medium">Industrial Automation</span>
                  <span class="bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-300 px-3 py-1 rounded-full text-xs font-medium">Precision Measurement</span>
                  <span class="bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-300 px-3 py-1 rounded-full text-xs font-medium">QA Compliance</span>
                  <span class="bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-300 px-3 py-1 rounded-full text-xs font-medium">Sensor Integration</span>
                  <span class="bg-cyan-100 dark:bg-cyan-500/20 text-cyan-700 dark:text-cyan-300 px-3 py-1 rounded-full text-xs font-medium">Operator Training</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Weld Track -->
          <div class="bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-500/10 dark:to-amber-500/10 rounded-xl p-6 border border-orange-200 dark:border-orange-500/30">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"></path>
                </svg>
              </div>
              <div class="flex-1">
                <h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Weld Track</h3>
                <p class="text-gray-600 dark:text-gray-300 mb-4">Engineered a comprehensive plant-wide, multi-tier weld tracking system integrated with Pipe Track infrastructure to capture real-time weld and environmental data across 8+ production stations. The system enforces procedural compliance by validating welder qualifications, weld specifications, environmental parameters, pipe orientation, and sequence requirements. Additional capabilities include tracking non-conformance events, weld failures, production time metrics, and consumable usage. Built on N-tier architecture using VB.NET, ADO.NET, and SQL Server 2000, featuring disconnected datasets with automated conflict resolution to ensure uninterrupted operation and reliable shift-end reporting.</p>
                <div class="flex flex-wrap gap-2">
                  <span class="bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300 px-3 py-1 rounded-full text-xs font-medium">Data Analysis</span>
                  <span class="bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300 px-3 py-1 rounded-full text-xs font-medium">Software Development</span>
                  <span class="bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300 px-3 py-1 rounded-full text-xs font-medium">Model Validation</span>
                  <span class="bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300 px-3 py-1 rounded-full text-xs font-medium">Microsoft SQL Server</span>
                  <span class="bg-orange-100 dark:bg-orange-500/20 text-orange-700 dark:text-orange-300 px-3 py-1 rounded-full text-xs font-medium">Transaction Processing</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Plant Monitor -->
          <div class="bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-500/10 dark:to-teal-500/10 rounded-xl p-6 border border-emerald-200 dark:border-emerald-500/30">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                </svg>
              </div>
              <div class="flex-1">
                <h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Plant Monitor</h3>
                <p class="text-gray-600 dark:text-gray-300 mb-4">Developed a real-time monitoring dashboard that captured and visualized all PLC status data from welding facility operations. The system provided an intuitive visual display of pipe locations throughout the plant floor, enabling operators and management to track production flow at a glance. Key features included weld time tracking, comprehensive data logging, and historical playback capabilities that allowed precise review of any moment in the production timeline. The system proved instrumental in verifying contractor performance against SLAs and ensuring compliance with contractual obligations to major clients including BP and Shell.</p>
                <div class="flex flex-wrap gap-2">
                  <span class="bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 px-3 py-1 rounded-full text-xs font-medium">PLC Integration</span>
                  <span class="bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 px-3 py-1 rounded-full text-xs font-medium">Real-Time Monitoring</span>
                  <span class="bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 px-3 py-1 rounded-full text-xs font-medium">Data Visualization</span>
                  <span class="bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 px-3 py-1 rounded-full text-xs font-medium">Contract Compliance</span>
                  <span class="bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-300 px-3 py-1 rounded-full text-xs font-medium">Historical Playback</span>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Skills Applied -->
      <div class="mb-16">
        <h2 class="text-2xl font-bold text-navy-900 dark:text-white mb-6 flex items-center gap-3">
          <span class="w-10 h-10 bg-slate-100 dark:bg-slate-500/20 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-slate-600 dark:text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
            </svg>
          </span>
          Skills Applied
        </h2>
        <div class="flex flex-wrap gap-2">
          <span class="bg-slate-100 text-slate-700 px-4 py-2 rounded-full text-sm font-medium">Industrial Software</span>
          <span class="bg-slate-100 text-slate-700 px-4 py-2 rounded-full text-sm font-medium">Real-time Systems</span>
          <span class="bg-slate-100 text-slate-700 px-4 py-2 rounded-full text-sm font-medium">Weld Tracking</span>
          <span class="bg-slate-100 text-slate-700 px-4 py-2 rounded-full text-sm font-medium">Quality Control</span>
          <span class="bg-slate-100 text-slate-700 px-4 py-2 rounded-full text-sm font-medium">Oil & Gas</span>
          <span class="bg-slate-100 text-slate-700 px-4 py-2 rounded-full text-sm font-medium">Hardware Integration</span>
          <span class="bg-slate-100 text-slate-700 px-4 py-2 rounded-full text-sm font-medium">Plant Monitoring</span>
          <span class="bg-slate-100 text-slate-700 px-4 py-2 rounded-full text-sm font-medium">Pipe Dimensioning</span>
        </div>
      </div>

      <!-- Photo Gallery Placeholder -->
      <div class="mb-16">
        <h2 class="text-2xl font-bold text-navy-900 dark:text-white mb-6 flex items-center gap-3">
          <span class="w-10 h-10 bg-slate-100 dark:bg-slate-500/20 rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-slate-600 dark:text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
          </span>
          Gallery
        </h2>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
          <div class="aspect-video bg-gray-100 dark:bg-navy-700 rounded-xl flex items-center justify-center">
            <p class="text-gray-400 text-sm">Photo coming soon</p>
          </div>
          <div class="aspect-video bg-gray-100 dark:bg-navy-700 rounded-xl flex items-center justify-center">
            <p class="text-gray-400 text-sm">Photo coming soon</p>
          </div>
          <div class="aspect-video bg-gray-100 dark:bg-navy-700 rounded-xl flex items-center justify-center">
            <p class="text-gray-400 text-sm">Photo coming soon</p>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- Navigation Footer -->
  <section class="py-12 bg-gray-50 dark:bg-navy-900 border-t border-gray-200 dark:border-navy-700">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col sm:flex-row justify-between items-center gap-6">
        <a href="micro-images" class="text-gray-600 dark:text-gray-400 hover:text-slate-500 transition flex items-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          Previous: Micro Images
        </a>
        <a href="../#journey" class="text-gold-500 hover:text-gold-400 transition flex items-center gap-2 font-semibold">
          Back to Timeline
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-navy-900 border-t border-white/10 py-8">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <p class="text-gray-400">&copy; 2026 Greek-Fire Corporation. All rights reserved.</p>
    </div>
  
    <!-- Legal Links -->
<div class="mt-8 pt-6 border-t border-white/10 flex flex-wrap justify-center gap-4 text-sm">
  <button id="cookie-settings-btn" class="text-gray-500 hover:text-gold-400 transition">Cookie Settings</button>
  <span class="text-gray-600">|</span>
  <a href="../privacy" class="text-gray-500 hover:text-gold-400 transition">Privacy Policy</a>
</div>
  </footer>

<!-- MUSIC_PLAYER -->
<!-- Ambient Music Player -->
<div id="music-player" class="fixed bottom-8 left-8 z-[60] opacity-0 translate-y-4 transition-all duration-500">
  <!-- Expanded Player Panel -->
  <div id="music-panel" class="hidden mb-3 bg-navy-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden w-72">
    <!-- Track Visualizer Header -->
    <div class="relative h-24 bg-gradient-to-br from-gold-500/20 via-purple-500/20 to-blue-500/20 overflow-hidden">
      <div id="music-visualizer" class="absolute inset-0 flex items-end justify-center gap-1 px-4 pb-2"></div>
      <div class="absolute inset-0 bg-gradient-to-t from-navy-900/90 to-transparent"></div>
      <div class="absolute bottom-2 left-4 right-4">
        <p id="music-track-name" class="text-white font-semibold text-sm truncate">Select a track</p>
        <p id="music-track-artist" class="text-gray-400 text-xs truncate">Ambient Soundscapes</p>
      </div>
    </div>

    <!-- Track Selector -->
    <div class="p-4 border-b border-white/10">
      <label class="text-gray-400 text-xs block mb-2">Atmosphere</label>
      <select id="music-track-select" class="w-full bg-navy-800 text-white text-sm rounded-lg px-3 py-2.5 border border-white/10 focus:border-gold-500 focus:outline-none cursor-pointer">
        <option value="">Choose your vibe...</option>
        <optgroup label="Relaxing">
          <option value="acoustic-guitar">Acoustic Bossa Nova</option>
          <option value="stardust">Stardust Meditation</option>
        </optgroup>
        <optgroup label="Focus">
          <option value="flow-state">Flow State</option>
          <option value="morning-clarity">Morning Clarity</option>
        </optgroup>
        <optgroup label="Atmospheric">
          <option value="cosmic">Cosmic Journey</option>
          <option value="noir">Noir Atmosphere</option>
          <option value="sunrise">Golden Sunrise</option>
        </optgroup>
      </select>
    </div>

    <!-- Progress Bar -->
    <div class="px-4 pt-4">
      <div id="music-progress-container" class="h-1.5 bg-navy-700 rounded-full cursor-pointer relative group">
        <div id="music-progress-bar" class="h-full bg-gradient-to-r from-gold-500 to-gold-400 rounded-full transition-all duration-100" style="width: 0%"></div>
        <div id="music-progress-handle" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity cursor-grab" style="left: 0%"></div>
      </div>
      <div class="flex justify-between text-gray-500 text-xs mt-1">
        <span id="music-time-current">0:00</span>
        <span id="music-time-duration">0:00</span>
      </div>
    </div>

    <!-- Playback Controls -->
    <div class="p-4 flex items-center justify-center gap-4">
      <button id="music-play-btn" class="w-14 h-14 rounded-full bg-gold-500 hover:bg-gold-400 text-navy-900 flex items-center justify-center transition transform hover:scale-105 shadow-lg">
        <svg id="music-play-icon" class="w-6 h-6 ml-1" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"></path>
        </svg>
        <svg id="music-pause-icon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>
        </svg>
      </button>
    </div>

    <!-- Volume Control -->
    <div class="px-4 pb-4">
      <div class="flex items-center gap-3">
        <button id="music-mute" class="text-gray-400 hover:text-white transition">
          <svg id="music-volume-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072M18.364 5.636a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>
          </svg>
          <svg id="music-mute-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>
          </svg>
        </button>
        <div id="music-volume-container" class="flex-1 h-2 bg-navy-700 rounded-full cursor-pointer relative group">
          <div id="music-volume-bar" class="h-full bg-gradient-to-r from-gold-500 to-gold-400 rounded-full transition-all" style="width: 25%"></div>
          <div id="music-volume-handle" class="absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full shadow-lg cursor-grab" style="left: 25%"></div>
        </div>
        <span id="music-volume-value" class="text-gray-400 text-xs w-8">25%</span>
      </div>
    </div>

    <div class="px-4 pb-3 text-center">
      <p class="text-gray-500 text-xs">Premium ambient soundscapes</p>
    </div>
  </div>

  <!-- Floating Toggle Button -->
  <button id="music-toggle" class="relative bg-navy-900/90 hover:bg-navy-800 backdrop-blur-xl text-white p-4 rounded-full shadow-2xl border border-white/10 transition-all duration-300 hover:scale-110 hover:border-gold-500/50 group" style="pointer-events: auto !important; z-index: 9999 !important;">
    <div id="music-pulse" class="absolute inset-0 rounded-full border-2 border-gold-500/50 animate-ping hidden"></div>
    <svg id="music-note-icon" class="w-6 h-6 text-gold-400 group-hover:text-gold-300 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
    </svg>
    <div id="music-eq-mini" class="absolute inset-0 flex items-center justify-center gap-0.5 hidden">
      <span class="w-1 h-3 bg-gold-400 rounded-full animate-eq-1"></span>
      <span class="w-1 h-4 bg-gold-400 rounded-full animate-eq-2"></span>
      <span class="w-1 h-2 bg-gold-400 rounded-full animate-eq-3"></span>
      <span class="w-1 h-3 bg-gold-400 rounded-full animate-eq-4"></span>
    </div>
    <span id="music-badge" class="absolute -top-1 -right-1 w-3 h-3 bg-gold-500 rounded-full hidden">
      <span class="absolute inset-0 rounded-full bg-gold-500 animate-ping"></span>
    </span>
  </button>

  <!-- Welcome notification -->
  <div id="music-welcome" class="absolute bottom-full left-0 mb-3 hidden opacity-0 transition-opacity duration-500 w-64">
    <div class="bg-navy-800/95 backdrop-blur-xl rounded-xl p-4 shadow-2xl border border-gold-500/20 relative">
      <div class="absolute -bottom-2 left-6 w-4 h-4 bg-navy-800/95 border-r border-b border-gold-500/20 transform rotate-45"></div>
      <div class="flex items-center gap-2 mb-2">
        <div class="w-8 h-8 rounded-full bg-gold-500/20 flex items-center justify-center">
          <svg class="w-4 h-4 text-gold-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
          </svg>
        </div>
        <span class="text-gold-400 font-semibold text-sm">Enhance Your Experience</span>
      </div>
      <p class="text-gray-300 text-xs leading-relaxed mb-3">
        Enable ambient music for an immersive browsing experience.
      </p>
      <div class="flex gap-2">
        <button id="music-welcome-play" class="flex-1 bg-gold-500 hover:bg-gold-400 text-navy-900 text-xs font-semibold py-2 px-3 rounded-lg transition transform hover:scale-105">
          Play Music
        </button>
        <button id="music-welcome-dismiss" class="px-3 py-2 text-gray-400 hover:text-white text-xs rounded-lg border border-white/10 hover:border-white/30 transition">
          Later
        </button>
      </div>
    </div>
  </div>
</div>

<style>
  #music-player.visible { opacity: 1; transform: translateY(0); }
  @keyframes eq-1 { 0%, 100% { height: 4px; } 50% { height: 16px; } }
  @keyframes eq-2 { 0%, 100% { height: 8px; } 50% { height: 20px; } }
  @keyframes eq-3 { 0%, 100% { height: 12px; } 50% { height: 8px; } }
  @keyframes eq-4 { 0%, 100% { height: 6px; } 50% { height: 14px; } }
  .animate-eq-1 { animation: eq-1 0.8s ease-in-out infinite; }
  .animate-eq-2 { animation: eq-2 0.6s ease-in-out infinite 0.1s; }
  .animate-eq-3 { animation: eq-3 0.7s ease-in-out infinite 0.2s; }
  .animate-eq-4 { animation: eq-4 0.5s ease-in-out infinite 0.15s; }
  .visualizer-bar { width: 4px; background: linear-gradient(to top, #f59e0b, #fbbf24); border-radius: 2px; transition: height 0.1s ease; }
  #music-track-select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%239ca3af'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 1rem; }
  #music-welcome.show { opacity: 1; }
  @keyframes welcome-glow { 0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.2); } 50% { box-shadow: 0 0 40px rgba(245, 158, 11, 0.4); } }
  #music-welcome.show > div { animation: welcome-glow 2s ease-in-out infinite; }
</style>

<script>
(function() {
  'use strict';

  // Version for cache clearing on updates
  const MUSIC_VERSION = '5';
  if (localStorage.getItem('musicVersion') !== MUSIC_VERSION) {
    localStorage.removeItem('musicTrack');
    localStorage.removeItem('musicEnabled');
    localStorage.removeItem('musicWelcomeSeen');
    localStorage.removeItem('userSelectedTrack');
    localStorage.setItem('musicVersion', MUSIC_VERSION);
  }

  // Track definitions with MP3 file paths
  const TRACKS = {
    'acoustic-guitar': {
      name: 'Acoustic Bossa Nova',
      artist: 'Relaxing Vibes',
      file: '/audio/acoustic-guitar-bossa-nova-295307.mp3',
      mood: 'relaxing'
    },
    'stardust': {
      name: 'Stardust Meditation',
      artist: 'Deep Relaxation',
      file: '/audio/stardust-meditation-12702.mp3',
      mood: 'meditative'
    },
    'flow-state': {
      name: 'Flow State',
      artist: 'Focus & Productivity',
      file: '/audio/flow-state-ambient-music-374741.mp3',
      mood: 'focus'
    },
    'morning-clarity': {
      name: 'Morning Clarity',
      artist: 'Fresh Start',
      file: '/audio/morning-clarity-443232.mp3',
      mood: 'uplifting'
    },
    'cosmic': {
      name: 'Cosmic Journey',
      artist: 'Stellar Motivation',
      file: '/audio/cosmic-stellar-journey-motivation-322778.mp3',
      mood: 'epic'
    },
    'noir': {
      name: 'Noir Atmosphere',
      artist: 'Dark Ambiance',
      file: '/audio/noir-alley-415342.mp3',
      mood: 'dark'
    },
    'sunrise': {
      name: 'Golden Sunrise',
      artist: 'New Beginnings',
      file: '/audio/sunrise-337749.mp3',
      mood: 'bright'
    }
  };

  // Intelligent page-to-track mapping based on content type and path
  function getPageTrack() {
    const path = window.location.pathname.toLowerCase();
    const meta = document.querySelector('meta[name="ambient:music"]');

    // If page has explicit meta tag, use that
    if (meta && meta.content && TRACKS[meta.content]) {
      return meta.content;
    }

    // Main pages
    if (path === '/' || path === '/index.html') return 'sunrise';
    if (path.includes('/blog/index') || path === '/blog/' || path === '/blog') return 'sunrise';
    if (path.includes('/privacy')) return 'noir';

    // Blog post categories
    if (path.includes('/blog/posts/')) {
      // AI & Tech articles - focus music
      if (path.includes('ai-') || path.includes('claude') || path.includes('chatgpt') ||
          path.includes('agent') || path.includes('automation') || path.includes('ram-ssd')) {
        return 'flow-state';
      }
      // Health & Fitness - morning clarity
      if (path.includes('bmr') || path.includes('protein') || path.includes('supplement') ||
          path.includes('workout') || path.includes('habit')) {
        return 'morning-clarity';
      }
      // Book reviews - acoustic relaxation
      if (path.includes('book-review')) {
        if (path.includes('dungeon-crawler')) return 'noir';
        if (path.includes('ceo-excellence')) return 'cosmic';
        if (path.includes('brain-rules')) return 'flow-state';
        return 'acoustic-guitar';
      }
      // Productivity & Business
      if (path.includes('morning-routine') || path.includes('ceo')) return 'morning-clarity';
      if (path.includes('fractional') || path.includes('breaking-big-tasks')) return 'flow-state';
      if (path.includes('slop')) return 'noir';

      // Default blog post
      return 'flow-state';
    }

    // Experience pages - cosmic/motivational
    if (path.includes('/experience/')) {
      return 'cosmic';
    }

    // Profile pages - meditative
    if (path.includes('/profiles/')) {
      return 'stardust';
    }

    // Ventures - cosmic/entrepreneurial
    if (path.includes('/ventures/')) {
      return 'cosmic';
    }

    // Default fallback
    return 'sunrise';
  }

  let audio = null;
  let audioContext = null;
  let analyser = null;
  let isPlaying = false;
  let currentTrackId = null;
  let volume = 0.25;
  let animationId = null;

  const player = document.getElementById('music-player');
  if (!player) return;

  const panel = document.getElementById('music-panel');
  const toggleBtn = document.getElementById('music-toggle');
  const playBtn = document.getElementById('music-play-btn');
  const playIcon = document.getElementById('music-play-icon');
  const pauseIcon = document.getElementById('music-pause-icon');
  const trackSelect = document.getElementById('music-track-select');
  const trackName = document.getElementById('music-track-name');
  const trackArtist = document.getElementById('music-track-artist');
  const volumeBar = document.getElementById('music-volume-bar');
  const volumeHandle = document.getElementById('music-volume-handle');
  const volumeContainer = document.getElementById('music-volume-container');
  const volumeValue = document.getElementById('music-volume-value');
  const muteBtn = document.getElementById('music-mute');
  const volumeIcon = document.getElementById('music-volume-icon');
  const muteIcon = document.getElementById('music-mute-icon');
  const visualizer = document.getElementById('music-visualizer');
  const pulse = document.getElementById('music-pulse');
  const noteIcon = document.getElementById('music-note-icon');
  const eqMini = document.getElementById('music-eq-mini');
  const welcomeEl = document.getElementById('music-welcome');
  const welcomePlayBtn = document.getElementById('music-welcome-play');
  const welcomeDismissBtn = document.getElementById('music-welcome-dismiss');
  const musicBadge = document.getElementById('music-badge');
  const progressContainer = document.getElementById('music-progress-container');
  const progressBar = document.getElementById('music-progress-bar');
  const progressHandle = document.getElementById('music-progress-handle');
  const timeCurrent = document.getElementById('music-time-current');
  const timeDuration = document.getElementById('music-time-duration');

  // Persistence helpers
  function setMusicEnabled(enabled) { localStorage.setItem('musicEnabled', enabled ? 'true' : 'false'); }
  function isMusicEnabled() { return localStorage.getItem('musicEnabled') === 'true'; }
  function setUserTrack(trackId) { localStorage.setItem('userSelectedTrack', trackId); }
  function getUserTrack() { return localStorage.getItem('userSelectedTrack'); }

  // Cross-page playback persistence
  function savePlaybackState() {
    if (audio && isPlaying && currentTrackId) {
      const state = {
        trackId: currentTrackId,
        position: audio.currentTime,
        timestamp: Date.now()
      };
      localStorage.setItem('musicPlaybackState', JSON.stringify(state));
    }
  }

  function getPlaybackState() {
    try {
      const stateStr = localStorage.getItem('musicPlaybackState');
      if (!stateStr) return null;
      const state = JSON.parse(stateStr);
      // Only use state if it's less than 5 seconds old (fresh navigation)
      if (Date.now() - state.timestamp < 5000) {
        return state;
      }
      localStorage.removeItem('musicPlaybackState');
      return null;
    } catch (e) {
      return null;
    }
  }

  function clearPlaybackState() {
    localStorage.removeItem('musicPlaybackState');
  }

  // Save state before leaving page
  window.addEventListener('beforeunload', savePlaybackState);
  // Also save periodically while playing (every 2 seconds)
  setInterval(() => {
    if (isPlaying) savePlaybackState();
  }, 2000);

  function showWelcome() {
    if (localStorage.getItem('musicWelcomeSeen')) return;
    if (musicBadge) musicBadge.classList.remove('hidden');
    setTimeout(() => {
      if (welcomeEl && !isPlaying) {
        welcomeEl.classList.remove('hidden');
        setTimeout(() => welcomeEl.classList.add('show'), 50);
      }
    }, 3000);
  }

  function hideWelcome(permanent = false) {
    if (welcomeEl) {
      welcomeEl.classList.remove('show');
      setTimeout(() => welcomeEl.classList.add('hidden'), 500);
    }
    if (musicBadge) musicBadge.classList.add('hidden');
    if (permanent) localStorage.setItem('musicWelcomeSeen', 'true');
  }

  function formatTime(seconds) {
    if (isNaN(seconds)) return '0:00';
    const mins = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  }

  function initAudio() {
    if (!audio) {
      audio = new Audio();
      audio.loop = true;
      audio.volume = volume;
      audio.crossOrigin = 'anonymous';

      audio.addEventListener('loadedmetadata', () => {
        if (timeDuration) timeDuration.textContent = formatTime(audio.duration);
      });

      audio.addEventListener('timeupdate', () => {
        if (audio.duration) {
          const percent = (audio.currentTime / audio.duration) * 100;
          if (progressBar) progressBar.style.width = `${percent}%`;
          if (progressHandle) progressHandle.style.left = `${percent}%`;
          if (timeCurrent) timeCurrent.textContent = formatTime(audio.currentTime);
        }
      });

      audio.addEventListener('ended', () => {
        // Loop is enabled, but just in case
        audio.currentTime = 0;
        audio.play().catch(() => {});
      });

      audio.addEventListener('error', (e) => {
        console.warn('Audio load error:', e);
      });
    }

    // Set up Web Audio API for visualizer
    if (!audioContext) {
      try {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        analyser = audioContext.createAnalyser();
        analyser.fftSize = 64;
        const source = audioContext.createMediaElementSource(audio);
        source.connect(analyser);
        analyser.connect(audioContext.destination);
      } catch (e) {
        console.warn('Web Audio API not available for visualizer');
      }
    }
  }

  function loadTrack(trackId, startPosition = 0) {
    if (!TRACKS[trackId]) return;

    initAudio();

    const track = TRACKS[trackId];
    currentTrackId = trackId;

    // Update UI
    if (trackName) trackName.textContent = track.name;
    if (trackArtist) trackArtist.textContent = track.artist;
    if (trackSelect) trackSelect.value = trackId;

    // Load the audio file
    audio.src = track.file;

    // Set start position once audio is ready
    if (startPosition > 0) {
      audio.addEventListener('loadedmetadata', function onLoaded() {
        audio.currentTime = Math.min(startPosition, audio.duration - 1);
        audio.removeEventListener('loadedmetadata', onLoaded);
      }, { once: true });
    }

    audio.load();
  }

  function play() {
    if (!currentTrackId) {
      // Determine which track to play
      // Priority: 1. User preference, 2. Page-specific track
      const userTrack = getUserTrack();
      const pageTrack = getPageTrack();
      const trackToPlay = userTrack || pageTrack;
      loadTrack(trackToPlay);
    }

    if (audioContext && audioContext.state === 'suspended') {
      audioContext.resume();
    }

    audio.play().then(() => {
      isPlaying = true;
      setMusicEnabled(true);
      updatePlayButton();
      animateVisualizer();
      hideWelcome(true);
    }).catch((e) => {
      console.warn('Playback failed:', e);
    });
  }

  function pause() {
    if (audio) {
      audio.pause();
    }
    isPlaying = false;
    updatePlayButton();
    if (animationId) {
      cancelAnimationFrame(animationId);
      animationId = null;
    }
  }

  function togglePlay() {
    isPlaying ? pause() : play();
  }

  function updatePlayButton() {
    if (isPlaying) {
      if (playIcon) playIcon.classList.add('hidden');
      if (pauseIcon) pauseIcon.classList.remove('hidden');
      if (pulse) pulse.classList.remove('hidden');
      if (noteIcon) noteIcon.classList.add('hidden');
      if (eqMini) eqMini.classList.remove('hidden');
    } else {
      if (playIcon) playIcon.classList.remove('hidden');
      if (pauseIcon) pauseIcon.classList.add('hidden');
      if (pulse) pulse.classList.add('hidden');
      if (noteIcon) noteIcon.classList.remove('hidden');
      if (eqMini) eqMini.classList.add('hidden');
    }
  }

  function updateVolumeUI() {
    const percent = volume * 100;
    if (volumeBar) volumeBar.style.width = `${percent}%`;
    if (volumeHandle) volumeHandle.style.left = `${percent}%`;
    if (volumeValue) volumeValue.textContent = `${Math.round(percent)}%`;
    if (volume === 0) {
      if (volumeIcon) volumeIcon.classList.add('hidden');
      if (muteIcon) muteIcon.classList.remove('hidden');
    } else {
      if (volumeIcon) volumeIcon.classList.remove('hidden');
      if (muteIcon) muteIcon.classList.add('hidden');
    }
  }

  function createVisualizerBars() {
    if (!visualizer) return;
    visualizer.innerHTML = '';
    for (let i = 0; i < 32; i++) {
      const bar = document.createElement('div');
      bar.className = 'visualizer-bar';
      bar.style.height = '4px';
      visualizer.appendChild(bar);
    }
  }

  function animateVisualizer() {
    if (!isPlaying || !visualizer) {
      if (animationId) cancelAnimationFrame(animationId);
      return;
    }

    const bars = visualizer.querySelectorAll('.visualizer-bar');

    if (analyser) {
      const dataArray = new Uint8Array(analyser.frequencyBinCount);
      analyser.getByteFrequencyData(dataArray);
      bars.forEach((bar, i) => {
        const value = dataArray[i] || 0;
        bar.style.height = `${Math.max(4, (value / 255) * 60)}px`;
      });
    } else {
      // Fallback animation when Web Audio API isn't available
      bars.forEach((bar, i) => {
        const value = Math.random() * 0.5 + 0.3;
        bar.style.height = `${Math.max(4, value * 40)}px`;
      });
    }

    animationId = requestAnimationFrame(animateVisualizer);
  }

  function bindEvents() {
    if (toggleBtn && panel) {
      toggleBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        panel.classList.toggle('hidden');
        hideWelcome(true);
      });
    }

    // Click outside to close panel
    document.addEventListener('click', (e) => {
      if (panel && !panel.classList.contains('hidden')) {
        if (!panel.contains(e.target) && !toggleBtn.contains(e.target)) {
          panel.classList.add('hidden');
        }
      }
    });

    // Prevent clicks inside panel from closing it
    if (panel) {
      panel.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    }

    if (welcomePlayBtn) {
      welcomePlayBtn.addEventListener('click', () => {
        hideWelcome(true);
        if (panel) panel.classList.remove('hidden');
        play();
      });
    }

    if (welcomeDismissBtn) {
      welcomeDismissBtn.addEventListener('click', () => {
        hideWelcome(true);
        setMusicEnabled(false);
      });
    }

    if (playBtn) playBtn.addEventListener('click', togglePlay);

    if (trackSelect) {
      trackSelect.addEventListener('change', (e) => {
        if (e.target.value) {
          // User explicitly selected a track - save preference
          setUserTrack(e.target.value);
          loadTrack(e.target.value);
          play();
        }
      });
    }

    // Progress bar seek
    if (progressContainer) {
      progressContainer.addEventListener('click', (e) => {
        if (!audio || !audio.duration) return;
        const rect = progressContainer.getBoundingClientRect();
        const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
        audio.currentTime = percent * audio.duration;
      });
    }

    // Volume control
    if (volumeContainer) {
      volumeContainer.addEventListener('click', (e) => {
        const rect = volumeContainer.getBoundingClientRect();
        volume = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
        if (audio) audio.volume = volume;
        setCookie('musicVolume', volume, 365);
        updateVolumeUI();
      });
    }

    if (muteBtn) {
      muteBtn.addEventListener('click', () => {
        volume = volume === 0 ? 0.25 : 0;
        if (audio) audio.volume = volume;
        updateVolumeUI();
      });
    }
  }

  function init() {
    // Check for saved playback state from previous page
    const savedState = getPlaybackState();

    // Get the appropriate track for this page
    const pageTrack = getPageTrack();
    const userTrack = getUserTrack();

    // If we have a saved state from navigation, use that track
    // Otherwise use user preference or page default
    const displayTrack = savedState ? savedState.trackId : (userTrack || pageTrack);

    // Restore saved volume from cookie
    const savedVolume = getCookie('musicVolume');
    if (savedVolume) {
      volume = parseFloat(decodeURIComponent(savedVolume));
      updateVolumeUI();
    }

    // Set the track selector to show appropriate track
    if (trackSelect) trackSelect.value = displayTrack;

    // Update track display
    if (TRACKS[displayTrack]) {
      if (trackName) trackName.textContent = TRACKS[displayTrack].name;
      if (trackArtist) trackArtist.textContent = TRACKS[displayTrack].artist;
    }

    createVisualizerBars();
    bindEvents();

    const musicWasEnabled = isMusicEnabled();

    // If we have a fresh saved state, resume immediately
    if (savedState && musicWasEnabled) {
      player.classList.add('visible');
      loadTrack(savedState.trackId, savedState.position);
      // Small delay to ensure audio is ready
      setTimeout(() => {
        play();
        clearPlaybackState();
      }, 100);
    } else {
      // Normal startup with slight delay
      setTimeout(() => {
        player.classList.add('visible');
        if (musicWasEnabled) {
          loadTrack(displayTrack);
          play();
        } else {
          showWelcome();
        }
      }, 500);
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

<!-- /MUSIC_PLAYER -->

<!-- COOKIE_CONSENT -->
<!-- Cookie Consent Banner -->
<div id="cookie-consent" class="fixed bottom-0 left-0 right-0 z-[100] transform translate-y-full transition-transform duration-500" role="dialog" aria-labelledby="cookie-consent-title" aria-describedby="cookie-consent-description">
  <div class="bg-navy-900/98 backdrop-blur-lg border-t border-white/10 shadow-2xl">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
        <div class="flex-1">
          <h3 id="cookie-consent-title" class="text-white font-semibold text-lg mb-2">We value your privacy</h3>
          <p id="cookie-consent-description" class="text-gray-400 text-sm leading-relaxed">
            We use cookies to enhance your browsing experience, analyze site traffic, and personalize content.
            By clicking "Accept All", you consent to our use of cookies. You can manage your preferences anytime.
          </p>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 lg:ml-8">
          <button id="cookie-customize" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Customize
          </button>
          <button id="cookie-reject" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Reject All
          </button>
          <button id="cookie-accept" class="px-6 py-2.5 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full text-sm font-semibold transition transform hover:scale-105">
            Accept All
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Cookie Settings Modal -->
<div id="cookie-modal" class="fixed inset-0 z-[110] hidden" role="dialog" aria-modal="true" aria-labelledby="cookie-modal-title">
  <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" id="cookie-modal-backdrop"></div>
  <div class="fixed inset-0 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      <div class="bg-navy-800 rounded-2xl shadow-2xl max-w-lg w-full border border-white/10 transform transition-all">
        <div class="p-6 border-b border-white/10">
          <div class="flex items-center justify-between">
            <h3 id="cookie-modal-title" class="text-xl font-bold text-white">Cookie Preferences</h3>
            <button id="cookie-modal-close" class="text-gray-400 hover:text-white transition" aria-label="Close modal">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <p class="text-gray-400 text-sm mt-2">Manage your cookie preferences below. Essential cookies are always active as they're necessary for the site to function.</p>
        </div>

        <div class="p-6 space-y-4">
          <!-- Essential Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <h4 class="text-white font-semibold">Essential Cookies</h4>
              <p class="text-gray-400 text-sm mt-1">Required for basic site functionality like navigation and secure access. Cannot be disabled.</p>
            </div>
            <div class="relative">
              <input type="checkbox" id="cookie-essential" checked disabled class="sr-only">
              <div class="w-11 h-6 bg-gold-500 rounded-full opacity-50 cursor-not-allowed">
                <div class="absolute top-0.5 left-5 w-5 h-5 bg-white rounded-full shadow"></div>
              </div>
            </div>
          </div>

          <!-- Analytics Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <label for="cookie-analytics" class="text-white font-semibold cursor-pointer">Analytics Cookies</label>
              <p class="text-gray-400 text-sm mt-1">Help us understand how visitors interact with our site. We use Google Analytics and Microsoft Clarity.</p>
            </div>
            <label for="cookie-analytics" class="relative cursor-pointer">
              <input type="checkbox" id="cookie-analytics" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-600 peer-checked:bg-gold-500 rounded-full transition-colors"></div>
              <div class="absolute top-0.5 left-0.5 peer-checked:left-5 w-5 h-5 bg-white rounded-full shadow transition-all"></div>
            </label>
          </div>

          <!-- Marketing Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <label for="cookie-marketing" class="text-white font-semibold cursor-pointer">Marketing Cookies</label>
              <p class="text-gray-400 text-sm mt-1">Used to track visitors across websites to display relevant ads and measure campaign effectiveness.</p>
            </div>
            <label for="cookie-marketing" class="relative cursor-pointer">
              <input type="checkbox" id="cookie-marketing" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-600 peer-checked:bg-gold-500 rounded-full transition-colors"></div>
              <div class="absolute top-0.5 left-0.5 peer-checked:left-5 w-5 h-5 bg-white rounded-full shadow transition-all"></div>
            </label>
          </div>
        </div>

        <div class="p-6 border-t border-white/10 flex justify-end gap-3">
          <button id="cookie-modal-reject" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Reject All
          </button>
          <button id="cookie-modal-save" class="px-6 py-2.5 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full text-sm font-semibold transition">
            Save Preferences
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /COOKIE_CONSENT -->

<!-- SHARED_SCRIPTS -->
<script>
// ===== COOKIE UTILITIES =====
function getCookie(name) {
  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
  return match ? match[2] : null;
}

function setCookie(name, value, days) {
  const expires = new Date(Date.now() + days * 864e5).toUTCString();
  document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/; SameSite=Lax';
}

function deleteCookie(name) {
  document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
}

// ===== COOKIE CONSENT MANAGEMENT =====
const CookieConsent = {
  CONSENT_COOKIE: 'cookieConsent',
  CONSENT_VERSION: '1.0',

  getConsent() {
    const consent = getCookie(this.CONSENT_COOKIE);
    if (!consent) return null;
    try {
      return JSON.parse(decodeURIComponent(consent));
    } catch (e) {
      return null;
    }
  },

  setConsent(preferences) {
    const consent = {
      version: this.CONSENT_VERSION,
      timestamp: new Date().toISOString(),
      essential: true, // Always true
      analytics: preferences.analytics || false,
      marketing: preferences.marketing || false
    };
    setCookie(this.CONSENT_COOKIE, JSON.stringify(consent), 365);
    return consent;
  },

  hasConsent() {
    return this.getConsent() !== null;
  },

  hasAnalyticsConsent() {
    const consent = this.getConsent();
    return consent && consent.analytics === true;
  },

  hasMarketingConsent() {
    const consent = this.getConsent();
    return consent && consent.marketing === true;
  },

  showBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.remove('translate-y-full');
    }
  },

  hideBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.add('translate-y-full');
    }
  },

  showModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      // Set checkboxes to current preferences
      const consent = this.getConsent() || { analytics: false, marketing: false };
      const analyticsCheckbox = document.getElementById('cookie-analytics');
      const marketingCheckbox = document.getElementById('cookie-marketing');
      if (analyticsCheckbox) analyticsCheckbox.checked = consent.analytics;
      if (marketingCheckbox) marketingCheckbox.checked = consent.marketing;
    }
  },

  hideModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
  },

  acceptAll() {
    const consent = this.setConsent({ analytics: true, marketing: true });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'accept_all' });
    }
  },

  rejectAll() {
    const consent = this.setConsent({ analytics: false, marketing: false });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
  },

  savePreferences() {
    const analyticsCheckbox = document.getElementById('cookie-analytics');
    const marketingCheckbox = document.getElementById('cookie-marketing');
    const consent = this.setConsent({
      analytics: analyticsCheckbox ? analyticsCheckbox.checked : false,
      marketing: marketingCheckbox ? marketingCheckbox.checked : false
    });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (consent.analytics && typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'custom', analytics: consent.analytics, marketing: consent.marketing });
    }
  },

  applyConsent(consent) {
    // Dispatch event for analytics.js to listen to
    window.dispatchEvent(new CustomEvent('cookieConsentUpdated', { detail: consent }));
  },

  init() {
    if (!this.hasConsent()) {
      // Show banner after a short delay for better UX
      setTimeout(() => this.showBanner(), 1000);
    } else {
      // Apply existing consent
      this.applyConsent(this.getConsent());
    }
  }
};

// ===== MOBILE MENU =====
function initMobileMenu() {
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const closeMenuBtn = document.getElementById('close-menu');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOverlay = document.getElementById('menu-overlay');

  if (!mobileMenuBtn || !mobileMenu) return;

  function openMobileMenu() {
    mobileMenu.classList.add('open');
    if (menuOverlay) menuOverlay.classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeMobileMenu() {
    mobileMenu.classList.remove('open');
    if (menuOverlay) menuOverlay.classList.remove('open');
    document.body.style.overflow = '';
  }

  mobileMenuBtn.addEventListener('click', openMobileMenu);
  if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMobileMenu);
  if (menuOverlay) menuOverlay.addEventListener('click', closeMobileMenu);

  // Close menu when clicking a link
  mobileMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', closeMobileMenu);
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {
      closeMobileMenu();
    }
  });
}

// ===== DARK MODE TOGGLE =====
function initDarkMode() {
  const darkModeToggle = document.getElementById('dark-mode-toggle');
  const darkModeToggleMobile = document.getElementById('dark-mode-toggle-mobile');

  // Prevent duplicate initialization
  if (window._darkModeInitialized) return;
  window._darkModeInitialized = true;

  function toggleDarkMode() {
    document.documentElement.classList.toggle('dark');
    const isDark = document.documentElement.classList.contains('dark');
    setCookie('darkMode', isDark, 365);
  }

  if (darkModeToggle) darkModeToggle.addEventListener('click', toggleDarkMode);
  if (darkModeToggleMobile) darkModeToggleMobile.addEventListener('click', toggleDarkMode);
}

// ===== BACK TO TOP =====
function initBackToTop() {
  const backToTop = document.getElementById('back-to-top');
  if (!backToTop) return;

  function updateBackToTop() {
    if (window.scrollY > 500) {
      backToTop.classList.add('visible');
    } else {
      backToTop.classList.remove('visible');
    }
  }

  backToTop.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  window.addEventListener('scroll', updateBackToTop);
}

// ===== SCROLL REVEAL =====
function initScrollReveal() {
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

  document.querySelectorAll('.reveal, .card-hover, .stagger-children').forEach(el => {
    revealObserver.observe(el);
  });
}

// ===== SMOOTH SCROLL =====
function initSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (href !== '#') {
        e.preventDefault();
        const target = document.querySelector(href);
        if (target) {
          const headerOffset = 80;
          const elementPosition = target.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.scrollY - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      }
    });
  });
}

// ===== COOKIE CONSENT EVENT LISTENERS =====
function initCookieConsentListeners() {
  // Banner buttons
  const acceptBtn = document.getElementById('cookie-accept');
  const rejectBtn = document.getElementById('cookie-reject');
  const customizeBtn = document.getElementById('cookie-customize');

  if (acceptBtn) acceptBtn.addEventListener('click', () => CookieConsent.acceptAll());
  if (rejectBtn) rejectBtn.addEventListener('click', () => CookieConsent.rejectAll());
  if (customizeBtn) customizeBtn.addEventListener('click', () => {
    CookieConsent.hideBanner();
    CookieConsent.showModal();
  });

  // Modal buttons
  const modalClose = document.getElementById('cookie-modal-close');
  const modalBackdrop = document.getElementById('cookie-modal-backdrop');
  const modalReject = document.getElementById('cookie-modal-reject');
  const modalSave = document.getElementById('cookie-modal-save');

  if (modalClose) modalClose.addEventListener('click', () => CookieConsent.hideModal());
  if (modalBackdrop) modalBackdrop.addEventListener('click', () => CookieConsent.hideModal());
  if (modalReject) modalReject.addEventListener('click', () => CookieConsent.rejectAll());
  if (modalSave) modalSave.addEventListener('click', () => CookieConsent.savePreferences());

  // Footer cookie settings button
  const cookieSettingsBtn = document.getElementById('cookie-settings-btn');
  if (cookieSettingsBtn) cookieSettingsBtn.addEventListener('click', () => CookieConsent.showModal());

  // Note: Cookie toggles are now wrapped in <label> elements, so native browser behavior handles the toggle.
  // No additional JavaScript handlers needed for the toggle switches.
}

// ===== INITIALIZE ALL =====
function initAll() {
  initMobileMenu();
  initDarkMode();
  initBackToTop();
  initScrollReveal();
  initSmoothScroll();
  initCookieConsentListeners();
  CookieConsent.init();
}

// Handle both fresh page load and cases where DOM is already ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initAll);
} else {
  // DOM is already ready, initialize immediately
  initAll();
}

// Expose CookieConsent for external use
window.CookieConsent = CookieConsent;
</script>

<!-- /SHARED_SCRIPTS -->
</body>
</html>
