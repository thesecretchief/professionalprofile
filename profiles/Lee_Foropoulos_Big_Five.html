<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Big Five Personality Profile | Lee Foropoulos</title>
  <meta name="description" content="Explore Lee Foropoulos's Big Five personality traits - Extraversion, Emotional Stability, Agreeableness, Conscientiousness, and Openness.">
  <meta name="ambient:music" content="acoustic-jazz">
  <link rel="icon" type="image/svg+xml" href="../favicon.svg">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            navy: { 900: '#0f172a', 800: '#1e293b', 700: '#334155', 600: '#475569' },
            gold: { 700: '#b45309', 600: '#d97706', 500: '#f59e0b', 400: '#fbbf24', 300: '#fcd34d', 200: '#fde68a', 100: '#fef3c7', 50: '#fffbeb' }
          },
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
        }
      }
    }
  </script>
  <script>
    (function() {
      function getCookie(name) { const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)')); return match ? match[2] : null; }
      const darkPref = getCookie('darkMode');
      if (darkPref === 'true' || (!darkPref && window.matchMedia('(prefers-color-scheme: dark)').matches)) { document.documentElement.classList.add('dark'); }
    })();
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', system-ui, sans-serif; transition: background-color 0.3s ease, color 0.3s ease; }
    #scroll-progress { position: fixed; top: 64px; left: 0; width: 0%; height: 3px; background: linear-gradient(90deg, #f59e0b, #fbbf24); z-index: 100; }
    .gradient-text { background: linear-gradient(135deg, #f59e0b, #fbbf24); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; }
    .hero-gradient { background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%); }
    .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .card-hover:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.15); }
    .dark .card-hover:hover { box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
    .reveal { opacity: 0; transform: translateY(30px); transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
    .reveal.visible { opacity: 1; transform: translateY(0); }
    .dark-mode-toggle:hover { transform: rotate(15deg); }
    .mobile-menu { transform: translateX(100%); transition: transform 0.3s ease; }
    .mobile-menu.open { transform: translateX(0); }
    .menu-overlay { opacity: 0; visibility: hidden; transition: all 0.3s ease; }
    .menu-overlay.open { opacity: 1; visibility: visible; }
    .progress-bar { height: 10px; border-radius: 5px; overflow: hidden; background: rgba(0,0,0,0.1); }
    .dark .progress-bar { background: rgba(255,255,255,0.1); }
    .progress-fill { height: 100%; border-radius: 5px; transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1); width: 0; }
    .progress-fill.animated { width: var(--target-width); }
    .glow-card { position: relative; }
    .glow-card::before { content: ''; position: absolute; inset: -2px; border-radius: 1rem; padding: 2px; background: linear-gradient(135deg, #f59e0b, #fbbf24, #f59e0b); -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask-composite: exclude; opacity: 0; transition: opacity 0.3s ease; }
    .glow-card:hover::before { opacity: 1; }
    #back-to-top { opacity: 0; visibility: hidden; transition: all 0.3s ease; }
    #back-to-top.visible { opacity: 1; visibility: visible; }
    .trait-card:hover .trait-icon { transform: scale(1.1) rotate(5deg); }
    .trait-icon { transition: transform 0.3s ease; }
  </style>
  <!-- Analytics: Google Analytics 4 + Microsoft Clarity -->
  <script src="/analytics.js" defer></script>
</head>
<body class="bg-white dark:bg-navy-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">

  <div id="scroll-progress"></div>

  <nav class="fixed top-0 left-0 right-0 z-50 bg-navy-900/95 backdrop-blur-md border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <a href="../" class="text-white font-bold text-xl tracking-tight">Foropoulos<span class="text-gold-400">Now</span><span class="text-gray-400 text-sm">.com</span></a>
        <div class="hidden md:flex items-center space-x-8">
          <a href="../" class="text-gray-300 hover:text-gold-400 transition">Home</a>
          <a href="Lee_Foropoulos_DISC_Profile" class="text-gray-300 hover:text-gold-400 transition">DISC</a>
          <a href="Lee_Foropoulos_MBTI" class="text-gray-300 hover:text-gold-400 transition">MBTI</a>
          <a href="Lee_Foropoulos_Big_Five" class="text-gold-400 font-semibold">Big Five</a>
          <a href="Lee_Foropoulos_Human_Design_Profile" class="text-gray-300 hover:text-gold-400 transition">Human Design</a>
          <button id="dark-mode-toggle" class="dark-mode-toggle text-gray-300 hover:text-gold-400 p-2 rounded-lg hover:bg-white/10 transition" aria-label="Toggle dark mode">
            <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
          </button>
          <a href="https://www.upwork.com/freelancers/thesecretchief?viewMode=1" target="_blank" class="bg-gold-500 hover:bg-gold-400 text-navy-900 font-semibold px-5 py-2 rounded-full transition">Work With Me</a>
        </div>
        <div class="flex items-center gap-2 md:hidden">
          <button id="dark-mode-toggle-mobile" class="dark-mode-toggle text-gray-300 hover:text-gold-400 p-2"><svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg><svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg></button>
          <button id="mobile-menu-btn" class="text-white p-2"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button>
        </div>
      </div>
    </div>
    <div id="menu-overlay" class="menu-overlay fixed inset-0 bg-black/50 md:hidden z-40"></div>
    <div id="mobile-menu" class="mobile-menu fixed top-0 right-0 h-full w-72 bg-navy-900 shadow-2xl md:hidden z-50">
      <div class="p-6">
        <button id="close-menu" class="absolute top-4 right-4 text-white p-2"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
        <div class="mt-12 flex flex-col space-y-6">
          <a href="../" class="text-white text-lg hover:text-gold-400 transition">Home</a>
          <a href="Lee_Foropoulos_DISC_Profile" class="text-white text-lg hover:text-gold-400 transition">DISC</a>
          <a href="Lee_Foropoulos_MBTI" class="text-white text-lg hover:text-gold-400 transition">MBTI</a>
          <a href="Lee_Foropoulos_Big_Five" class="text-gold-400 text-lg font-semibold">Big Five</a>
          <a href="Lee_Foropoulos_Human_Design_Profile" class="text-white text-lg hover:text-gold-400 transition">Human Design</a>
          <hr class="border-white/20">
          <a href="https://www.upwork.com/freelancers/thesecretchief?viewMode=1" target="_blank" class="bg-gold-500 text-navy-900 font-semibold px-5 py-3 rounded-full text-center transition hover:bg-gold-400">Work With Me</a>
        </div>
      </div>
    </div>
  </nav>

  <section class="hero-gradient pt-24 pb-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <div class="inline-flex items-center gap-2 bg-gold-500/10 border border-gold-500/20 rounded-full px-4 py-2 mb-6">
        <svg class="w-5 h-5 text-gold-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>
        <span class="text-gold-400 font-medium">OCEAN Model</span>
      </div>
      <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6">My <span class="gradient-text">Big Five</span> Profile</h1>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed mb-10">The scientifically validated personality framework measuring Openness, Conscientiousness, Extraversion, Agreeableness, and Emotional Stability.</p>
      <div class="flex flex-wrap justify-center gap-3 mt-8">
        <div class="bg-orange-500/20 border border-orange-500/30 rounded-xl px-4 py-3"><div class="text-2xl font-bold text-orange-400">High</div><div class="text-gray-400 text-xs">Extraversion</div></div>
        <div class="bg-blue-500/20 border border-blue-500/30 rounded-xl px-4 py-3"><div class="text-2xl font-bold text-blue-400">High</div><div class="text-gray-400 text-xs">Stability</div></div>
        <div class="bg-green-500/20 border border-green-500/30 rounded-xl px-4 py-3"><div class="text-2xl font-bold text-green-400">High</div><div class="text-gray-400 text-xs">Agreeableness</div></div>
        <div class="bg-purple-500/20 border border-purple-500/30 rounded-xl px-4 py-3"><div class="text-2xl font-bold text-purple-400">High</div><div class="text-gray-400 text-xs">Conscientiousness</div></div>
        <div class="bg-pink-500/20 border border-pink-500/30 rounded-xl px-4 py-3"><div class="text-2xl font-bold text-pink-400">High</div><div class="text-gray-400 text-xs">Openness</div></div>
      </div>
    </div>
  </section>

  <section class="py-20 bg-white dark:bg-navy-900">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="reveal text-center mb-12">
        <h2 class="text-3xl font-bold text-navy-900 dark:text-white mb-4">What is the Big Five Model?</h2>
        <p class="text-lg text-gray-600 dark:text-gray-300 leading-relaxed">The Big Five Personality Test (IPIP-BFFM) is a scientifically validated assessment rooted in decades of psychological research. It measures five core traits: <strong class="text-gold-500">Openness</strong>, <strong class="text-gold-500">Conscientiousness</strong>, <strong class="text-gold-500">Extraversion</strong>, <strong class="text-gold-500">Agreeableness</strong>, and <strong class="text-gold-500">Neuroticism</strong> (reversed as Emotional Stability).</p>
      </div>
      <div class="reveal bg-gray-50 dark:bg-navy-800 rounded-2xl p-6 text-center border border-gray-100 dark:border-navy-700">
        <p class="text-gray-600 dark:text-gray-300">Discover your own traits at <a href="https://openpsychometrics.org/tests/IPIP-BFFM/" target="_blank" class="text-gold-500 hover:text-gold-400 font-semibold underline">OpenPsychometrics.org</a></p>
      </div>
    </div>
  </section>

  <section class="py-20 bg-gray-50 dark:bg-navy-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <div class="reveal"><div class="glow-card bg-white dark:bg-navy-900 rounded-2xl p-4 shadow-xl"><img src="images/BigFive_Chart.png" alt="Lee Foropoulos Big Five Chart" class="w-full rounded-xl" onerror="this.src='https://via.placeholder.com/600x400.png?text=Big+Five+Chart';"></div></div>
        <div class="reveal">
          <h2 class="text-3xl font-bold text-navy-900 dark:text-white mb-6">How These Traits Synergize</h2>
          <p class="text-gray-600 dark:text-gray-300 leading-relaxed mb-8">My Big Five traits form a cohesive framework that shapes my daily life and interactions. High Extraversion fuels my love for social engagement, while Emotional Stability provides a calm foundation for navigating stress. Agreeableness enhances my ability to build trusting relationships, Conscientiousness drives my disciplined approach, and Openness sparks creativity and innovative solutions.</p>
          <div class="space-y-4">
            <div><div class="flex justify-between mb-2"><span class="font-semibold text-orange-500">Extraversion</span><span class="text-gray-600 dark:text-gray-400">85%</span></div><div class="progress-bar"><div class="progress-fill bg-gradient-to-r from-orange-400 to-orange-600" style="--target-width: 85%"></div></div></div>
            <div><div class="flex justify-between mb-2"><span class="font-semibold text-blue-500">Emotional Stability</span><span class="text-gray-600 dark:text-gray-400">80%</span></div><div class="progress-bar"><div class="progress-fill bg-gradient-to-r from-blue-400 to-blue-600" style="--target-width: 80%"></div></div></div>
            <div><div class="flex justify-between mb-2"><span class="font-semibold text-green-500">Agreeableness</span><span class="text-gray-600 dark:text-gray-400">75%</span></div><div class="progress-bar"><div class="progress-fill bg-gradient-to-r from-green-400 to-green-600" style="--target-width: 75%"></div></div></div>
            <div><div class="flex justify-between mb-2"><span class="font-semibold text-purple-500">Conscientiousness</span><span class="text-gray-600 dark:text-gray-400">90%</span></div><div class="progress-bar"><div class="progress-fill bg-gradient-to-r from-purple-400 to-purple-600" style="--target-width: 90%"></div></div></div>
            <div><div class="flex justify-between mb-2"><span class="font-semibold text-pink-500">Openness</span><span class="text-gray-600 dark:text-gray-400">88%</span></div><div class="progress-bar"><div class="progress-fill bg-gradient-to-r from-pink-400 to-pink-600" style="--target-width: 88%"></div></div></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-20 bg-white dark:bg-navy-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="reveal text-center mb-12"><span class="inline-block bg-gold-100 dark:bg-gold-500/20 text-gold-700 dark:text-gold-400 text-sm font-semibold px-4 py-2 rounded-full mb-4">THE OCEAN MODEL</span><h2 class="text-3xl font-bold text-navy-900 dark:text-white">The Five Dimensions</h2></div>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="reveal trait-card card-hover bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-2xl p-8 border border-orange-200 dark:border-orange-800"><div class="trait-icon w-14 h-14 bg-orange-500 rounded-xl flex items-center justify-center mb-4"><svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Extraversion</h3><p class="text-sm text-orange-600 dark:text-orange-400 font-semibold mb-3">Surgency / Positive Emotionality</p><p class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">High extraversion marks me as outgoing, assertive, and energized by social connectionsâ€”qualities that shine in leadership and networking.</p></div>
        <div class="reveal trait-card card-hover bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-2xl p-8 border border-blue-200 dark:border-blue-800"><div class="trait-icon w-14 h-14 bg-blue-500 rounded-xl flex items-center justify-center mb-4"><svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div><h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Emotional Stability</h3><p class="text-sm text-blue-600 dark:text-blue-400 font-semibold mb-3">vs. Neuroticism</p><p class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">A high score positions me as calm, composed, and adept at navigating adversity. This stability equips me to lead under pressure.</p></div>
        <div class="reveal trait-card card-hover bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-2xl p-8 border border-green-200 dark:border-green-800"><div class="trait-icon w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-4"><svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Agreeableness</h3><p class="text-sm text-green-600 dark:text-green-400 font-semibold mb-3">Warmth & Cooperation</p><p class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">Scoring high, I prioritize harmony and collaboration, making me a trusted ally who balances empathy with assertiveness.</p></div>
        <div class="reveal trait-card card-hover bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-2xl p-8 border border-purple-200 dark:border-purple-800"><div class="trait-icon w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-4"><svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg></div><h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Conscientiousness</h3><p class="text-sm text-purple-600 dark:text-purple-400 font-semibold mb-3">Reliability & Discipline</p><p class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">A high score highlights my knack for organization and perseverance, empowering me to excel in project management and strategic planning.</p></div>
        <div class="reveal trait-card card-hover bg-gradient-to-br from-pink-50 to-pink-100 dark:from-pink-900/20 dark:to-pink-800/20 rounded-2xl p-8 border border-pink-200 dark:border-pink-800 lg:col-span-1 md:col-span-2"><div class="trait-icon w-14 h-14 bg-pink-500 rounded-xl flex items-center justify-center mb-4"><svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Openness to Experience</h3><p class="text-sm text-pink-600 dark:text-pink-400 font-semibold mb-3">Intellect / Imagination</p><p class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">A high score reveals my love for innovation, exploration, and diverse perspectives. This openness drives strategic thinking and creativity.</p></div>
      </div>
    </div>
  </section>

  <section class="py-20 bg-gray-50 dark:bg-navy-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="reveal text-center mb-12"><h2 class="text-3xl font-bold text-navy-900 dark:text-white mb-4">Explore My Other Profiles</h2><p class="text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">Get a complete picture of how I think, lead, and collaborate</p></div>
      <div class="grid sm:grid-cols-3 gap-6">
        <a href="Lee_Foropoulos_DISC_Profile" class="reveal card-hover glow-card bg-white dark:bg-navy-900 rounded-2xl p-8 text-center shadow-sm border border-gray-100 dark:border-navy-700"><div class="w-16 h-16 bg-red-100 dark:bg-red-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div><h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">DISC Profile</h3><p class="text-gray-500 dark:text-gray-400 text-sm mb-4">Balanced, versatile leadership</p><span class="text-gold-500 font-medium">View Profile &rarr;</span></a>
        <a href="Lee_Foropoulos_MBTI" class="reveal card-hover glow-card bg-white dark:bg-navy-900 rounded-2xl p-8 text-center shadow-sm border border-gray-100 dark:border-navy-700"><div class="w-16 h-16 bg-purple-100 dark:bg-purple-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">MBTI (ENTJ)</h3><p class="text-gray-500 dark:text-gray-400 text-sm mb-4">The Commander - Natural leader</p><span class="text-gold-500 font-medium">View Profile &rarr;</span></a>
        <a href="Lee_Foropoulos_Human_Design_Profile" class="reveal card-hover glow-card bg-white dark:bg-navy-900 rounded-2xl p-8 text-center shadow-sm border border-gray-100 dark:border-navy-700"><div class="w-16 h-16 bg-indigo-100 dark:bg-indigo-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg></div><h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Human Design</h3><p class="text-gray-500 dark:text-gray-400 text-sm mb-4">Manifesting Generator 6/2</p><span class="text-gold-500 font-medium">View Profile &rarr;</span></a>
      </div>
    </div>
  </section>

  <section class="py-24 hero-gradient">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <div class="reveal">
        <h2 class="text-3xl sm:text-4xl font-bold text-white mb-6">Harness My Big Five Traits</h2>
        <p class="text-xl text-gray-300 mb-10 leading-relaxed">My Big Five traits equip me to lead, collaborate, and innovate with impact. Let's connect to see how I can elevate your team or project.</p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="https://www.upwork.com/freelancers/thesecretchief?viewMode=1" target="_blank" class="inline-block bg-gold-500 hover:bg-gold-400 text-navy-900 font-bold px-10 py-4 rounded-full text-lg transition transform hover:scale-105">Let's Work Together</a>
          <a href="../#contact" class="inline-block border-2 border-white hover:bg-white text-white hover:text-navy-900 font-bold px-10 py-4 rounded-full text-lg transition">Get In Touch</a>
        </div>
      </div>
    </div>
  </section>

  <footer class="bg-navy-900 border-t border-white/10 py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid md:grid-cols-3 gap-8 items-center">
        <div><a href="../" class="text-white font-bold text-2xl tracking-tight">Foropoulos<span class="text-gold-400">Now</span><span class="text-gray-400 text-sm">.com</span></a><p class="text-gray-400 mt-2">Fractional CTO & Program Manager</p></div>
        <div class="text-center"><p class="text-gray-400">Explore your Big Five traits:</p><a href="https://openpsychometrics.org/tests/IPIP-BFFM/" target="_blank" class="text-gold-400 hover:text-gold-300 font-medium">OpenPsychometrics.org</a></div>
        <div class="text-center md:text-right"><p class="text-gray-400">&copy; 2026 Greek-Fire Corporation</p><a href="https://www.upwork.com/agencies/1699047706469380096/" target="_blank" class="text-gold-400 hover:text-gold-300 transition text-sm">Greek-Fire Corporation</a></div>
      </div>
    </div>
  
    <!-- Legal Links -->
<div class="mt-8 pt-6 border-t border-white/10 flex flex-wrap justify-center gap-4 text-sm">
  <button id="cookie-settings-btn" class="text-gray-500 hover:text-gold-400 transition">Cookie Settings</button>
  <span class="text-gray-600">|</span>
  <a href="../privacy" class="text-gray-500 hover:text-gold-400 transition">Privacy Policy</a>
</div>
  </footer>

  <button id="back-to-top" class="fixed bottom-8 right-8 w-12 h-12 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full shadow-lg flex items-center justify-center transition-all z-40" aria-label="Back to top"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg></button>

  <script>
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const closeMenuBtn = document.getElementById('close-menu');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuOverlay = document.getElementById('menu-overlay');
    function openMenu() { if (mobileMenu) mobileMenu.classList.add('open'); if (menuOverlay) menuOverlay.classList.add('open'); document.body.style.overflow = 'hidden'; }
    function closeMenu() { if (mobileMenu) mobileMenu.classList.remove('open'); if (menuOverlay) menuOverlay.classList.remove('open'); document.body.style.overflow = ''; }
    if (mobileMenuBtn) mobileMenuBtn.addEventListener('click', openMenu);
    if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMenu);
    if (menuOverlay) menuOverlay.addEventListener('click', closeMenu);
    if (mobileMenu) mobileMenu.querySelectorAll('a').forEach(link => link.addEventListener('click', closeMenu));

    // Note: Dark mode toggle is handled by SHARED_SCRIPTS - do not duplicate here

    const scrollProgress = document.getElementById('scroll-progress');
    if (scrollProgress) window.addEventListener('scroll', () => { scrollProgress.style.width = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100 + '%'; });

    const backToTop = document.getElementById('back-to-top');
    if (backToTop) { window.addEventListener('scroll', () => { backToTop.classList.toggle('visible', window.scrollY > 500); }); backToTop.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); }); }

    const revealObserver = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); }); }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
    document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

    const progressObserver = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('animated'); }); }, { threshold: 0.5 });
    document.querySelectorAll('.progress-fill').forEach(bar => progressObserver.observe(bar));
  </script>
<!-- MUSIC_PLAYER -->
<!-- Ambient Music Player -->
<div id="music-player" class="fixed bottom-8 left-8 z-[60] opacity-0 translate-y-4 transition-all duration-500">
  <!-- Expanded Player Panel -->
  <div id="music-panel" class="hidden mb-3 bg-navy-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden w-72">
    <!-- Track Visualizer Header -->
    <div class="relative h-24 bg-gradient-to-br from-gold-500/20 via-purple-500/20 to-blue-500/20 overflow-hidden">
      <div id="music-visualizer" class="absolute inset-0 flex items-end justify-center gap-1 px-4 pb-2">
        <!-- Equalizer bars generated by JS -->
      </div>
      <div class="absolute inset-0 bg-gradient-to-t from-navy-900/90 to-transparent"></div>
      <div class="absolute bottom-2 left-4 right-4">
        <p id="music-track-name" class="text-white font-semibold text-sm truncate">Select a track</p>
        <p id="music-track-artist" class="text-gray-400 text-xs truncate">Ambient Music</p>
      </div>
    </div>

    <!-- Track Selector -->
    <div class="p-4 border-b border-white/10">
      <label class="text-gray-400 text-xs block mb-2">Atmosphere</label>
      <select id="music-track-select" class="w-full bg-navy-800 text-white text-sm rounded-lg px-3 py-2.5 border border-white/10 focus:border-gold-500 focus:outline-none cursor-pointer">
        <option value="">Choose your vibe...</option>
        <optgroup label="Classical">
          <option value="classical-peaceful" data-name="Peaceful Piano" data-artist="Royalty Free">Peaceful Piano</option>
          <option value="classical-dramatic" data-name="Epic Orchestra" data-artist="Royalty Free">Epic Orchestra</option>
          <option value="classical-baroque" data-name="Baroque Elegance" data-artist="Royalty Free">Baroque Elegance</option>
        </optgroup>
        <optgroup label="Electronic">
          <option value="electronic-ambient" data-name="Deep Focus" data-artist="Royalty Free">Deep Focus</option>
          <option value="electronic-chill" data-name="Chill Waves" data-artist="Royalty Free">Chill Waves</option>
          <option value="electronic-dark" data-name="Dark Synthwave" data-artist="Royalty Free">Dark Synthwave</option>
        </optgroup>
        <optgroup label="Acoustic">
          <option value="acoustic-guitar" data-name="Acoustic Dreams" data-artist="Royalty Free">Acoustic Dreams</option>
          <option value="acoustic-jazz" data-name="Smooth Jazz" data-artist="Royalty Free">Smooth Jazz</option>
        </optgroup>
        <optgroup label="Cinematic">
          <option value="cinematic-tension" data-name="Building Tension" data-artist="Royalty Free">Building Tension</option>
          <option value="cinematic-inspiring" data-name="Inspiring Journey" data-artist="Royalty Free">Inspiring Journey</option>
        </optgroup>
      </select>
    </div>

    <!-- Progress Bar -->
    <div class="px-4 pt-3">
      <div id="music-progress-container" class="relative h-1.5 bg-white/10 rounded-full cursor-pointer group">
        <div id="music-progress-bar" class="absolute left-0 top-0 h-full bg-gradient-to-r from-gold-500 to-gold-400 rounded-full transition-all duration-150" style="width: 0%"></div>
        <div id="music-progress-handle" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-gold-400 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity" style="left: 0%"></div>
      </div>
      <div class="flex justify-between mt-1 text-xs text-gray-500">
        <span id="music-current-time">0:00</span>
        <span id="music-duration">0:00</span>
      </div>
    </div>

    <!-- Playback Controls -->
    <div class="flex items-center justify-center gap-2 p-4">
      <button id="music-shuffle" class="p-2 text-gray-500 hover:text-gold-400 transition rounded-lg hover:bg-white/5" title="Shuffle">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg>
      </button>
      <button id="music-prev" class="p-2 text-gray-400 hover:text-white transition rounded-lg hover:bg-white/5" title="Previous">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path>
        </svg>
      </button>
      <button id="music-play-btn" class="p-3 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full transition transform hover:scale-105 shadow-lg" title="Play">
        <svg id="music-play-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"></path>
        </svg>
        <svg id="music-pause-icon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>
        </svg>
      </button>
      <button id="music-next" class="p-2 text-gray-400 hover:text-white transition rounded-lg hover:bg-white/5" title="Next">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path>
        </svg>
      </button>
      <button id="music-loop" class="p-2 text-gray-500 hover:text-gold-400 transition rounded-lg hover:bg-white/5" title="Loop">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg>
      </button>
    </div>

    <!-- Volume Control -->
    <div class="px-4 pb-4 flex items-center gap-3">
      <button id="music-mute" class="text-gray-400 hover:text-white transition" title="Mute">
        <svg id="music-volume-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>
        </svg>
        <svg id="music-mute-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>
        </svg>
      </button>
      <div id="music-volume-container" class="flex-1 relative h-1.5 bg-white/10 rounded-full cursor-pointer group">
        <div id="music-volume-bar" class="absolute left-0 top-0 h-full bg-gold-500 rounded-full" style="width: 70%"></div>
        <div id="music-volume-handle" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-gold-400 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity" style="left: 70%"></div>
      </div>
      <span id="music-volume-value" class="text-gray-500 text-xs w-8 text-right">70%</span>
    </div>
  </div>

  <!-- Floating Toggle Button -->
  <button id="music-toggle" class="relative bg-navy-900/90 hover:bg-navy-800 backdrop-blur-xl text-white p-4 rounded-full shadow-2xl border border-white/10 transition-all duration-300 hover:scale-110 hover:border-gold-500/50 group">
    <!-- Pulsing ring when playing -->
    <div id="music-pulse" class="absolute inset-0 rounded-full bg-gold-500/20 animate-ping hidden"></div>

    <!-- Music note icon -->
    <svg id="music-note-icon" class="w-6 h-6 relative z-10 transition-transform group-hover:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
    </svg>

    <!-- Equalizer animation (shown when playing) -->
    <div id="music-eq-mini" class="hidden absolute inset-0 flex items-center justify-center gap-0.5">
      <span class="w-1 bg-gold-400 rounded-full animate-eq-1"></span>
      <span class="w-1 bg-gold-400 rounded-full animate-eq-2"></span>
      <span class="w-1 bg-gold-400 rounded-full animate-eq-3"></span>
      <span class="w-1 bg-gold-400 rounded-full animate-eq-4"></span>
    </div>

    <!-- New visitor notification badge -->
    <span id="music-badge" class="absolute -top-1 -right-1 w-3 h-3 bg-gold-500 rounded-full animate-pulse hidden"></span>
  </button>

  <!-- Welcome tooltip for new visitors -->
  <div id="music-welcome" class="absolute left-16 bottom-2 hidden opacity-0 transition-all duration-500">
    <div class="relative bg-gradient-to-r from-navy-800 to-navy-900 backdrop-blur-xl rounded-xl shadow-2xl border border-gold-500/30 p-4 min-w-[220px]">
      <!-- Glowing accent -->
      <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-gold-500/10 to-purple-500/10 animate-pulse"></div>

      <!-- Arrow pointing to button -->
      <div class="absolute -left-2 bottom-4 w-0 h-0 border-t-8 border-b-8 border-r-8 border-transparent border-r-navy-800"></div>

      <div class="relative">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-8 h-8 rounded-full bg-gold-500/20 flex items-center justify-center">
            <svg class="w-4 h-4 text-gold-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
            </svg>
          </div>
          <span class="text-gold-400 font-semibold text-sm">Enhance Your Experience</span>
        </div>
        <p class="text-gray-300 text-xs leading-relaxed mb-3">
          Enable ambient music for an immersive browsing experience. Curated tracks to match the mood.
        </p>
        <div class="flex gap-2">
          <button id="music-welcome-play" class="flex-1 bg-gold-500 hover:bg-gold-400 text-navy-900 text-xs font-semibold py-2 px-3 rounded-lg transition transform hover:scale-105">
            Play Music
          </button>
          <button id="music-welcome-dismiss" class="px-3 py-2 text-gray-400 hover:text-white text-xs rounded-lg border border-white/10 hover:border-white/30 transition">
            Later
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Equalizer animations */
  @keyframes eq-1 {
    0%, 100% { height: 4px; }
    50% { height: 16px; }
  }
  @keyframes eq-2 {
    0%, 100% { height: 8px; }
    50% { height: 20px; }
  }
  @keyframes eq-3 {
    0%, 100% { height: 12px; }
    50% { height: 8px; }
  }
  @keyframes eq-4 {
    0%, 100% { height: 6px; }
    50% { height: 14px; }
  }

  .animate-eq-1 { animation: eq-1 0.8s ease-in-out infinite; }
  .animate-eq-2 { animation: eq-2 0.6s ease-in-out infinite 0.1s; }
  .animate-eq-3 { animation: eq-3 0.7s ease-in-out infinite 0.2s; }
  .animate-eq-4 { animation: eq-4 0.5s ease-in-out infinite 0.15s; }

  /* Large visualizer bars */
  .visualizer-bar {
    width: 4px;
    background: linear-gradient(to top, #f59e0b, #fbbf24);
    border-radius: 2px;
    transition: height 0.1s ease;
  }

  /* Track select styling */
  #music-track-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%239ca3af'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 1rem;
    padding-right: 2.5rem;
  }

  #music-track-select optgroup {
    background: #1e293b;
    color: #f59e0b;
    font-weight: 600;
  }

  #music-track-select option {
    background: #0f172a;
    color: white;
    padding: 0.5rem;
  }

  /* Active states */
  #music-loop.active,
  #music-shuffle.active {
    color: #f59e0b;
    background: rgba(245, 158, 11, 0.1);
  }

  /* Player reveal animation */
  #music-player.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Responsive positioning */
  @media (max-width: 640px) {
    #music-player {
      left: 4px;
      bottom: 4px;
    }
    #music-panel {
      width: calc(100vw - 32px);
      max-width: 320px;
    }
    #music-welcome {
      left: 0;
      bottom: 72px;
      right: 4px;
    }
    #music-welcome > div {
      min-width: auto;
    }
    #music-welcome .absolute.-left-2 {
      display: none;
    }
  }

  /* Welcome notification animations */
  #music-welcome.show {
    opacity: 1;
  }

  @keyframes welcome-glow {
    0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.2); }
    50% { box-shadow: 0 0 40px rgba(245, 158, 11, 0.4); }
  }

  #music-welcome.show > div {
    animation: welcome-glow 2s ease-in-out infinite;
  }

  /* Scanning line effect for high-tech feel */
  @keyframes scan {
    0% { transform: translateY(-100%); }
    100% { transform: translateY(100%); }
  }

  #music-welcome::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 100%;
    background: linear-gradient(transparent 0%, rgba(245, 158, 11, 0.1) 50%, transparent 100%);
    animation: scan 2s linear infinite;
    pointer-events: none;
    border-radius: 0.75rem;
    overflow: hidden;
  }
</style>

<script>
(function() {
  'use strict';

  // ===== TRACK LIBRARY =====
  // Using Pixabay royalty-free music (no attribution required)
  const TRACKS = {
    'classical-peaceful': {
      url: 'https://cdn.pixabay.com/audio/2024/11/29/audio_5e3b57e542.mp3',
      name: 'Peaceful Piano',
      artist: 'Ambient'
    },
    'classical-dramatic': {
      url: 'https://cdn.pixabay.com/audio/2024/02/14/audio_66b07c6067.mp3',
      name: 'Epic Orchestra',
      artist: 'Cinematic'
    },
    'classical-baroque': {
      url: 'https://cdn.pixabay.com/audio/2023/10/30/audio_67e7878301.mp3',
      name: 'Baroque Elegance',
      artist: 'Classical'
    },
    'electronic-ambient': {
      url: 'https://cdn.pixabay.com/audio/2024/09/10/audio_6e5d7d1912.mp3',
      name: 'Deep Focus',
      artist: 'Electronic'
    },
    'electronic-chill': {
      url: 'https://cdn.pixabay.com/audio/2023/07/30/audio_e7aa9b04bc.mp3',
      name: 'Chill Waves',
      artist: 'Lo-Fi'
    },
    'electronic-dark': {
      url: 'https://cdn.pixabay.com/audio/2023/03/19/audio_c0f61e5d55.mp3',
      name: 'Dark Synthwave',
      artist: 'Synthwave'
    },
    'acoustic-guitar': {
      url: 'https://cdn.pixabay.com/audio/2024/04/02/audio_4285a9eb0a.mp3',
      name: 'Acoustic Dreams',
      artist: 'Acoustic'
    },
    'acoustic-jazz': {
      url: 'https://cdn.pixabay.com/audio/2024/09/03/audio_7389f45632.mp3',
      name: 'Smooth Jazz',
      artist: 'Jazz'
    },
    'cinematic-tension': {
      url: 'https://cdn.pixabay.com/audio/2023/09/21/audio_8e19b90d3c.mp3',
      name: 'Building Tension',
      artist: 'Cinematic'
    },
    'cinematic-inspiring': {
      url: 'https://cdn.pixabay.com/audio/2023/10/11/audio_7f65edc3a0.mp3',
      name: 'Inspiring Journey',
      artist: 'Cinematic'
    }
  };

  // ===== STATE =====
  let audio = null;
  let isPlaying = false;
  let isLooping = false;
  let isShuffling = false;
  let currentTrackId = null;
  let volume = 0.7;
  let analyser = null;
  let audioContext = null;
  let animationId = null;

  // ===== CROSS-PAGE PERSISTENCE =====
  function savePlaybackState() {
    const state = {
      trackId: currentTrackId,
      isPlaying: isPlaying,
      currentTime: audio ? audio.currentTime : 0,
      timestamp: Date.now()
    };
    localStorage.setItem('musicPlaybackState', JSON.stringify(state));
  }

  function getPlaybackState() {
    try {
      const state = JSON.parse(localStorage.getItem('musicPlaybackState'));
      // Only restore if saved within last 30 seconds (page navigation)
      if (state && (Date.now() - state.timestamp) < 30000) {
        return state;
      }
    } catch (e) {}
    return null;
  }

  function clearPlaybackState() {
    localStorage.removeItem('musicPlaybackState');
  }

  // ===== DOM ELEMENTS =====
  const player = document.getElementById('music-player');
  if (!player) return; // Exit if player element not found

  const panel = document.getElementById('music-panel');
  const toggleBtn = document.getElementById('music-toggle');
  const playBtn = document.getElementById('music-play-btn');
  const playIcon = document.getElementById('music-play-icon');
  const pauseIcon = document.getElementById('music-pause-icon');
  const trackSelect = document.getElementById('music-track-select');
  const trackName = document.getElementById('music-track-name');
  const trackArtist = document.getElementById('music-track-artist');
  const progressBar = document.getElementById('music-progress-bar');
  const progressHandle = document.getElementById('music-progress-handle');
  const progressContainer = document.getElementById('music-progress-container');
  const currentTimeEl = document.getElementById('music-current-time');
  const durationEl = document.getElementById('music-duration');
  const volumeBar = document.getElementById('music-volume-bar');
  const volumeHandle = document.getElementById('music-volume-handle');
  const volumeContainer = document.getElementById('music-volume-container');
  const volumeValue = document.getElementById('music-volume-value');
  const muteBtn = document.getElementById('music-mute');
  const volumeIcon = document.getElementById('music-volume-icon');
  const muteIcon = document.getElementById('music-mute-icon');
  const loopBtn = document.getElementById('music-loop');
  const shuffleBtn = document.getElementById('music-shuffle');
  const prevBtn = document.getElementById('music-prev');
  const nextBtn = document.getElementById('music-next');
  const visualizer = document.getElementById('music-visualizer');
  const pulse = document.getElementById('music-pulse');
  const noteIcon = document.getElementById('music-note-icon');
  const eqMini = document.getElementById('music-eq-mini');
  const welcomeEl = document.getElementById('music-welcome');
  const welcomePlayBtn = document.getElementById('music-welcome-play');
  const welcomeDismissBtn = document.getElementById('music-welcome-dismiss');
  const musicBadge = document.getElementById('music-badge');

  // ===== WELCOME NOTIFICATION =====
  function showWelcome() {
    const hasSeenWelcome = localStorage.getItem('musicWelcomeSeen');
    if (hasSeenWelcome) return;

    // Show badge on button
    if (musicBadge) musicBadge.classList.remove('hidden');

    // Show welcome tooltip after a delay
    setTimeout(() => {
      if (welcomeEl && !isPlaying) {
        welcomeEl.classList.remove('hidden');
        setTimeout(() => welcomeEl.classList.add('show'), 50);
      }
    }, 3000);
  }

  function hideWelcome(permanent = false) {
    if (welcomeEl) {
      welcomeEl.classList.remove('show');
      setTimeout(() => welcomeEl.classList.add('hidden'), 500);
    }
    if (musicBadge) musicBadge.classList.add('hidden');
    if (permanent) {
      localStorage.setItem('musicWelcomeSeen', 'true');
    }
  }

  // ===== INITIALIZATION =====
  function init() {
    // Check for page-specific music setting
    const pageMusicMeta = document.querySelector('meta[name="ambient:music"]');
    const pageMusicTrack = pageMusicMeta ? pageMusicMeta.content : null;

    // Restore preferences
    const savedVolume = localStorage.getItem('musicVolume');
    const savedTrack = localStorage.getItem('musicTrack');
    const savedLoop = localStorage.getItem('musicLoop');

    if (savedVolume) {
      volume = parseFloat(savedVolume);
      updateVolumeUI();
    }

    if (savedLoop === 'true') {
      isLooping = true;
      loopBtn.classList.add('active');
    }

    // Set initial track (page preference > saved > none)
    if (pageMusicTrack && TRACKS[pageMusicTrack]) {
      trackSelect.value = pageMusicTrack;
    } else if (savedTrack && TRACKS[savedTrack]) {
      trackSelect.value = savedTrack;
    }

    // Create visualizer bars
    createVisualizerBars();

    // Check for cross-page playback restoration
    const playbackState = getPlaybackState();
    if (playbackState && playbackState.isPlaying && playbackState.trackId && TRACKS[playbackState.trackId]) {
      // Restore playback from previous page
      trackSelect.value = playbackState.trackId;
      loadTrack(playbackState.trackId);

      // Wait for audio to load, then seek and play
      if (audio) {
        audio.addEventListener('loadedmetadata', function onLoad() {
          audio.removeEventListener('loadedmetadata', onLoad);
          if (playbackState.currentTime > 0 && playbackState.currentTime < audio.duration) {
            audio.currentTime = playbackState.currentTime;
          }
          play();
          clearPlaybackState();
        }, { once: true });
      }
    }

    // Show player with animation
    setTimeout(() => {
      player.classList.add('visible');
      // Show welcome notification for new visitors (only if not auto-resuming)
      if (!playbackState || !playbackState.isPlaying) {
        showWelcome();
      }
    }, 1000);

    // Bind events
    bindEvents();

    // Save state before leaving page
    window.addEventListener('beforeunload', () => {
      if (isPlaying && currentTrackId) {
        savePlaybackState();
      }
    });

    // Also save on visibility change (for mobile)
    document.addEventListener('visibilitychange', () => {
      if (document.hidden && isPlaying && currentTrackId) {
        savePlaybackState();
      }
    });
  }

  // ===== VISUALIZER =====
  function createVisualizerBars() {
    visualizer.innerHTML = '';
    for (let i = 0; i < 32; i++) {
      const bar = document.createElement('div');
      bar.className = 'visualizer-bar';
      bar.style.height = '4px';
      visualizer.appendChild(bar);
    }
  }

  function setupAudioAnalyser() {
    if (!audio || audioContext) return;

    try {
      audioContext = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioContext.createAnalyser();
      const source = audioContext.createMediaElementSource(audio);
      source.connect(analyser);
      analyser.connect(audioContext.destination);
      analyser.fftSize = 64;
    } catch (e) {
      console.log('Audio analyser not supported');
    }
  }

  function animateVisualizer() {
    if (!analyser || !isPlaying) {
      cancelAnimationFrame(animationId);
      return;
    }

    const bars = visualizer.querySelectorAll('.visualizer-bar');
    const dataArray = new Uint8Array(analyser.frequencyBinCount);
    analyser.getByteFrequencyData(dataArray);

    bars.forEach((bar, i) => {
      const value = dataArray[i] || 0;
      const height = Math.max(4, (value / 255) * 60);
      bar.style.height = `${height}px`;
    });

    animationId = requestAnimationFrame(animateVisualizer);
  }

  // ===== AUDIO CONTROLS =====
  function loadTrack(trackId) {
    if (!trackId || !TRACKS[trackId]) return;

    const track = TRACKS[trackId];
    currentTrackId = trackId;

    if (audio) {
      audio.pause();
      audio.src = '';
    }

    audio = new Audio(track.url);
    audio.volume = volume;
    audio.loop = isLooping;
    audio.crossOrigin = 'anonymous';

    // Update UI
    trackName.textContent = track.name;
    trackArtist.textContent = track.artist;

    // Audio events
    audio.addEventListener('loadedmetadata', () => {
      durationEl.textContent = formatTime(audio.duration);
    });

    audio.addEventListener('timeupdate', updateProgress);
    audio.addEventListener('ended', handleTrackEnd);
    audio.addEventListener('play', () => {
      setupAudioAnalyser();
      animateVisualizer();
    });

    // Save preference
    localStorage.setItem('musicTrack', trackId);
  }

  function play() {
    if (!audio && trackSelect.value) {
      loadTrack(trackSelect.value);
    }

    if (!audio) return;

    // Resume audio context if suspended
    if (audioContext && audioContext.state === 'suspended') {
      audioContext.resume();
    }

    audio.play().then(() => {
      isPlaying = true;
      updatePlayButton();
      animateVisualizer();
    }).catch(e => {
      console.log('Playback prevented:', e.message);
    });
  }

  function pause() {
    if (!audio) return;
    audio.pause();
    isPlaying = false;
    updatePlayButton();
  }

  function togglePlay() {
    if (isPlaying) {
      pause();
    } else {
      play();
    }
  }

  function handleTrackEnd() {
    if (isShuffling) {
      playRandomTrack();
    } else if (!isLooping) {
      playNextTrack();
    }
  }

  function playNextTrack() {
    const options = Array.from(trackSelect.options).filter(o => o.value);
    const currentIndex = options.findIndex(o => o.value === currentTrackId);
    const nextIndex = (currentIndex + 1) % options.length;

    trackSelect.value = options[nextIndex].value;
    loadTrack(options[nextIndex].value);
    play();
  }

  function playPrevTrack() {
    const options = Array.from(trackSelect.options).filter(o => o.value);
    const currentIndex = options.findIndex(o => o.value === currentTrackId);
    const prevIndex = (currentIndex - 1 + options.length) % options.length;

    trackSelect.value = options[prevIndex].value;
    loadTrack(options[prevIndex].value);
    play();
  }

  function playRandomTrack() {
    const options = Array.from(trackSelect.options).filter(o => o.value && o.value !== currentTrackId);
    if (options.length === 0) return;

    const randomOption = options[Math.floor(Math.random() * options.length)];
    trackSelect.value = randomOption.value;
    loadTrack(randomOption.value);
    play();
  }

  // ===== UI UPDATES =====
  function updatePlayButton() {
    if (isPlaying) {
      playIcon.classList.add('hidden');
      pauseIcon.classList.remove('hidden');
      pulse.classList.remove('hidden');
      noteIcon.classList.add('hidden');
      eqMini.classList.remove('hidden');
    } else {
      playIcon.classList.remove('hidden');
      pauseIcon.classList.add('hidden');
      pulse.classList.add('hidden');
      noteIcon.classList.remove('hidden');
      eqMini.classList.add('hidden');
    }
  }

  function updateProgress() {
    if (!audio) return;

    const percent = (audio.currentTime / audio.duration) * 100 || 0;
    progressBar.style.width = `${percent}%`;
    progressHandle.style.left = `${percent}%`;
    currentTimeEl.textContent = formatTime(audio.currentTime);
  }

  function updateVolumeUI() {
    const percent = volume * 100;
    volumeBar.style.width = `${percent}%`;
    volumeHandle.style.left = `${percent}%`;
    volumeValue.textContent = `${Math.round(percent)}%`;

    if (volume === 0) {
      volumeIcon.classList.add('hidden');
      muteIcon.classList.remove('hidden');
    } else {
      volumeIcon.classList.remove('hidden');
      muteIcon.classList.add('hidden');
    }
  }

  function formatTime(seconds) {
    if (isNaN(seconds)) return '0:00';
    const mins = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  }

  // ===== EVENT HANDLERS =====
  function bindEvents() {
    // Toggle panel
    if (toggleBtn && panel) {
      toggleBtn.addEventListener('click', () => {
        panel.classList.toggle('hidden');
        hideWelcome(true); // Hide welcome when user interacts
      });
    }

    // Welcome notification buttons
    if (welcomePlayBtn) {
      welcomePlayBtn.addEventListener('click', () => {
        hideWelcome(true);
        if (panel) panel.classList.remove('hidden');
        // Auto-play the page's recommended track or first available
        const pageMusicMeta = document.querySelector('meta[name="ambient:music"]');
        const trackId = pageMusicMeta ? pageMusicMeta.content : (trackSelect ? trackSelect.value : null) || 'electronic-ambient';
        if (trackId && TRACKS[trackId]) {
          if (trackSelect) trackSelect.value = trackId;
          loadTrack(trackId);
          play();
        }
      });
    }

    if (welcomeDismissBtn) {
      welcomeDismissBtn.addEventListener('click', () => {
        hideWelcome(true);
      });
    }

    // Play/Pause
    if (playBtn) playBtn.addEventListener('click', togglePlay);

    // Track selection
    if (trackSelect) {
      trackSelect.addEventListener('change', (e) => {
        if (e.target.value) {
          loadTrack(e.target.value);
          play();
        }
      });
    }

    // Previous/Next
    if (prevBtn) prevBtn.addEventListener('click', playPrevTrack);
    if (nextBtn) nextBtn.addEventListener('click', playNextTrack);

    // Loop toggle
    if (loopBtn) {
      loopBtn.addEventListener('click', () => {
        isLooping = !isLooping;
        loopBtn.classList.toggle('active', isLooping);
        if (audio) audio.loop = isLooping;
        localStorage.setItem('musicLoop', isLooping);
      });
    }

    // Shuffle toggle
    if (shuffleBtn) {
      shuffleBtn.addEventListener('click', () => {
        isShuffling = !isShuffling;
        shuffleBtn.classList.toggle('active', isShuffling);
      });
    }

    // Progress seeking
    if (progressContainer) {
      progressContainer.addEventListener('click', (e) => {
        if (!audio) return;
        const rect = progressContainer.getBoundingClientRect();
        const percent = (e.clientX - rect.left) / rect.width;
        audio.currentTime = percent * audio.duration;
      });
    }

    // Volume control
    if (volumeContainer) {
      volumeContainer.addEventListener('click', (e) => {
        const rect = volumeContainer.getBoundingClientRect();
        volume = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
        if (audio) audio.volume = volume;
        updateVolumeUI();
        localStorage.setItem('musicVolume', volume);
      });
    }

    // Mute toggle
    let savedVolume = volume;
    if (muteBtn) {
      muteBtn.addEventListener('click', () => {
        if (volume > 0) {
          savedVolume = volume;
          volume = 0;
        } else {
          volume = savedVolume || 0.7;
        }
        if (audio) audio.volume = volume;
        updateVolumeUI();
      });
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      // Only handle if panel is open and no input is focused
      if (!panel || panel.classList.contains('hidden')) return;
      if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') return;

      if (e.code === 'Space' && e.target === document.body) {
        e.preventDefault();
        togglePlay();
      }
    });

    // Close panel when clicking outside
    document.addEventListener('click', (e) => {
      if (!player.contains(e.target) && !panel.classList.contains('hidden')) {
        panel.classList.add('hidden');
      }
    });
  }

  // ===== INIT =====
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

})();
</script>

<!-- /MUSIC_PLAYER -->

<!-- COOKIE_CONSENT -->
<!-- Cookie Consent Banner -->
<div id="cookie-consent" class="fixed bottom-0 left-0 right-0 z-[100] transform translate-y-full transition-transform duration-500" role="dialog" aria-labelledby="cookie-consent-title" aria-describedby="cookie-consent-description">
  <div class="bg-navy-900/98 backdrop-blur-lg border-t border-white/10 shadow-2xl">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
        <div class="flex-1">
          <h3 id="cookie-consent-title" class="text-white font-semibold text-lg mb-2">We value your privacy</h3>
          <p id="cookie-consent-description" class="text-gray-400 text-sm leading-relaxed">
            We use cookies to enhance your browsing experience, analyze site traffic, and personalize content.
            By clicking "Accept All", you consent to our use of cookies. You can manage your preferences anytime.
          </p>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 lg:ml-8">
          <button id="cookie-customize" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Customize
          </button>
          <button id="cookie-reject" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Reject All
          </button>
          <button id="cookie-accept" class="px-6 py-2.5 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full text-sm font-semibold transition transform hover:scale-105">
            Accept All
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Cookie Settings Modal -->
<div id="cookie-modal" class="fixed inset-0 z-[110] hidden" role="dialog" aria-modal="true" aria-labelledby="cookie-modal-title">
  <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" id="cookie-modal-backdrop"></div>
  <div class="fixed inset-0 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      <div class="bg-navy-800 rounded-2xl shadow-2xl max-w-lg w-full border border-white/10 transform transition-all">
        <div class="p-6 border-b border-white/10">
          <div class="flex items-center justify-between">
            <h3 id="cookie-modal-title" class="text-xl font-bold text-white">Cookie Preferences</h3>
            <button id="cookie-modal-close" class="text-gray-400 hover:text-white transition" aria-label="Close modal">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <p class="text-gray-400 text-sm mt-2">Manage your cookie preferences below. Essential cookies are always active as they're necessary for the site to function.</p>
        </div>

        <div class="p-6 space-y-4">
          <!-- Essential Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <h4 class="text-white font-semibold">Essential Cookies</h4>
              <p class="text-gray-400 text-sm mt-1">Required for basic site functionality like navigation and secure access. Cannot be disabled.</p>
            </div>
            <div class="relative">
              <input type="checkbox" id="cookie-essential" checked disabled class="sr-only">
              <div class="w-11 h-6 bg-gold-500 rounded-full opacity-50 cursor-not-allowed">
                <div class="absolute top-0.5 left-5 w-5 h-5 bg-white rounded-full shadow"></div>
              </div>
            </div>
          </div>

          <!-- Analytics Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <label for="cookie-analytics" class="text-white font-semibold cursor-pointer">Analytics Cookies</label>
              <p class="text-gray-400 text-sm mt-1">Help us understand how visitors interact with our site. We use Google Analytics and Microsoft Clarity.</p>
            </div>
            <label for="cookie-analytics" class="relative cursor-pointer">
              <input type="checkbox" id="cookie-analytics" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-600 peer-checked:bg-gold-500 rounded-full transition-colors"></div>
              <div class="absolute top-0.5 left-0.5 peer-checked:left-5 w-5 h-5 bg-white rounded-full shadow transition-all"></div>
            </label>
          </div>

          <!-- Marketing Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <label for="cookie-marketing" class="text-white font-semibold cursor-pointer">Marketing Cookies</label>
              <p class="text-gray-400 text-sm mt-1">Used to track visitors across websites to display relevant ads and measure campaign effectiveness.</p>
            </div>
            <label for="cookie-marketing" class="relative cursor-pointer">
              <input type="checkbox" id="cookie-marketing" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-600 peer-checked:bg-gold-500 rounded-full transition-colors"></div>
              <div class="absolute top-0.5 left-0.5 peer-checked:left-5 w-5 h-5 bg-white rounded-full shadow transition-all"></div>
            </label>
          </div>
        </div>

        <div class="p-6 border-t border-white/10 flex justify-end gap-3">
          <button id="cookie-modal-reject" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Reject All
          </button>
          <button id="cookie-modal-save" class="px-6 py-2.5 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full text-sm font-semibold transition">
            Save Preferences
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /COOKIE_CONSENT -->

<!-- SHARED_SCRIPTS -->
<script>
// ===== COOKIE UTILITIES =====
function getCookie(name) {
  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
  return match ? match[2] : null;
}

function setCookie(name, value, days) {
  const expires = new Date(Date.now() + days * 864e5).toUTCString();
  document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/; SameSite=Lax';
}

function deleteCookie(name) {
  document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
}

// ===== COOKIE CONSENT MANAGEMENT =====
const CookieConsent = {
  CONSENT_COOKIE: 'cookieConsent',
  CONSENT_VERSION: '1.0',

  getConsent() {
    const consent = getCookie(this.CONSENT_COOKIE);
    if (!consent) return null;
    try {
      return JSON.parse(decodeURIComponent(consent));
    } catch (e) {
      return null;
    }
  },

  setConsent(preferences) {
    const consent = {
      version: this.CONSENT_VERSION,
      timestamp: new Date().toISOString(),
      essential: true, // Always true
      analytics: preferences.analytics || false,
      marketing: preferences.marketing || false
    };
    setCookie(this.CONSENT_COOKIE, JSON.stringify(consent), 365);
    return consent;
  },

  hasConsent() {
    return this.getConsent() !== null;
  },

  hasAnalyticsConsent() {
    const consent = this.getConsent();
    return consent && consent.analytics === true;
  },

  hasMarketingConsent() {
    const consent = this.getConsent();
    return consent && consent.marketing === true;
  },

  showBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.remove('translate-y-full');
    }
  },

  hideBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.add('translate-y-full');
    }
  },

  showModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      // Set checkboxes to current preferences
      const consent = this.getConsent() || { analytics: false, marketing: false };
      const analyticsCheckbox = document.getElementById('cookie-analytics');
      const marketingCheckbox = document.getElementById('cookie-marketing');
      if (analyticsCheckbox) analyticsCheckbox.checked = consent.analytics;
      if (marketingCheckbox) marketingCheckbox.checked = consent.marketing;
    }
  },

  hideModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
  },

  acceptAll() {
    const consent = this.setConsent({ analytics: true, marketing: true });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'accept_all' });
    }
  },

  rejectAll() {
    const consent = this.setConsent({ analytics: false, marketing: false });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
  },

  savePreferences() {
    const analyticsCheckbox = document.getElementById('cookie-analytics');
    const marketingCheckbox = document.getElementById('cookie-marketing');
    const consent = this.setConsent({
      analytics: analyticsCheckbox ? analyticsCheckbox.checked : false,
      marketing: marketingCheckbox ? marketingCheckbox.checked : false
    });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (consent.analytics && typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'custom', analytics: consent.analytics, marketing: consent.marketing });
    }
  },

  applyConsent(consent) {
    // Dispatch event for analytics.js to listen to
    window.dispatchEvent(new CustomEvent('cookieConsentUpdated', { detail: consent }));
  },

  init() {
    if (!this.hasConsent()) {
      // Show banner after a short delay for better UX
      setTimeout(() => this.showBanner(), 1000);
    } else {
      // Apply existing consent
      this.applyConsent(this.getConsent());
    }
  }
};

// ===== MOBILE MENU =====
function initMobileMenu() {
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const closeMenuBtn = document.getElementById('close-menu');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOverlay = document.getElementById('menu-overlay');

  if (!mobileMenuBtn || !mobileMenu) return;

  function openMobileMenu() {
    mobileMenu.classList.add('open');
    if (menuOverlay) menuOverlay.classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeMobileMenu() {
    mobileMenu.classList.remove('open');
    if (menuOverlay) menuOverlay.classList.remove('open');
    document.body.style.overflow = '';
  }

  mobileMenuBtn.addEventListener('click', openMobileMenu);
  if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMobileMenu);
  if (menuOverlay) menuOverlay.addEventListener('click', closeMobileMenu);

  // Close menu when clicking a link
  mobileMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', closeMobileMenu);
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {
      closeMobileMenu();
    }
  });
}

// ===== DARK MODE TOGGLE =====
function initDarkMode() {
  const darkModeToggle = document.getElementById('dark-mode-toggle');
  const darkModeToggleMobile = document.getElementById('dark-mode-toggle-mobile');

  // Prevent duplicate initialization
  if (window._darkModeInitialized) return;
  window._darkModeInitialized = true;

  function toggleDarkMode() {
    document.documentElement.classList.toggle('dark');
    const isDark = document.documentElement.classList.contains('dark');
    setCookie('darkMode', isDark, 365);
  }

  if (darkModeToggle) darkModeToggle.addEventListener('click', toggleDarkMode);
  if (darkModeToggleMobile) darkModeToggleMobile.addEventListener('click', toggleDarkMode);
}

// ===== BACK TO TOP =====
function initBackToTop() {
  const backToTop = document.getElementById('back-to-top');
  if (!backToTop) return;

  function updateBackToTop() {
    if (window.scrollY > 500) {
      backToTop.classList.add('visible');
    } else {
      backToTop.classList.remove('visible');
    }
  }

  backToTop.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  window.addEventListener('scroll', updateBackToTop);
}

// ===== SCROLL REVEAL =====
function initScrollReveal() {
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

  document.querySelectorAll('.reveal, .card-hover, .stagger-children').forEach(el => {
    revealObserver.observe(el);
  });
}

// ===== SMOOTH SCROLL =====
function initSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (href !== '#') {
        e.preventDefault();
        const target = document.querySelector(href);
        if (target) {
          const headerOffset = 80;
          const elementPosition = target.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.scrollY - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      }
    });
  });
}

// ===== COOKIE CONSENT EVENT LISTENERS =====
function initCookieConsentListeners() {
  // Banner buttons
  const acceptBtn = document.getElementById('cookie-accept');
  const rejectBtn = document.getElementById('cookie-reject');
  const customizeBtn = document.getElementById('cookie-customize');

  if (acceptBtn) acceptBtn.addEventListener('click', () => CookieConsent.acceptAll());
  if (rejectBtn) rejectBtn.addEventListener('click', () => CookieConsent.rejectAll());
  if (customizeBtn) customizeBtn.addEventListener('click', () => {
    CookieConsent.hideBanner();
    CookieConsent.showModal();
  });

  // Modal buttons
  const modalClose = document.getElementById('cookie-modal-close');
  const modalBackdrop = document.getElementById('cookie-modal-backdrop');
  const modalReject = document.getElementById('cookie-modal-reject');
  const modalSave = document.getElementById('cookie-modal-save');

  if (modalClose) modalClose.addEventListener('click', () => CookieConsent.hideModal());
  if (modalBackdrop) modalBackdrop.addEventListener('click', () => CookieConsent.hideModal());
  if (modalReject) modalReject.addEventListener('click', () => CookieConsent.rejectAll());
  if (modalSave) modalSave.addEventListener('click', () => CookieConsent.savePreferences());

  // Footer cookie settings button
  const cookieSettingsBtn = document.getElementById('cookie-settings-btn');
  if (cookieSettingsBtn) cookieSettingsBtn.addEventListener('click', () => CookieConsent.showModal());

  // Note: Cookie toggles are now wrapped in <label> elements, so native browser behavior handles the toggle.
  // No additional JavaScript handlers needed for the toggle switches.
}

// ===== INITIALIZE ALL =====
function initAll() {
  initMobileMenu();
  initDarkMode();
  initBackToTop();
  initScrollReveal();
  initSmoothScroll();
  initCookieConsentListeners();
  CookieConsent.init();
}

// Handle both fresh page load and cases where DOM is already ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initAll);
} else {
  // DOM is already ready, initialize immediately
  initAll();
}

// Expose CookieConsent for external use
window.CookieConsent = CookieConsent;
</script>

<!-- /SHARED_SCRIPTS -->
</body>
</html>
