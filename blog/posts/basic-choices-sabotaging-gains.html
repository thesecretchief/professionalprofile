<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Basic Choices Are Sabotaging Your Gains | Lee Foropoulos</title>
  <meta name="description" content="The grocery store is a minefield of fake health foods. Learn why steel-cut oats beat instant, plain yogurt destroys flavored cups, and how to spot the imposters.">
  <meta name="ambient:music" content="morning-clarity">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Your Basic Choices Are Sabotaging Your Gains">
  <meta property="og:description" content="The grocery aisle is a minefield. Here's how to spot real food vs processed imposters.">
  <meta property="og:url" content="https://foropoulosnow.com/blog/posts/basic-choices-sabotaging-gains.html">
  <meta property="og:image" content="https://res.cloudinary.com/foropoulosnow/image/fetch/w_1200,h_630,c_fill,q_auto,f_auto/https%3A%2F%2Fimages.unsplash.com%2Fphoto-1556909114-44e3e70034e2">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="article:author" content="Lee Foropoulos">
  <meta property="article:published_time" content="2026-02-03">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@thesecretchief">
  <meta name="twitter:creator" content="@thesecretchief">
  <meta name="twitter:title" content="Your Basic Choices Are Sabotaging Your Gains">
  <meta name="twitter:description" content="The grocery aisle is a minefield. Here's how to spot real food vs processed imposters.">
  <meta name="twitter:image" content="https://res.cloudinary.com/foropoulosnow/image/fetch/w_1200,h_630,c_fill,q_auto,f_auto/https%3A%2F%2Fimages.unsplash.com%2Fphoto-1556909114-44e3e70034e2">
  <meta name="twitter:image:alt" content="Your Basic Choices Are Sabotaging Your Gains">
  <meta name="share:hook" content="I found 4 real options and a whole aisle of lies at the grocery store today. Here's how your 'healthy' oatmeal, yogurt, and bread choices are probably working against you:">
  <meta name="facebook-domain-verification" content="vx40czm6ccxtpl4crzqbiso70hmjoi" />

  <link rel="icon" type="image/svg+xml" href="../../favicon.svg">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            navy: { 900: '#0f172a', 800: '#1e293b', 700: '#334155', 600: '#475569' },
            gold: { 700: '#b45309', 600: '#d97706', 500: '#f59e0b', 400: '#fbbf24', 300: '#fcd34d', 200: '#fde68a', 100: '#fef3c7' }
          },
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
        }
      }
    }
  </script>
  <script>
    function getCookie(name) {
      const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
      return match ? match[2] : null;
    }
    const darkPref = getCookie('darkMode');
    if (darkPref === 'true' || (!darkPref && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }
  </script>
  <style>
    .gradient-text { background: linear-gradient(135deg, #f59e0b, #fbbf24); -webkit-background-clip: text; background-clip: text; color: transparent; }
    .prose h2 { font-size: 1.75rem; font-weight: 700; margin-top: 2.5rem; margin-bottom: 1rem; }
    .prose h3 { font-size: 1.25rem; font-weight: 600; margin-top: 2rem; margin-bottom: 0.75rem; }
    .prose p { margin-bottom: 1.25rem; line-height: 1.8; }
    .prose blockquote { border-left: 4px solid #f59e0b; padding-left: 1.5rem; margin: 2rem 0; font-style: italic; background: linear-gradient(90deg, rgba(251,191,36,0.1), transparent); padding: 1.5rem; border-radius: 0 0.75rem 0.75rem 0; }
    .prose ul, .prose ol { margin-bottom: 1.25rem; padding-left: 1.5rem; }
    .prose li { margin-bottom: 0.5rem; line-height: 1.7; }
    .prose a { color: #f59e0b; text-decoration: none; }
    .prose a:hover { text-decoration: underline; }
    .content-image { border-radius: 0.75rem; margin: 2rem 0; box-shadow: 0 10px 40px rgba(0,0,0,0.15); }
    #back-to-top { opacity: 0; visibility: hidden; transition: all 0.3s ease; }
    #back-to-top.visible { opacity: 1; visibility: visible; }
  </style>
  <script src="/analytics.js" defer></script>
</head>
<body class="bg-white dark:bg-navy-900 min-h-screen">

  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-navy-900/95 backdrop-blur-md border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a href="../../" class="text-white font-bold text-xl">Foropoulos<span class="text-gold-400">Now</span></a>
        <div class="flex items-center gap-4">
          <a href="../" class="text-gray-300 hover:text-gold-400 transition text-sm">Blog</a>
          <button id="dark-mode-toggle" class="text-gray-300 hover:text-gold-400 p-2 rounded-lg hover:bg-white/10 transition" aria-label="Toggle dark mode">
            <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
            <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero Image -->
  <div class="relative h-64 sm:h-80 lg:h-96 overflow-hidden">
    <img
      src="https://images.unsplash.com/photo-1556909114-44e3e70034e2?w=1600&h=900&fit=crop"
      alt="Grocery store aisle with healthy food options"
      class="w-full h-full object-cover"
    >
    <div class="absolute inset-0 bg-gradient-to-t from-amber-700 via-amber-700/70 to-transparent"></div>
  </div>

  <!-- Article Header -->
  <header class="bg-gradient-to-br from-amber-700 via-orange-600 to-navy-900 -mt-32 relative z-10 pt-8 pb-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center gap-3 mb-6">
        <span class="bg-white/20 text-white text-xs font-semibold px-3 py-1 rounded-full">Nutrition</span>
        <span class="bg-white/20 text-white text-xs font-semibold px-3 py-1 rounded-full">Fitness</span>
        <span class="text-amber-100 text-sm">Feb 3, 2026</span>
      </div>
      <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-6 leading-tight">
        Your Basic Choices Are Sabotaging Your Gains
      </h1>
      <p class="text-xl text-amber-100 mb-8">
        I walked into the store looking for real oatmeal. What I found was 4 legitimate options buried in an aisle of nutritional lies wearing health halos.
      </p>
      <div class="flex items-center gap-4">
        <div class="w-12 h-12 bg-gold-500 rounded-full flex items-center justify-center text-navy-900 font-bold text-lg">LF</div>
        <div>
          <p class="text-white font-semibold">Lee Foropoulos</p>
          <p class="text-amber-200 text-sm">10 min read</p>
        </div>
      </div>
      <!-- Quick Share Buttons -->
      <div class="flex items-center gap-2 mt-6">
        <span class="text-amber-200 text-sm mr-1">Share:</span>
        <button onclick="shareOnTwitter()" class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition" aria-label="Share on X">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
        </button>
        <button onclick="shareOnLinkedIn()" class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition" aria-label="Share on LinkedIn">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
        </button>
        <button onclick="shareOnFacebook()" class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition" aria-label="Share on Facebook">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
        </button>
        <button onclick="copyLink()" class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition" aria-label="Copy Link">
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Article Content -->
  <article class="py-16 bg-white dark:bg-navy-900">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="prose dark:prose-invert text-gray-700 dark:text-gray-300">

        <p class="text-xl leading-relaxed">
          There I was, standing in the oatmeal aisle at 10 AM, looking for something that should be simple: whole grain oats. Big, fluffy, fiber-loaded steel cut oats. The kind that make instant oatmeal look like flavored sand. The kind proven to actually change your cholesterol profile. What I found instead was a masterclass in food industry deception.
        </p>

        <p>
          Four legitimate options. Maybe five if I'm being generous. The rest? An entire section of the aisle dedicated to what I can only describe as candy bars cosplaying as breakfast food.
        </p>

        <p>
          This isn't just about oatmeal. This pattern repeats across the entire store. Yogurt. Bread. Granola bars. The "health food" sections are often the most dangerous places for someone actually trying to eat well. Let me break down the science of why your basic choices might be working against you, and how to spot the imposters.
        </p>

        <h2 class="text-navy-900 dark:text-white">The Oatmeal Deception: Steel Cut vs. Instant</h2>

        <p>
          Let me paint the picture. Steel cut oats look like little grain nuggets. They take 10 to 20 minutes to cook. They have a chewy, nutty texture that actually feels like food. Quick oats look like paper thin flakes that dissolve in hot water. They cook in 90 seconds because they've already been processed to oblivion.
        </p>

        <p>
          "But they're both oats!" you might say. Technically, yes. But here's where the science gets interesting.
        </p>

        <figure class="my-10">
          <img src="https://images.unsplash.com/photo-1517673400267-0251440c45dc?w=800&h=450&fit=crop" alt="Bowl of steel cut oats with fresh fruit" class="content-image w-full">
          <figcaption class="text-center text-sm text-gray-500 dark:text-gray-400 mt-3">Real oats: substantial, satisfying, and worth the wait</figcaption>
        </figure>

        <h3 class="text-navy-900 dark:text-white">The Glycemic Index Problem</h3>

        <p>
          A study published in the <em>Journal of the American College of Nutrition</em> measured the glycemic response to different oat preparations and found significant differences (Granfeldt et al., 2000). Steel cut oats have a glycemic index around 42 to 50. Instant oatmeal? Closer to 79 to 83. That's a massive difference.
        </p>

        <p>
          Why does this matter? When you eat something with a high glycemic index, your blood sugar spikes rapidly. Your pancreas dumps insulin to deal with it. Then you crash. Then you're hungry again an hour later, reaching for a snack. It's a hormonal rollercoaster that makes sustaining energy and managing appetite nearly impossible.
        </p>

        <p>
          Steel cut oats release glucose slowly and steadily. You stay full longer. Your energy stays stable. Your insulin response is measured rather than panicked. This isn't just theory. A 2015 study in <em>Nutrients</em> found that intact whole grains produced significantly lower postprandial glucose responses compared to processed versions of the same grains (Åberg et al., 2015).
        </p>

        <h3 class="text-navy-900 dark:text-white">The Fiber Factor</h3>

        <p>
          Here's where it gets even better. Steel cut oats retain more of their original fiber structure, particularly the beta-glucan that makes oats special. Beta-glucan is the soluble fiber that the FDA actually allows oat manufacturers to make health claims about. It's proven to lower LDL cholesterol.
        </p>

        <p>
          A meta-analysis published in the <em>American Journal of Clinical Nutrition</em> examined 28 randomized controlled trials and found that oat beta-glucan significantly reduced both total and LDL cholesterol (Whitehead et al., 2014). But here's the catch: the fiber structure matters. When oats are processed into instant form, the physical structure of the beta-glucan matrix is disrupted, potentially affecting its cholesterol-lowering efficacy.
        </p>

        <blockquote>
          "The food industry excels at taking something healthy and processing it into something convenient but nutritionally compromised. Steel cut oats take longer to cook because they haven't been pre-digested for you."
        </blockquote>

        <h2 class="text-navy-900 dark:text-white">The Yogurt Wasteland: Real vs. Dessert in Disguise</h2>

        <p>
          Walk into any grocery store's yogurt section and you'll find what looks like variety. Strawberry! Blueberry! Key Lime Pie! Birthday Cake! Wait, what? When did breakfast become an excuse to eat cake?
        </p>

        <p>
          Here's the reality check. A container of Fage Total 0% plain Greek yogurt has about 90 calories, 18g of protein, and 4g of naturally occurring sugar from lactose. A typical flavored yogurt cup from the same general section? Often 150 to 200 calories, 5 to 7g of protein, and 20 to 25g of sugar. Some of those "light" options that seem healthier just swap sugar for artificial sweeteners and still deliver minimal protein.
        </p>

        <figure class="my-10">
          <img src="https://images.unsplash.com/photo-1488477181946-6428a0291777?w=800&h=450&fit=crop" alt="Plain Greek yogurt with fresh berries" class="content-image w-full">
          <figcaption class="text-center text-sm text-gray-500 dark:text-gray-400 mt-3">Plain Greek yogurt: a protein powerhouse disguised as boring</figcaption>
        </figure>

        <h3 class="text-navy-900 dark:text-white">The Protein Math</h3>

        <p>
          Let's do some basic math. If you're trying to hit a reasonable protein target of 0.7 to 1g per pound of bodyweight, protein density matters. Plain Greek yogurt gives you roughly 10g of protein per 100 calories. Flavored yogurt gives you about 3 to 4g per 100 calories. To get the same protein from flavored yogurt, you'd need to eat three times as many calories.
        </p>

        <p>
          A study in <em>Appetite</em> compared satiety responses to different yogurt formulations and found that high-protein Greek yogurt led to significantly greater fullness and reduced subsequent food intake compared to lower-protein alternatives (Douglas et al., 2013). More protein, more satisfaction, fewer cravings. The math works.
        </p>

        <h3 class="text-navy-900 dark:text-white">The Probiotic Question</h3>

        <p>
          "But my flavored yogurt has probiotics!" Sure, maybe. But so does the plain stuff. And the plain stuff isn't also delivering a sugar bomb that may feed the exact gut bacteria you're trying to outcompete. A study in <em>Cell</em> found that high sugar intake can shift the gut microbiome toward less favorable compositions (Sonnenburg & Bäckhed, 2016). You're essentially trying to plant flowers while pouring weed killer on the soil.
        </p>

        <div class="bg-amber-50 dark:bg-amber-500/10 rounded-xl p-6 my-8 border border-amber-200 dark:border-amber-500/30">
          <p class="font-semibold text-navy-900 dark:text-white mb-2">The Simple Solution</p>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Buy plain Greek yogurt. Add your own berries. Blueberries, raspberries, blackberries: they're antioxidant-rich and lower glycemic than most fruits. Dried berries work great too when fresh aren't available. Control your own destiny. If you need more sweetness, add a small amount of local honey. You'll still come out ahead on sugar while getting actual nutrition.</p>
        </div>

        <h2 class="text-navy-900 dark:text-white">The Honey Advantage: Why Local and Raw Matters</h2>

        <p>
          Speaking of sweeteners, let's talk about why local honey beats the processed alternatives. Not all sugars are created equal, and the source matters more than most people realize.
        </p>

        <p>
          Local raw honey contains pollen from plants in your area. Some research suggests this may help with seasonal allergies by providing a form of natural immunotherapy. A study published in the <em>International Archives of Allergy and Immunology</em> found that pre-seasonal use of birch pollen honey improved allergy symptoms compared to regular honey (Saarinen et al., 2011).
        </p>

        <p>
          Raw honey also contains enzymes, antioxidants, and antimicrobial compounds that are destroyed during commercial processing. The heating and ultra-filtering that most commercial honey undergoes strips away the beneficial compounds and essentially turns it into expensive simple sugar.
        </p>

        <figure class="my-10">
          <img src="https://images.unsplash.com/photo-1587049352846-4a222e784d38?w=800&h=450&fit=crop" alt="Local raw honey in jar" class="content-image w-full">
          <figcaption class="text-center text-sm text-gray-500 dark:text-gray-400 mt-3">Local raw honey: nature's sweetener with actual benefits</figcaption>
        </figure>

        <p>
          The glycemic index of raw honey is also lower than processed versions. A study in the <em>Journal of Medicinal Food</em> found that natural honey produced lower blood glucose responses compared to sucrose and glucose (Ahmad et al., 2008). It's still sugar, and it still counts in your daily intake. But if you're going to sweeten something, raw local honey brings more to the table than corn syrup ever could.
        </p>

        <h2 class="text-navy-900 dark:text-white">The Bread Betrayal: Whole Grain vs. Enriched Flour</h2>

        <p>
          Let me add one more aisle of deception to this tour: bread. The bread section is perhaps the worst offender when it comes to misleading health claims.
        </p>

        <p>
          You see "multigrain" and think healthy. Wrong. Multigrain just means multiple grains were used. All of them could be refined. You see "wheat bread" and assume it's whole wheat. Also wrong. It's made with wheat, sure, but the first ingredient is often "enriched wheat flour," which is just white flour with some vitamins sprayed back on.
        </p>

        <h3 class="text-navy-900 dark:text-white">The Fiber Test</h3>

        <p>
          Here's a simple test: flip the package over and look at the fiber content. Real whole grain bread should have at least 3g of fiber per slice, ideally more. Most "wheat" breads have 1g or less. That's your tell. The fiber was processed out.
        </p>

        <p>
          Why does this matter? A landmark study published in <em>The Lancet</em> analyzed data from 185 prospective studies and found a clear dose-response relationship between fiber intake and health outcomes (Reynolds et al., 2019). Higher fiber intake was associated with 15 to 30% reductions in all-cause mortality, cardiovascular-related mortality, and incidence of coronary heart disease, stroke, type 2 diabetes, and colorectal cancer.
        </p>

        <figure class="my-10">
          <img src="https://images.unsplash.com/photo-1509440159596-0249088772ff?w=800&h=450&fit=crop" alt="Whole grain bread with visible grains" class="content-image w-full">
          <figcaption class="text-center text-sm text-gray-500 dark:text-gray-400 mt-3">Real whole grain: you should be able to see the grains</figcaption>
        </figure>

        <p>
          When you eat processed white bread, you're essentially eating pre-digested starch that hits your bloodstream almost as fast as pure sugar. Your body barely has to work to break it down. You spike, you crash, you're hungry again. When you eat true whole grain bread with intact fiber structures, the digestion is slowed, the blood sugar response is moderated, and you actually feel satisfied.
        </p>

        <p>
          If you want a specific recommendation, I'm a fan of Dave's Killer Bread. Their 21 Whole Grains and Seeds variety has 5g of fiber and 5g of protein per slice. You can see the seeds. You can taste the texture. It's actual food, not fluffy air pretending to be nutrition. Most grocery stores carry it now, and the difference is night and day compared to standard "wheat" bread.
        </p>

        <h2 class="text-navy-900 dark:text-white">The Pattern Recognition Game</h2>

        <p>
          Here's what I want you to take away from this: the food industry has become incredibly skilled at making processed foods look healthy. Health halos are everywhere. "Natural," "wholesome," "made with real fruit," "good source of fiber." These phrases mean almost nothing legally and are designed to make you feel good about buying convenience products.
        </p>

        <p>
          The real foods don't need marketing. Steel cut oats don't have cartoon characters on the box. Plain Greek yogurt doesn't come in birthday cake flavor. Whole grain bread doesn't need to convince you it's healthy because you can see the intact grains with your own eyes.
        </p>

        <blockquote>
          "If a food needs to convince you it's healthy, it probably isn't. Real food doesn't need a marketing budget."
        </blockquote>

        <h2 class="text-navy-900 dark:text-white">The Practical Application</h2>

        <p>
          I know what you're thinking: "But I don't have 30 minutes to cook oatmeal every morning." Fair point. Here are some practical solutions:
        </p>

        <ul>
          <li><strong>Overnight oats:</strong> Soak steel cut oats the night before. In the morning, they cook in about 10 minutes. Better texture, same convenience.</li>
          <li><strong>Batch cooking:</strong> Make a big pot of steel cut oats on Sunday. Portion it out. Reheat throughout the week. Add some water or milk when reheating to restore texture.</li>
          <li><strong>Yogurt prep:</strong> Buy plain Greek yogurt in large containers. Portion into smaller containers with your own fruit. Cheaper and healthier than individual cups.</li>
          <li><strong>Bread education:</strong> Learn to read labels. "100% whole wheat" or "100% whole grain" on the front. Whole grain flour as the first ingredient. At least 3g fiber per slice. These are your criteria.</li>
        </ul>

        <!-- Supplement CTA -->
        <div class="bg-green-50 dark:bg-green-500/10 rounded-xl p-6 my-8 border border-green-200 dark:border-green-500/30">
          <p class="font-semibold text-navy-900 dark:text-white mb-2">Fill the Gaps in Your Nutrition</p>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Even with perfect food choices, getting optimal nutrition can be challenging. I recommend <a href="https://1stphorm.com/products/opti-greens-50/?a_aid=gotHABITS" class="text-gold-500 hover:underline">Opti-Greens 50</a> to cover your micronutrient bases, and a high-quality <a href="https://1stphorm.com/products/level-1/?a_aid=gotHABITS" class="text-gold-500 hover:underline">Level-1 protein powder</a> for convenient protein supplementation when whole food isn't practical.</p>
        </div>

        <h2 class="text-navy-900 dark:text-white">The Bottom Line</h2>

        <p>
          Your basic grocery choices matter more than most "advanced" nutrition strategies. You can optimize your meal timing, calculate your macros to the gram, and buy every supplement on the market. But if your oatmeal is processed garbage, your yogurt is candy in disguise, and your bread is glorified white flour, you're building on a cracked foundation.
        </p>

        <p>
          The good news? These fixes are simple. Often cheaper, actually. A canister of steel cut oats costs less per serving than those fancy instant packets. Plain yogurt is cheaper than the flavored cups. Real whole grain bread isn't significantly more expensive than the fake stuff.
        </p>

        <p>
          You just have to know what to look for. And now you do.
        </p>

        <p>
          Stop sabotaging your gains with choices that seem healthy but aren't. Read the labels. Count the fiber. Check the sugar. Buy the boring stuff and make it taste good yourself. Your body will thank you with better energy, better recovery, and better results.
        </p>

        <!-- Consultation CTA -->
        <div class="bg-gold-50 dark:bg-gold-500/10 rounded-xl p-6 my-8 border border-gold-200 dark:border-gold-500/30">
          <p class="font-semibold text-navy-900 dark:text-white mb-2">Want Personalized Nutrition Guidance?</p>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Navigating the grocery store is just the beginning. If you're ready to build a complete nutrition strategy tailored to your goals, body, and lifestyle, let's talk. I offer free nutritional consultations to help you cut through the confusion and build sustainable eating habits.</p>
          <a href="../../ventures/gothabits.html" class="inline-block bg-gold-500 hover:bg-gold-600 text-white font-semibold px-6 py-2 rounded-full transition">Schedule Free Consultation &rarr;</a>
        </div>

        <!-- References -->
        <h3 class="text-navy-900 dark:text-white mt-12">References</h3>
        <ul class="text-sm">
          <li>Åberg, S., et al. (2015). Intact and disrupted cereal grains: Effects on postprandial metabolism. <em>Nutrients</em>, 7(9), 7498-7507.</li>
          <li>Ahmad, A., et al. (2008). Effects of natural honey consumption in diabetic patients. <em>Journal of Medicinal Food</em>, 11(1), 100-107.</li>
          <li>Douglas, S. M., et al. (2013). Low, moderate, or high protein yogurt snacks on appetite control. <em>Appetite</em>, 60, 117-122.</li>
          <li>Granfeldt, Y., et al. (2000). Glucose and insulin responses to barley products. <em>Journal of the American College of Nutrition</em>, 19(5), 635-644.</li>
          <li>Reynolds, A., et al. (2019). Carbohydrate quality and human health. <em>The Lancet</em>, 393(10170), 434-445.</li>
          <li>Saarinen, K., et al. (2011). Birch pollen honey for birch pollen allergy. <em>International Archives of Allergy and Immunology</em>, 155(2), 160-166.</li>
          <li>Sonnenburg, J. L., & Bäckhed, F. (2016). Diet-microbiota interactions. <em>Nature</em>, 535, 56-64.</li>
          <li>Whitehead, A., et al. (2014). Cholesterol-lowering effects of oat β-glucan. <em>American Journal of Clinical Nutrition</em>, 100(6), 1413-1421.</li>
        </ul>

      </div>
    </div>
  </article>

  <!-- Share Section -->
  <section class="py-12 bg-gray-50 dark:bg-navy-800">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h3 class="text-xl font-bold text-navy-900 dark:text-white mb-4">Found this helpful?</h3>
        <p class="text-gray-600 dark:text-gray-300 mb-6">Share it with someone who needs to hear the truth about their grocery choices.</p>
        <div class="flex justify-center gap-4">
          <button onclick="shareOnTwitter()" class="flex items-center gap-2 bg-navy-900 dark:bg-white text-white dark:text-navy-900 px-6 py-3 rounded-full font-semibold hover:opacity-90 transition">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
            Share on X
          </button>
          <button onclick="shareOnLinkedIn()" class="flex items-center gap-2 bg-[#0077B5] text-white px-6 py-3 rounded-full font-semibold hover:opacity-90 transition">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
            Share on LinkedIn
          </button>
          <button onclick="copyLink()" class="flex items-center gap-2 bg-gray-200 dark:bg-navy-700 text-navy-900 dark:text-white px-6 py-3 rounded-full font-semibold hover:opacity-90 transition">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
            Copy Link
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Copy Toast -->
  <div id="copy-toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-navy-900 dark:bg-white text-white dark:text-navy-900 px-6 py-3 rounded-full font-semibold opacity-0 transition-opacity duration-300 z-50">
    Link copied to clipboard!
  </div>

  <!-- Author Bio -->
  <section class="py-12 bg-white dark:bg-navy-900">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="bg-gray-50 dark:bg-navy-800 rounded-2xl p-8 flex flex-col sm:flex-row gap-6 items-center sm:items-start">
        <img src="../../headshot.png" alt="Lee Foropoulos" class="w-24 h-24 rounded-full object-cover" onerror="this.onerror=null; this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%23f59e0b%22 width=%22100%22 height=%22100%22/><text x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-size=%2240%22 fill=%22%230f172a%22>LF</text></svg>'">
        <div>
          <h3 class="text-xl font-bold text-navy-900 dark:text-white mb-2">Lee Foropoulos</h3>
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            Business Development Lead at Lookatmedia, fractional executive, and founder of gotHABITS. I write about the intersection of fitness, nutrition, and productivity for driven professionals who refuse to sacrifice their health for success.
          </p>
          <div class="flex gap-3">
            <a href="https://linkedin.com/in/leeforopoulos" target="_blank" rel="noopener" class="text-gray-400 hover:text-gold-500 transition">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
            </a>
            <a href="https://twitter.com/thesecretchief" target="_blank" rel="noopener" class="text-gray-400 hover:text-gold-500 transition">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Related Posts -->
  <section class="py-12 bg-gray-50 dark:bg-navy-800">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <h3 class="text-2xl font-bold text-navy-900 dark:text-white mb-8 text-center">Related Articles</h3>
      <div class="grid md:grid-cols-2 gap-8">
        <!-- Related Post 1 -->
        <article class="bg-white dark:bg-navy-900 rounded-2xl overflow-hidden shadow-lg border border-gray-100 dark:border-white/10">
          <div class="h-48 relative overflow-hidden">
            <img src="https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=400&h=250&fit=crop" alt="Balanced meal" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
          </div>
          <div class="p-6">
            <div class="flex items-center gap-3 mb-3">
              <span class="bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-400 text-xs font-semibold px-3 py-1 rounded-full">Nutrition</span>
              <span class="text-gray-500 dark:text-gray-400 text-sm">Jan 29, 2026</span>
            </div>
            <h4 class="text-xl font-bold text-navy-900 dark:text-white mb-2">
              <a href="carbs-hormones-nutrition-truth.html" class="hover:text-gold-600 dark:hover:text-gold-400 transition">Stop Fearing Carbs: The Hormone Truth</a>
            </h4>
            <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">Your Instagram feed lied to you. Here's what the science actually says about carbs, cortisol, and insulin.</p>
            <a href="carbs-hormones-nutrition-truth.html" class="text-gold-600 dark:text-gold-400 font-semibold text-sm hover:underline">Read more &rarr;</a>
          </div>
        </article>
        <!-- Related Post 2 -->
        <article class="bg-white dark:bg-navy-900 rounded-2xl overflow-hidden shadow-lg border border-gray-100 dark:border-white/10">
          <div class="h-48 relative overflow-hidden">
            <img src="https://images.unsplash.com/photo-1532384748853-8f54a8f476e2?w=400&h=250&fit=crop" alt="Protein foods" class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
          </div>
          <div class="p-6">
            <div class="flex items-center gap-3 mb-3">
              <span class="bg-green-100 dark:bg-green-500/20 text-green-700 dark:text-green-400 text-xs font-semibold px-3 py-1 rounded-full">Fitness</span>
              <span class="text-gray-500 dark:text-gray-400 text-sm">Sep 18, 2025</span>
            </div>
            <h4 class="text-xl font-bold text-navy-900 dark:text-white mb-2">
              <a href="protein-timing-myth-vs-reality.html" class="hover:text-gold-600 dark:hover:text-gold-400 transition">Protein Timing: Myth vs. Reality</a>
            </h4>
            <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">Does the 30-minute anabolic window exist? What the science actually shows about protein timing.</p>
            <a href="protein-timing-myth-vs-reality.html" class="text-gold-600 dark:text-gold-400 font-semibold text-sm hover:underline">Read more &rarr;</a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- Back to Top Button -->
  <button id="back-to-top" class="fixed bottom-8 right-8 bg-navy-800 dark:bg-gold-500 text-white dark:text-navy-900 p-3 rounded-full shadow-lg hover:scale-110 transition z-40" aria-label="Back to top">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
    </svg>
  </button>

  <!-- Footer -->
  <footer class="bg-navy-900 border-t border-white/10 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <p class="text-gray-500">&copy; 2026 Greek-Fire Corporation. All rights reserved.</p>
    </div>

    <!-- Legal Links -->
    <div class="mt-8 pt-6 border-t border-white/10 flex flex-wrap justify-center gap-4 text-sm">
      <button id="cookie-settings-btn" class="text-gray-500 hover:text-gold-400 transition">Cookie Settings</button>
      <span class="text-gray-600">|</span>
      <a href="../../privacy" class="text-gray-500 hover:text-gold-400 transition">Privacy Policy</a>
    </div>
  </footer>

  <!-- VOICE_READER -->
<!-- Voice Reader for Blog Posts -->
<div id="voice-reader" class="fixed bottom-24 right-8 z-40 flex flex-col items-end gap-2">
  <!-- Controls (hidden by default, shown when reading) -->
  <div id="voice-controls" class="hidden bg-navy-800 rounded-xl shadow-xl border border-white/10 p-4 mb-2 min-w-[200px]">
    <!-- Voice selector -->
    <div class="mb-3">
      <label class="text-gray-400 text-xs block mb-1">Voice</label>
      <select id="voice-select" class="w-full bg-navy-700 text-white text-sm rounded-lg px-3 py-2 border border-white/10 focus:border-gold-500 focus:outline-none">
        <option value="">Loading voices...</option>
      </select>
    </div>

    <!-- Speed controls -->
    <div class="flex items-center justify-between mb-3">
      <label class="text-gray-400 text-xs">Speed</label>
      <div class="flex items-center gap-2">
        <button id="voice-slower" class="p-1.5 text-gray-400 hover:text-gold-400 transition rounded hover:bg-white/5" title="Slower">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
          </svg>
        </button>
        <span id="voice-speed" class="text-white text-sm font-medium min-w-[3rem] text-center">1.0x</span>
        <button id="voice-faster" class="p-1.5 text-gray-400 hover:text-gold-400 transition rounded hover:bg-white/5" title="Faster">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Playback controls -->
    <div class="flex items-center justify-center gap-1 mb-3">
      <button id="voice-skip-back" class="p-2 text-gray-400 hover:text-gold-400 transition rounded hover:bg-white/5" title="Previous paragraph">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"></path>
        </svg>
      </button>
      <button id="voice-stop" class="p-2 text-gray-400 hover:text-red-400 transition rounded hover:bg-white/5" title="Stop">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"></path>
        </svg>
      </button>
      <button id="voice-skip-forward" class="p-2 text-gray-400 hover:text-gold-400 transition rounded hover:bg-white/5" title="Next paragraph">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"></path>
        </svg>
      </button>
    </div>

    <!-- Progress indicator -->
    <div class="text-xs text-gray-400 text-center">
      <span id="voice-progress">0</span> / <span id="voice-total">0</span> paragraphs
    </div>
  </div>

  <!-- Main Play/Pause Button -->
  <button id="voice-toggle" class="bg-gold-500 hover:bg-gold-400 text-navy-900 p-4 rounded-full shadow-lg transition transform hover:scale-110 group" title="Listen to article">
    <!-- Play icon -->
    <svg id="voice-play-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <!-- Pause icon (hidden by default) -->
    <svg id="voice-pause-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
  </button>
</div>

<style>
  /* Highlight currently reading element */
  .voice-reading {
    background: linear-gradient(90deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.2) 50%, rgba(245, 158, 11, 0.1) 100%);
    border-left: 3px solid #f59e0b;
    padding-left: 1rem;
    margin-left: -1rem;
    border-radius: 0 0.5rem 0.5rem 0;
    transition: all 0.3s ease;
  }

  .dark .voice-reading {
    background: linear-gradient(90deg, rgba(245, 158, 11, 0.05) 0%, rgba(245, 158, 11, 0.15) 50%, rgba(245, 158, 11, 0.05) 100%);
  }

  #voice-select {
    cursor: pointer;
  }
  #voice-select::-webkit-scrollbar {
    width: 6px;
  }
  #voice-select::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.1);
    border-radius: 3px;
  }
  #voice-select::-webkit-scrollbar-thumb {
    background: rgba(245, 158, 11, 0.5);
    border-radius: 3px;
  }
</style>

<script>
(function() {
  'use strict';

  // Check if Speech Synthesis is supported
  if (!('speechSynthesis' in window)) {
    const voiceReader = document.getElementById('voice-reader');
    if (voiceReader) voiceReader.style.display = 'none';
    return;
  }

  const synth = window.speechSynthesis;
  let utterance = null;
  let paragraphs = [];
  let currentIndex = 0;
  let isPlaying = false;
  let isPaused = false;
  let rate = 1.0;
  let selectedVoice = null;
  let voicesLoaded = false;

  // DOM elements
  const toggleBtn = document.getElementById('voice-toggle');
  const playIcon = document.getElementById('voice-play-icon');
  const pauseIcon = document.getElementById('voice-pause-icon');
  const controls = document.getElementById('voice-controls');
  const voiceSelect = document.getElementById('voice-select');
  const speedDisplay = document.getElementById('voice-speed');
  const progressDisplay = document.getElementById('voice-progress');
  const totalDisplay = document.getElementById('voice-total');
  const slowerBtn = document.getElementById('voice-slower');
  const fasterBtn = document.getElementById('voice-faster');
  const skipBackBtn = document.getElementById('voice-skip-back');
  const skipForwardBtn = document.getElementById('voice-skip-forward');
  const stopBtn = document.getElementById('voice-stop');

  // Voice quality scoring - prioritize more natural voices
  function scoreVoice(voice) {
    let score = 0;
    const name = voice.name.toLowerCase();
    const lang = voice.lang.toLowerCase();

    // Must be English
    if (!lang.startsWith('en')) return -1000;

    // Premium/Neural voices (most natural)
    if (name.includes('neural') || name.includes('natural') || name.includes('premium')) score += 100;

    // Google voices (Chrome) - very natural
    if (name.includes('google')) score += 80;

    // Microsoft voices (Edge) - also quite good
    if (name.includes('microsoft') && (name.includes('online') || name.includes('natural'))) score += 75;

    // Apple voices (Safari)
    if (name.includes('samantha') || name.includes('alex') || name.includes('karen')) score += 70;

    // Specific high-quality voices
    if (name.includes('zira') || name.includes('david') || name.includes('mark')) score += 60;

    // Enhanced/HD voices
    if (name.includes('enhanced') || name.includes('hd') || name.includes('compact') === false) score += 30;

    // Prefer US English for consistency
    if (lang === 'en-us' || lang === 'en_us') score += 20;

    // Prefer female voices (often clearer for narration)
    if (name.includes('female') || name.includes('zira') || name.includes('samantha') || name.includes('karen') || name.includes('victoria')) score += 10;

    // Local voices are usually lower quality
    if (voice.localService && !name.includes('google') && !name.includes('microsoft')) score -= 20;

    return score;
  }

  // Get and sort voices by quality
  function loadVoices() {
    const voices = synth.getVoices();
    if (voices.length === 0) return;

    // Filter English voices and sort by quality score
    const englishVoices = voices
      .filter(v => v.lang.toLowerCase().startsWith('en'))
      .map(v => ({ voice: v, score: scoreVoice(v) }))
      .sort((a, b) => b.score - a.score)
      .map(v => v.voice);

    if (englishVoices.length === 0) return;

    // Populate dropdown
    voiceSelect.innerHTML = '';
    englishVoices.forEach((voice, index) => {
      const option = document.createElement('option');
      option.value = index;
      // Clean up voice name for display
      let displayName = voice.name
        .replace('Microsoft ', '')
        .replace('Google ', '')
        .replace(' Online (Natural)', ' (Natural)')
        .replace(' - English (United States)', '')
        .replace(' (United States)', ' (US)')
        .replace(' (United Kingdom)', ' (UK)')
        .replace(' (Australia)', ' (AU)');
      option.textContent = displayName;
      option.dataset.voiceName = voice.name;
      voiceSelect.appendChild(option);
    });

    // Select best voice by default
    selectedVoice = englishVoices[0];
    voiceSelect.value = '0';

    // Try to restore saved preference
    const savedVoice = localStorage.getItem('preferredVoice');
    if (savedVoice) {
      const savedIndex = englishVoices.findIndex(v => v.name === savedVoice);
      if (savedIndex !== -1) {
        selectedVoice = englishVoices[savedIndex];
        voiceSelect.value = savedIndex.toString();
      }
    }

    voicesLoaded = true;

    // Store voices for later reference
    voiceSelect._voices = englishVoices;
  }

  // Voice selection change
  voiceSelect.addEventListener('change', function() {
    const voices = this._voices;
    if (voices && voices[this.value]) {
      selectedVoice = voices[this.value];
      localStorage.setItem('preferredVoice', selectedVoice.name);

      // If currently playing, restart with new voice
      if (isPlaying && !isPaused) {
        synth.cancel();
        speakParagraph(currentIndex);
      }
    }
  });

  // Get article content
  function getArticleParagraphs() {
    const article = document.querySelector('article .prose');
    if (!article) return [];

    const elements = article.querySelectorAll('p, h2, h3, li');
    return Array.from(elements).filter(el => {
      const text = el.innerText.trim();
      return text.length > 0;
    });
  }

  // Update UI state
  function updateUI() {
    if (isPlaying && !isPaused) {
      playIcon.classList.add('hidden');
      pauseIcon.classList.remove('hidden');
      controls.classList.remove('hidden');
    } else if (isPaused) {
      playIcon.classList.remove('hidden');
      pauseIcon.classList.add('hidden');
      controls.classList.remove('hidden');
    } else {
      playIcon.classList.remove('hidden');
      pauseIcon.classList.add('hidden');
      controls.classList.add('hidden');
    }

    progressDisplay.textContent = currentIndex + 1;
    totalDisplay.textContent = paragraphs.length;
    speedDisplay.textContent = rate.toFixed(1) + 'x';
  }

  // Highlight current paragraph
  function highlightParagraph(index) {
    // Remove previous highlight
    document.querySelectorAll('.voice-reading').forEach(el => {
      el.classList.remove('voice-reading');
    });

    // Add highlight to current
    if (paragraphs[index]) {
      paragraphs[index].classList.add('voice-reading');

      // Smooth scroll to element
      const rect = paragraphs[index].getBoundingClientRect();
      const offset = window.innerHeight / 3;

      if (rect.top < 100 || rect.bottom > window.innerHeight - 100) {
        window.scrollTo({
          top: window.scrollY + rect.top - offset,
          behavior: 'smooth'
        });
      }
    }
  }

  // Speak a paragraph
  function speakParagraph(index) {
    if (index >= paragraphs.length) {
      stopReading();
      return;
    }

    currentIndex = index;
    highlightParagraph(index);
    updateUI();

    let text = paragraphs[index].innerText.trim();

    // Add natural pauses for better flow
    text = text
      .replace(/\. /g, '... ')  // Longer pause after sentences
      .replace(/\? /g, '?... ')
      .replace(/! /g, '!... ')
      .replace(/: /g, ':.. ')   // Medium pause after colons
      .replace(/; /g, ';.. ')
      .replace(/, /g, ', ');    // Keep commas natural

    utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = rate;
    utterance.pitch = 1.0;  // Keep pitch natural
    utterance.volume = 1.0;

    // Use selected voice
    if (selectedVoice) {
      utterance.voice = selectedVoice;
    }

    utterance.onend = function() {
      if (isPlaying && !isPaused) {
        // Small pause between paragraphs for natural flow
        setTimeout(() => {
          if (isPlaying && !isPaused) {
            speakParagraph(currentIndex + 1);
          }
        }, 300);
      }
    };

    utterance.onerror = function(e) {
      if (e.error !== 'interrupted' && e.error !== 'canceled') {
        console.error('Speech error:', e.error);
        speakParagraph(currentIndex + 1);
      }
    };

    synth.speak(utterance);
  }

  // Start reading
  function startReading() {
    paragraphs = getArticleParagraphs();
    if (paragraphs.length === 0) return;

    isPlaying = true;
    isPaused = false;

    if (synth.paused) {
      synth.resume();
    } else {
      speakParagraph(currentIndex);
    }

    updateUI();
  }

  // Pause reading
  function pauseReading() {
    isPaused = true;
    synth.pause();
    updateUI();
  }

  // Resume reading
  function resumeReading() {
    isPaused = false;
    synth.resume();
    updateUI();
  }

  // Stop reading
  function stopReading() {
    isPlaying = false;
    isPaused = false;
    currentIndex = 0;
    synth.cancel();

    // Remove highlights
    document.querySelectorAll('.voice-reading').forEach(el => {
      el.classList.remove('voice-reading');
    });

    updateUI();
  }

  // Toggle button click
  toggleBtn.addEventListener('click', function() {
    if (!isPlaying) {
      startReading();
    } else if (isPaused) {
      resumeReading();
    } else {
      pauseReading();
    }
  });

  // Stop button
  stopBtn.addEventListener('click', stopReading);

  // Speed controls
  slowerBtn.addEventListener('click', function() {
    rate = Math.max(0.5, rate - 0.1);
    speedDisplay.textContent = rate.toFixed(1) + 'x';
    if (isPlaying && !isPaused) {
      synth.cancel();
      speakParagraph(currentIndex);
    }
  });

  fasterBtn.addEventListener('click', function() {
    rate = Math.min(2.0, rate + 0.1);
    speedDisplay.textContent = rate.toFixed(1) + 'x';
    if (isPlaying && !isPaused) {
      synth.cancel();
      speakParagraph(currentIndex);
    }
  });

  // Skip controls
  skipBackBtn.addEventListener('click', function() {
    if (currentIndex > 0) {
      synth.cancel();
      speakParagraph(currentIndex - 1);
    }
  });

  skipForwardBtn.addEventListener('click', function() {
    if (currentIndex < paragraphs.length - 1) {
      synth.cancel();
      speakParagraph(currentIndex + 1);
    }
  });

  // Initialize
  paragraphs = getArticleParagraphs();
  totalDisplay.textContent = paragraphs.length;

  // Load voices (async in some browsers)
  loadVoices();
  if (synth.onvoiceschanged !== undefined) {
    synth.onvoiceschanged = loadVoices;
  }

  // Restore saved speed preference
  const savedRate = localStorage.getItem('preferredRate');
  if (savedRate) {
    rate = parseFloat(savedRate);
    speedDisplay.textContent = rate.toFixed(1) + 'x';
  }

  // Save speed on change
  const originalSlower = slowerBtn.onclick;
  const originalFaster = fasterBtn.onclick;
  slowerBtn.addEventListener('click', () => localStorage.setItem('preferredRate', rate.toFixed(1)));
  fasterBtn.addEventListener('click', () => localStorage.setItem('preferredRate', rate.toFixed(1)));

  // Stop when leaving page
  window.addEventListener('beforeunload', function() {
    synth.cancel();
  });

  // Handle visibility change (pause when tab hidden)
  document.addEventListener('visibilitychange', function() {
    if (document.hidden && isPlaying && !isPaused) {
      pauseReading();
    }
  });

})();
</script>

<!-- /VOICE_READER -->

  <!-- MUSIC_PLAYER -->
<!-- Ambient Music Player -->
<div id="music-player" class="fixed bottom-8 left-8 z-[60] opacity-0 translate-y-4 transition-all duration-500">
  <!-- Expanded Player Panel -->
  <div id="music-panel" class="hidden mb-3 bg-navy-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden w-72">
    <!-- Track Visualizer Header -->
    <div class="relative h-24 bg-gradient-to-br from-gold-500/20 via-purple-500/20 to-blue-500/20 overflow-hidden">
      <div id="music-visualizer" class="absolute inset-0 flex items-end justify-center gap-1 px-4 pb-2"></div>
      <div class="absolute inset-0 bg-gradient-to-t from-navy-900/90 to-transparent"></div>
      <div class="absolute bottom-2 left-4 right-4">
        <p id="music-track-name" class="text-white font-semibold text-sm truncate">Select a track</p>
        <p id="music-track-artist" class="text-gray-400 text-xs truncate">Ambient Soundscapes</p>
      </div>
    </div>

    <!-- Track Selector -->
    <div class="p-4 border-b border-white/10">
      <label class="text-gray-400 text-xs block mb-2">Atmosphere</label>
      <select id="music-track-select" class="w-full bg-navy-800 text-white text-sm rounded-lg px-3 py-2.5 border border-white/10 focus:border-gold-500 focus:outline-none cursor-pointer">
        <option value="">Choose your vibe...</option>
        <optgroup label="Relaxing">
          <option value="acoustic-guitar">Acoustic Bossa Nova</option>
          <option value="stardust">Stardust Meditation</option>
        </optgroup>
        <optgroup label="Focus">
          <option value="flow-state">Flow State</option>
          <option value="morning-clarity">Morning Clarity</option>
        </optgroup>
        <optgroup label="Atmospheric">
          <option value="cosmic">Cosmic Journey</option>
          <option value="noir">Noir Atmosphere</option>
          <option value="sunrise">Golden Sunrise</option>
        </optgroup>
      </select>
    </div>

    <!-- Progress Bar -->
    <div class="px-4 pt-4">
      <div id="music-progress-container" class="h-1.5 bg-navy-700 rounded-full cursor-pointer relative group">
        <div id="music-progress-bar" class="h-full bg-gradient-to-r from-gold-500 to-gold-400 rounded-full transition-all duration-100" style="width: 0%"></div>
        <div id="music-progress-handle" class="absolute top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity cursor-grab" style="left: 0%"></div>
      </div>
      <div class="flex justify-between text-gray-500 text-xs mt-1">
        <span id="music-time-current">0:00</span>
        <span id="music-time-duration">0:00</span>
      </div>
    </div>

    <!-- Playback Controls -->
    <div class="p-4 flex items-center justify-center gap-4">
      <button id="music-play-btn" class="w-14 h-14 rounded-full bg-gold-500 hover:bg-gold-400 text-navy-900 flex items-center justify-center transition transform hover:scale-105 shadow-lg">
        <svg id="music-play-icon" class="w-6 h-6 ml-1" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"></path>
        </svg>
        <svg id="music-pause-icon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>
        </svg>
      </button>
    </div>

    <!-- Volume Control -->
    <div class="px-4 pb-4">
      <div class="flex items-center gap-3">
        <button id="music-mute" class="text-gray-400 hover:text-white transition">
          <svg id="music-volume-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072M18.364 5.636a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>
          </svg>
          <svg id="music-mute-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"></path>
          </svg>
        </button>
        <div id="music-volume-container" class="flex-1 h-2 bg-navy-700 rounded-full cursor-pointer relative group">
          <div id="music-volume-bar" class="h-full bg-gradient-to-r from-gold-500 to-gold-400 rounded-full transition-all" style="width: 25%"></div>
          <div id="music-volume-handle" class="absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full shadow-lg cursor-grab" style="left: 25%"></div>
        </div>
        <span id="music-volume-value" class="text-gray-400 text-xs w-8">25%</span>
      </div>
    </div>

    <div class="px-4 pb-3 text-center">
      <p class="text-gray-500 text-xs">Premium ambient soundscapes</p>
    </div>
  </div>

  <!-- Floating Toggle Button -->
  <button id="music-toggle" class="relative bg-navy-900/90 hover:bg-navy-800 backdrop-blur-xl text-white p-4 rounded-full shadow-2xl border border-white/10 transition-all duration-300 hover:scale-110 hover:border-gold-500/50 group" style="pointer-events: auto !important; z-index: 9999 !important;">
    <div id="music-pulse" class="absolute inset-0 rounded-full border-2 border-gold-500/50 animate-ping hidden"></div>
    <svg id="music-note-icon" class="w-6 h-6 text-gold-400 group-hover:text-gold-300 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
    </svg>
    <div id="music-eq-mini" class="absolute inset-0 flex items-center justify-center gap-0.5 hidden">
      <span class="w-1 h-3 bg-gold-400 rounded-full animate-eq-1"></span>
      <span class="w-1 h-4 bg-gold-400 rounded-full animate-eq-2"></span>
      <span class="w-1 h-2 bg-gold-400 rounded-full animate-eq-3"></span>
      <span class="w-1 h-3 bg-gold-400 rounded-full animate-eq-4"></span>
    </div>
    <span id="music-badge" class="absolute -top-1 -right-1 w-3 h-3 bg-gold-500 rounded-full hidden">
      <span class="absolute inset-0 rounded-full bg-gold-500 animate-ping"></span>
    </span>
  </button>

  <!-- Welcome notification -->
  <div id="music-welcome" class="absolute bottom-full left-0 mb-3 hidden opacity-0 transition-opacity duration-500 w-64">
    <div class="bg-navy-800/95 backdrop-blur-xl rounded-xl p-4 shadow-2xl border border-gold-500/20 relative">
      <div class="absolute -bottom-2 left-6 w-4 h-4 bg-navy-800/95 border-r border-b border-gold-500/20 transform rotate-45"></div>
      <div class="flex items-center gap-2 mb-2">
        <div class="w-8 h-8 rounded-full bg-gold-500/20 flex items-center justify-center">
          <svg class="w-4 h-4 text-gold-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
          </svg>
        </div>
        <span class="text-gold-400 font-semibold text-sm">Enhance Your Experience</span>
      </div>
      <p class="text-gray-300 text-xs leading-relaxed mb-3">
        Enable ambient music for an immersive browsing experience.
      </p>
      <div class="flex gap-2">
        <button id="music-welcome-play" class="flex-1 bg-gold-500 hover:bg-gold-400 text-navy-900 text-xs font-semibold py-2 px-3 rounded-lg transition transform hover:scale-105">
          Play Music
        </button>
        <button id="music-welcome-dismiss" class="px-3 py-2 text-gray-400 hover:text-white text-xs rounded-lg border border-white/10 hover:border-white/30 transition">
          Later
        </button>
      </div>
    </div>
  </div>

  <!-- Reminder popup for users who stopped music -->
  <div id="music-reminder" class="absolute bottom-full left-0 mb-3 hidden opacity-0 transition-opacity duration-500 w-56">
    <div class="bg-navy-800/95 backdrop-blur-xl rounded-xl p-3 shadow-2xl border border-gold-500/20 relative">
      <div class="absolute -bottom-2 left-6 w-4 h-4 bg-navy-800/95 border-r border-b border-gold-500/20 transform rotate-45"></div>
      <div class="flex items-center gap-2 mb-2">
        <svg class="w-4 h-4 text-gold-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 001.414 1.414m2.828-9.9a9 9 0 012.828-2.828"></path>
        </svg>
        <span class="text-gray-300 text-xs">Music is paused</span>
      </div>
      <div class="flex gap-2">
        <button id="music-reminder-resume" class="flex-1 bg-gold-500/20 hover:bg-gold-500/30 text-gold-400 text-xs font-semibold py-1.5 px-2 rounded-lg transition">
          Resume
        </button>
        <button id="music-reminder-dismiss" class="px-2 py-1.5 text-gray-500 hover:text-gray-300 text-xs transition">
          Dismiss
        </button>
      </div>
    </div>
  </div>
</div>

<style>
  #music-player.visible { opacity: 1; transform: translateY(0); }
  @keyframes eq-1 { 0%, 100% { height: 4px; } 50% { height: 16px; } }
  @keyframes eq-2 { 0%, 100% { height: 8px; } 50% { height: 20px; } }
  @keyframes eq-3 { 0%, 100% { height: 12px; } 50% { height: 8px; } }
  @keyframes eq-4 { 0%, 100% { height: 6px; } 50% { height: 14px; } }
  .animate-eq-1 { animation: eq-1 0.8s ease-in-out infinite; }
  .animate-eq-2 { animation: eq-2 0.6s ease-in-out infinite 0.1s; }
  .animate-eq-3 { animation: eq-3 0.7s ease-in-out infinite 0.2s; }
  .animate-eq-4 { animation: eq-4 0.5s ease-in-out infinite 0.15s; }
  .visualizer-bar { width: 4px; background: linear-gradient(to top, #f59e0b, #fbbf24); border-radius: 2px; transition: height 0.1s ease; }
  #music-track-select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%239ca3af'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 1rem; }
  #music-welcome.show { opacity: 1; }
  @keyframes welcome-glow { 0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.2); } 50% { box-shadow: 0 0 40px rgba(245, 158, 11, 0.4); } }
  #music-welcome.show > div { animation: welcome-glow 2s ease-in-out infinite; }
  #music-reminder.show { opacity: 1; }
</style>

<script>
(function() {
  'use strict';

  // Version for cache clearing on updates
  const MUSIC_VERSION = '5';
  if (localStorage.getItem('musicVersion') !== MUSIC_VERSION) {
    localStorage.removeItem('musicTrack');
    localStorage.removeItem('musicEnabled');
    localStorage.removeItem('musicWelcomeSeen');
    localStorage.removeItem('userSelectedTrack');
    localStorage.setItem('musicVersion', MUSIC_VERSION);
  }

  // Track definitions with MP3 file paths
  const TRACKS = {
    'acoustic-guitar': {
      name: 'Acoustic Bossa Nova',
      artist: 'Relaxing Vibes',
      file: '/audio/acoustic-guitar-bossa-nova-295307.mp3',
      mood: 'relaxing'
    },
    'stardust': {
      name: 'Stardust Meditation',
      artist: 'Deep Relaxation',
      file: '/audio/stardust-meditation-12702.mp3',
      mood: 'meditative'
    },
    'flow-state': {
      name: 'Flow State',
      artist: 'Focus & Productivity',
      file: '/audio/flow-state-ambient-music-374741.mp3',
      mood: 'focus'
    },
    'morning-clarity': {
      name: 'Morning Clarity',
      artist: 'Fresh Start',
      file: '/audio/morning-clarity-443232.mp3',
      mood: 'uplifting'
    },
    'cosmic': {
      name: 'Cosmic Journey',
      artist: 'Stellar Motivation',
      file: '/audio/cosmic-stellar-journey-motivation-322778.mp3',
      mood: 'epic'
    },
    'noir': {
      name: 'Noir Atmosphere',
      artist: 'Dark Ambiance',
      file: '/audio/noir-alley-415342.mp3',
      mood: 'dark'
    },
    'sunrise': {
      name: 'Golden Sunrise',
      artist: 'New Beginnings',
      file: '/audio/sunrise-337749.mp3',
      mood: 'bright'
    }
  };

  // Intelligent page-to-track mapping based on content type and path
  function getPageTrack() {
    const path = window.location.pathname.toLowerCase();
    const meta = document.querySelector('meta[name="ambient:music"]');

    // If page has explicit meta tag, use that
    if (meta && meta.content && TRACKS[meta.content]) {
      return meta.content;
    }

    // Main pages
    if (path === '/' || path === '/index.html') return 'sunrise';
    if (path.includes('/blog/index') || path === '/blog/' || path === '/blog') return 'sunrise';
    if (path.includes('/privacy')) return 'noir';

    // Blog post categories
    if (path.includes('/blog/posts/')) {
      // AI & Tech articles - focus music
      if (path.includes('ai-') || path.includes('claude') || path.includes('chatgpt') ||
          path.includes('agent') || path.includes('automation') || path.includes('ram-ssd')) {
        return 'flow-state';
      }
      // Health & Fitness - morning clarity
      if (path.includes('bmr') || path.includes('protein') || path.includes('supplement') ||
          path.includes('workout') || path.includes('habit')) {
        return 'morning-clarity';
      }
      // Book reviews - acoustic relaxation
      if (path.includes('book-review')) {
        if (path.includes('dungeon-crawler')) return 'noir';
        if (path.includes('ceo-excellence')) return 'cosmic';
        if (path.includes('brain-rules')) return 'flow-state';
        return 'acoustic-guitar';
      }
      // Productivity & Business
      if (path.includes('morning-routine') || path.includes('ceo')) return 'morning-clarity';
      if (path.includes('fractional') || path.includes('breaking-big-tasks')) return 'flow-state';
      if (path.includes('slop')) return 'noir';

      // Default blog post
      return 'flow-state';
    }

    // Experience pages - cosmic/motivational
    if (path.includes('/experience/')) {
      return 'cosmic';
    }

    // Profile pages - meditative
    if (path.includes('/profiles/')) {
      return 'stardust';
    }

    // Ventures - cosmic/entrepreneurial
    if (path.includes('/ventures/')) {
      return 'cosmic';
    }

    // Default fallback
    return 'sunrise';
  }

  let audio = null;
  let audioContext = null;
  let analyser = null;
  let isPlaying = false;
  let currentTrackId = null;
  let volume = 0.25;
  let animationId = null;

  const player = document.getElementById('music-player');
  if (!player) return;

  const panel = document.getElementById('music-panel');
  const toggleBtn = document.getElementById('music-toggle');
  const playBtn = document.getElementById('music-play-btn');
  const playIcon = document.getElementById('music-play-icon');
  const pauseIcon = document.getElementById('music-pause-icon');
  const trackSelect = document.getElementById('music-track-select');
  const trackName = document.getElementById('music-track-name');
  const trackArtist = document.getElementById('music-track-artist');
  const volumeBar = document.getElementById('music-volume-bar');
  const volumeHandle = document.getElementById('music-volume-handle');
  const volumeContainer = document.getElementById('music-volume-container');
  const volumeValue = document.getElementById('music-volume-value');
  const muteBtn = document.getElementById('music-mute');
  const volumeIcon = document.getElementById('music-volume-icon');
  const muteIcon = document.getElementById('music-mute-icon');
  const visualizer = document.getElementById('music-visualizer');
  const pulse = document.getElementById('music-pulse');
  const noteIcon = document.getElementById('music-note-icon');
  const eqMini = document.getElementById('music-eq-mini');
  const welcomeEl = document.getElementById('music-welcome');
  const welcomePlayBtn = document.getElementById('music-welcome-play');
  const welcomeDismissBtn = document.getElementById('music-welcome-dismiss');
  const reminderEl = document.getElementById('music-reminder');
  const reminderResumeBtn = document.getElementById('music-reminder-resume');
  const reminderDismissBtn = document.getElementById('music-reminder-dismiss');
  const musicBadge = document.getElementById('music-badge');
  const progressContainer = document.getElementById('music-progress-container');
  const progressBar = document.getElementById('music-progress-bar');
  const progressHandle = document.getElementById('music-progress-handle');
  const timeCurrent = document.getElementById('music-time-current');
  const timeDuration = document.getElementById('music-time-duration');

  // Persistence helpers
  function setMusicEnabled(enabled) { localStorage.setItem('musicEnabled', enabled ? 'true' : 'false'); }
  function isMusicEnabled() { return localStorage.getItem('musicEnabled') === 'true'; }
  function setUserTrack(trackId) { localStorage.setItem('userSelectedTrack', trackId); }
  function getUserTrack() { return localStorage.getItem('userSelectedTrack'); }

  // Cross-page playback persistence
  function savePlaybackState() {
    if (audio && isPlaying && currentTrackId) {
      const state = {
        trackId: currentTrackId,
        position: audio.currentTime,
        timestamp: Date.now()
      };
      localStorage.setItem('musicPlaybackState', JSON.stringify(state));
    }
  }

  function getPlaybackState() {
    try {
      const stateStr = localStorage.getItem('musicPlaybackState');
      if (!stateStr) return null;
      const state = JSON.parse(stateStr);
      // Only use state if it's less than 5 seconds old (fresh navigation)
      if (Date.now() - state.timestamp < 5000) {
        return state;
      }
      localStorage.removeItem('musicPlaybackState');
      return null;
    } catch (e) {
      return null;
    }
  }

  function clearPlaybackState() {
    localStorage.removeItem('musicPlaybackState');
  }

  // Save state before leaving page
  window.addEventListener('beforeunload', savePlaybackState);
  // Also save periodically while playing (every 2 seconds)
  setInterval(() => {
    if (isPlaying) savePlaybackState();
  }, 2000);

  function showWelcome() {
    if (localStorage.getItem('musicWelcomeSeen')) return;
    if (musicBadge) musicBadge.classList.remove('hidden');
    setTimeout(() => {
      if (welcomeEl && !isPlaying) {
        welcomeEl.classList.remove('hidden');
        setTimeout(() => welcomeEl.classList.add('show'), 50);
      }
    }, 3000);
  }

  function hideWelcome(permanent = false) {
    if (welcomeEl) {
      welcomeEl.classList.remove('show');
      setTimeout(() => welcomeEl.classList.add('hidden'), 500);
    }
    if (musicBadge) musicBadge.classList.add('hidden');
    if (permanent) localStorage.setItem('musicWelcomeSeen', 'true');
  }

  function showReminder() {
    // Only show if user explicitly stopped music in this session
    if (!sessionStorage.getItem('musicStoppedByUser')) return;
    // Only show once per page load
    if (sessionStorage.getItem('musicReminderShown')) return;
    sessionStorage.setItem('musicReminderShown', 'true');

    setTimeout(() => {
      if (reminderEl && !isPlaying) {
        reminderEl.classList.remove('hidden');
        setTimeout(() => reminderEl.classList.add('show'), 50);
      }
    }, 2000);
  }

  function hideReminder() {
    if (reminderEl) {
      reminderEl.classList.remove('show');
      setTimeout(() => reminderEl.classList.add('hidden'), 500);
    }
    // Clear the stopped flag so reminder doesn't keep showing
    sessionStorage.removeItem('musicStoppedByUser');
  }

  function formatTime(seconds) {
    if (isNaN(seconds)) return '0:00';
    const mins = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  }

  function initAudio() {
    if (!audio) {
      audio = new Audio();
      audio.loop = true;
      audio.volume = volume;
      audio.crossOrigin = 'anonymous';

      audio.addEventListener('loadedmetadata', () => {
        if (timeDuration) timeDuration.textContent = formatTime(audio.duration);
      });

      audio.addEventListener('timeupdate', () => {
        if (audio.duration) {
          const percent = (audio.currentTime / audio.duration) * 100;
          if (progressBar) progressBar.style.width = `${percent}%`;
          if (progressHandle) progressHandle.style.left = `${percent}%`;
          if (timeCurrent) timeCurrent.textContent = formatTime(audio.currentTime);
        }
      });

      audio.addEventListener('ended', () => {
        // Loop is enabled, but just in case
        audio.currentTime = 0;
        audio.play().catch(() => {});
      });

      audio.addEventListener('error', (e) => {
        console.warn('Audio load error:', e);
      });
    }

    // Set up Web Audio API for visualizer
    if (!audioContext) {
      try {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        analyser = audioContext.createAnalyser();
        analyser.fftSize = 64;
        const source = audioContext.createMediaElementSource(audio);
        source.connect(analyser);
        analyser.connect(audioContext.destination);
      } catch (e) {
        console.warn('Web Audio API not available for visualizer');
      }
    }
  }

  function loadTrack(trackId, startPosition = 0) {
    if (!TRACKS[trackId]) return;

    initAudio();

    const track = TRACKS[trackId];
    currentTrackId = trackId;

    // Update UI
    if (trackName) trackName.textContent = track.name;
    if (trackArtist) trackArtist.textContent = track.artist;
    if (trackSelect) trackSelect.value = trackId;

    // Load the audio file
    audio.src = track.file;

    // Set start position once audio is ready
    if (startPosition > 0) {
      audio.addEventListener('loadedmetadata', function onLoaded() {
        audio.currentTime = Math.min(startPosition, audio.duration - 1);
        audio.removeEventListener('loadedmetadata', onLoaded);
      }, { once: true });
    }

    audio.load();
  }

  function play() {
    if (!currentTrackId) {
      // Determine which track to play
      // Priority: 1. User preference, 2. Page-specific track
      const userTrack = getUserTrack();
      const pageTrack = getPageTrack();
      const trackToPlay = userTrack || pageTrack;
      loadTrack(trackToPlay);
    }

    if (audioContext && audioContext.state === 'suspended') {
      audioContext.resume();
    }

    audio.play().then(() => {
      isPlaying = true;
      setMusicEnabled(true);
      updatePlayButton();
      animateVisualizer();
      hideWelcome(true);
    }).catch((e) => {
      console.warn('Playback failed:', e);
    });
  }

  function pause() {
    if (audio) {
      audio.pause();
    }
    isPlaying = false;
    updatePlayButton();
    if (animationId) {
      cancelAnimationFrame(animationId);
      animationId = null;
    }
    // Mark music as stopped so it doesn't auto-resume on next page
    setMusicEnabled(false);
    clearPlaybackState();
    // Track that user explicitly stopped music (for reminder on next page)
    sessionStorage.setItem('musicStoppedByUser', 'true');
  }

  function togglePlay() {
    isPlaying ? pause() : play();
  }

  function updatePlayButton() {
    if (isPlaying) {
      if (playIcon) playIcon.classList.add('hidden');
      if (pauseIcon) pauseIcon.classList.remove('hidden');
      if (pulse) pulse.classList.remove('hidden');
      if (noteIcon) noteIcon.classList.add('hidden');
      if (eqMini) eqMini.classList.remove('hidden');
    } else {
      if (playIcon) playIcon.classList.remove('hidden');
      if (pauseIcon) pauseIcon.classList.add('hidden');
      if (pulse) pulse.classList.add('hidden');
      if (noteIcon) noteIcon.classList.remove('hidden');
      if (eqMini) eqMini.classList.add('hidden');
    }
  }

  function updateVolumeUI() {
    const percent = volume * 100;
    if (volumeBar) volumeBar.style.width = `${percent}%`;
    if (volumeHandle) volumeHandle.style.left = `${percent}%`;
    if (volumeValue) volumeValue.textContent = `${Math.round(percent)}%`;
    if (volume === 0) {
      if (volumeIcon) volumeIcon.classList.add('hidden');
      if (muteIcon) muteIcon.classList.remove('hidden');
    } else {
      if (volumeIcon) volumeIcon.classList.remove('hidden');
      if (muteIcon) muteIcon.classList.add('hidden');
    }
  }

  function createVisualizerBars() {
    if (!visualizer) return;
    visualizer.innerHTML = '';
    for (let i = 0; i < 32; i++) {
      const bar = document.createElement('div');
      bar.className = 'visualizer-bar';
      bar.style.height = '4px';
      visualizer.appendChild(bar);
    }
  }

  function animateVisualizer() {
    if (!isPlaying || !visualizer) {
      if (animationId) cancelAnimationFrame(animationId);
      return;
    }

    const bars = visualizer.querySelectorAll('.visualizer-bar');

    if (analyser) {
      const dataArray = new Uint8Array(analyser.frequencyBinCount);
      analyser.getByteFrequencyData(dataArray);
      bars.forEach((bar, i) => {
        const value = dataArray[i] || 0;
        bar.style.height = `${Math.max(4, (value / 255) * 60)}px`;
      });
    } else {
      // Fallback animation when Web Audio API isn't available
      bars.forEach((bar, i) => {
        const value = Math.random() * 0.5 + 0.3;
        bar.style.height = `${Math.max(4, value * 40)}px`;
      });
    }

    animationId = requestAnimationFrame(animateVisualizer);
  }

  function bindEvents() {
    if (toggleBtn && panel) {
      toggleBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        panel.classList.toggle('hidden');
        hideWelcome(true);
      });
    }

    // Click outside to close panel
    document.addEventListener('click', (e) => {
      if (panel && !panel.classList.contains('hidden')) {
        if (!panel.contains(e.target) && !toggleBtn.contains(e.target)) {
          panel.classList.add('hidden');
        }
      }
    });

    // Prevent clicks inside panel from closing it
    if (panel) {
      panel.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    }

    if (welcomePlayBtn) {
      welcomePlayBtn.addEventListener('click', () => {
        hideWelcome(true);
        if (panel) panel.classList.remove('hidden');
        play();
      });
    }

    if (welcomeDismissBtn) {
      welcomeDismissBtn.addEventListener('click', () => {
        hideWelcome(true);
        setMusicEnabled(false);
      });
    }

    // Reminder popup events
    if (reminderResumeBtn) {
      reminderResumeBtn.addEventListener('click', () => {
        hideReminder();
        if (panel) panel.classList.remove('hidden');
        play();
      });
    }

    if (reminderDismissBtn) {
      reminderDismissBtn.addEventListener('click', () => {
        hideReminder();
      });
    }

    if (playBtn) playBtn.addEventListener('click', togglePlay);

    if (trackSelect) {
      trackSelect.addEventListener('change', (e) => {
        if (e.target.value) {
          // User explicitly selected a track - save preference
          setUserTrack(e.target.value);
          loadTrack(e.target.value);
          play();
        }
      });
    }

    // Progress bar seek
    if (progressContainer) {
      progressContainer.addEventListener('click', (e) => {
        if (!audio || !audio.duration) return;
        const rect = progressContainer.getBoundingClientRect();
        const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
        audio.currentTime = percent * audio.duration;
      });
    }

    // Volume control
    if (volumeContainer) {
      volumeContainer.addEventListener('click', (e) => {
        const rect = volumeContainer.getBoundingClientRect();
        volume = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
        if (audio) audio.volume = volume;
        setCookie('musicVolume', volume, 365);
        updateVolumeUI();
      });
    }

    if (muteBtn) {
      muteBtn.addEventListener('click', () => {
        if (volume === 0) {
          // Restore saved volume preference, or default to 25%
          const savedVolume = getCookie('musicVolume');
          volume = savedVolume ? parseFloat(decodeURIComponent(savedVolume)) : 0.25;
          // If saved was 0, use default
          if (volume === 0) volume = 0.25;
        } else {
          volume = 0;
        }
        if (audio) audio.volume = volume;
        updateVolumeUI();
      });
    }
  }

  function init() {
    // Check for saved playback state from previous page
    const savedState = getPlaybackState();

    // Get the appropriate track for this page
    const pageTrack = getPageTrack();
    const userTrack = getUserTrack();

    // If we have a saved state from navigation, use that track
    // Otherwise use user preference or page default
    const displayTrack = savedState ? savedState.trackId : (userTrack || pageTrack);

    // Restore saved volume from cookie
    const savedVolume = getCookie('musicVolume');
    if (savedVolume) {
      volume = parseFloat(decodeURIComponent(savedVolume));
      updateVolumeUI();
    }

    // Set the track selector to show appropriate track
    if (trackSelect) trackSelect.value = displayTrack;

    // Update track display
    if (TRACKS[displayTrack]) {
      if (trackName) trackName.textContent = TRACKS[displayTrack].name;
      if (trackArtist) trackArtist.textContent = TRACKS[displayTrack].artist;
    }

    createVisualizerBars();
    bindEvents();

    const musicWasEnabled = isMusicEnabled();
    const userStoppedMusic = sessionStorage.getItem('musicStoppedByUser');

    // If we have a fresh saved state AND music is enabled, resume immediately
    if (savedState && musicWasEnabled) {
      player.classList.add('visible');
      loadTrack(savedState.trackId, savedState.position);
      // Small delay to ensure audio is ready
      setTimeout(() => {
        play();
        clearPlaybackState();
      }, 100);
    } else {
      // Normal startup with slight delay
      setTimeout(() => {
        player.classList.add('visible');
        if (musicWasEnabled) {
          loadTrack(displayTrack);
          play();
        } else if (userStoppedMusic) {
          // User explicitly stopped music - show reminder instead of welcome
          showReminder();
        } else {
          showWelcome();
        }
      }, 500);
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

<!-- /MUSIC_PLAYER -->

  <!-- COOKIE_CONSENT -->

  <!-- SHARED_SCRIPTS -->
<script>
// ===== COOKIE UTILITIES =====
function getCookie(name) {
  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
  return match ? match[2] : null;
}

function setCookie(name, value, days) {
  const expires = new Date(Date.now() + days * 864e5).toUTCString();
  document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/; SameSite=Lax';
}

function deleteCookie(name) {
  document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
}

// ===== COOKIE CONSENT MANAGEMENT =====
const CookieConsent = {
  CONSENT_COOKIE: 'cookieConsent',
  CONSENT_VERSION: '1.0',

  getConsent() {
    const consent = getCookie(this.CONSENT_COOKIE);
    if (!consent) return null;
    try {
      return JSON.parse(decodeURIComponent(consent));
    } catch (e) {
      return null;
    }
  },

  setConsent(preferences) {
    const consent = {
      version: this.CONSENT_VERSION,
      timestamp: new Date().toISOString(),
      essential: true, // Always true
      analytics: preferences.analytics || false,
      marketing: preferences.marketing || false
    };
    setCookie(this.CONSENT_COOKIE, JSON.stringify(consent), 365);
    return consent;
  },

  hasConsent() {
    return this.getConsent() !== null;
  },

  hasAnalyticsConsent() {
    const consent = this.getConsent();
    return consent && consent.analytics === true;
  },

  hasMarketingConsent() {
    const consent = this.getConsent();
    return consent && consent.marketing === true;
  },

  showBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.remove('translate-y-full');
    }
  },

  hideBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.add('translate-y-full');
    }
  },

  showModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      // Set checkboxes to current preferences
      const consent = this.getConsent() || { analytics: false, marketing: false };
      const analyticsCheckbox = document.getElementById('cookie-analytics');
      const marketingCheckbox = document.getElementById('cookie-marketing');
      if (analyticsCheckbox) analyticsCheckbox.checked = consent.analytics;
      if (marketingCheckbox) marketingCheckbox.checked = consent.marketing;
    }
  },

  hideModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
  },

  acceptAll() {
    const consent = this.setConsent({ analytics: true, marketing: true });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'accept_all' });
    }
  },

  rejectAll() {
    const consent = this.setConsent({ analytics: false, marketing: false });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
  },

  savePreferences() {
    const analyticsCheckbox = document.getElementById('cookie-analytics');
    const marketingCheckbox = document.getElementById('cookie-marketing');
    const consent = this.setConsent({
      analytics: analyticsCheckbox ? analyticsCheckbox.checked : false,
      marketing: marketingCheckbox ? marketingCheckbox.checked : false
    });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (consent.analytics && typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'custom', analytics: consent.analytics, marketing: consent.marketing });
    }
  },

  applyConsent(consent) {
    // Dispatch event for analytics.js to listen to
    window.dispatchEvent(new CustomEvent('cookieConsentUpdated', { detail: consent }));
  },

  init() {
    if (!this.hasConsent()) {
      // Show banner after a short delay for better UX
      setTimeout(() => this.showBanner(), 1000);
    } else {
      // Apply existing consent
      this.applyConsent(this.getConsent());
    }
  }
};

// ===== MOBILE MENU =====
function initMobileMenu() {
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const closeMenuBtn = document.getElementById('close-menu');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOverlay = document.getElementById('menu-overlay');

  if (!mobileMenuBtn || !mobileMenu) return;

  function openMobileMenu() {
    mobileMenu.classList.add('open');
    if (menuOverlay) menuOverlay.classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeMobileMenu() {
    mobileMenu.classList.remove('open');
    if (menuOverlay) menuOverlay.classList.remove('open');
    document.body.style.overflow = '';
  }

  mobileMenuBtn.addEventListener('click', openMobileMenu);
  if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMobileMenu);
  if (menuOverlay) menuOverlay.addEventListener('click', closeMobileMenu);

  // Close menu when clicking a link
  mobileMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', closeMobileMenu);
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {
      closeMobileMenu();
    }
  });
}

// ===== DARK MODE TOGGLE =====
function initDarkMode() {
  const darkModeToggle = document.getElementById('dark-mode-toggle');
  const darkModeToggleMobile = document.getElementById('dark-mode-toggle-mobile');

  // Prevent duplicate initialization
  if (window._darkModeInitialized) return;
  window._darkModeInitialized = true;

  function toggleDarkMode() {
    document.documentElement.classList.toggle('dark');
    const isDark = document.documentElement.classList.contains('dark');
    setCookie('darkMode', isDark, 365);
  }

  if (darkModeToggle) darkModeToggle.addEventListener('click', toggleDarkMode);
  if (darkModeToggleMobile) darkModeToggleMobile.addEventListener('click', toggleDarkMode);
}

// ===== BACK TO TOP =====
function initBackToTop() {
  const backToTop = document.getElementById('back-to-top');
  if (!backToTop) return;

  function updateBackToTop() {
    if (window.scrollY > 500) {
      backToTop.classList.add('visible');
    } else {
      backToTop.classList.remove('visible');
    }
  }

  backToTop.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  window.addEventListener('scroll', updateBackToTop);
}

// ===== SCROLL REVEAL =====
function initScrollReveal() {
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

  document.querySelectorAll('.reveal, .card-hover, .stagger-children').forEach(el => {
    revealObserver.observe(el);
  });
}

// ===== SMOOTH SCROLL =====
function initSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (href !== '#') {
        e.preventDefault();
        const target = document.querySelector(href);
        if (target) {
          const headerOffset = 80;
          const elementPosition = target.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.scrollY - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      }
    });
  });
}

// ===== COOKIE CONSENT EVENT LISTENERS =====
function initCookieConsentListeners() {
  // Banner buttons
  const acceptBtn = document.getElementById('cookie-accept');
  const rejectBtn = document.getElementById('cookie-reject');
  const customizeBtn = document.getElementById('cookie-customize');

  if (acceptBtn) acceptBtn.addEventListener('click', () => CookieConsent.acceptAll());
  if (rejectBtn) rejectBtn.addEventListener('click', () => CookieConsent.rejectAll());
  if (customizeBtn) customizeBtn.addEventListener('click', () => {
    CookieConsent.hideBanner();
    CookieConsent.showModal();
  });

  // Modal buttons
  const modalClose = document.getElementById('cookie-modal-close');
  const modalBackdrop = document.getElementById('cookie-modal-backdrop');
  const modalReject = document.getElementById('cookie-modal-reject');
  const modalSave = document.getElementById('cookie-modal-save');

  if (modalClose) modalClose.addEventListener('click', () => CookieConsent.hideModal());
  if (modalBackdrop) modalBackdrop.addEventListener('click', () => CookieConsent.hideModal());
  if (modalReject) modalReject.addEventListener('click', () => CookieConsent.rejectAll());
  if (modalSave) modalSave.addEventListener('click', () => CookieConsent.savePreferences());

  // Footer cookie settings button
  const cookieSettingsBtn = document.getElementById('cookie-settings-btn');
  if (cookieSettingsBtn) cookieSettingsBtn.addEventListener('click', () => CookieConsent.showModal());

  // Note: Cookie toggles are now wrapped in <label> elements, so native browser behavior handles the toggle.
  // No additional JavaScript handlers needed for the toggle switches.
}

// ===== INITIALIZE ALL =====
function initAll() {
  initMobileMenu();
  initDarkMode();
  initBackToTop();
  initScrollReveal();
  initSmoothScroll();
  initCookieConsentListeners();
  CookieConsent.init();
}

// Handle both fresh page load and cases where DOM is already ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initAll);
} else {
  // DOM is already ready, initialize immediately
  initAll();
}

// Expose CookieConsent for external use
window.CookieConsent = CookieConsent;
</script>

<!-- /SHARED_SCRIPTS -->

  <!-- Share Functions -->
  <script>
    const pageUrl = encodeURIComponent(window.location.href);
    const pageTitle = encodeURIComponent(document.title);
    const shareHook = encodeURIComponent(document.querySelector('meta[name="share:hook"]')?.content || pageTitle);

    function shareOnTwitter() {
      window.open(`https://twitter.com/intent/tweet?text=${shareHook}&url=${pageUrl}`, '_blank', 'width=550,height=420');
    }

    function shareOnLinkedIn() {
      window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${pageUrl}`, '_blank', 'width=550,height=420');
    }

    function shareOnFacebook() {
      window.open(`https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`, '_blank', 'width=550,height=420');
    }

    function copyLink() {
      navigator.clipboard.writeText(window.location.href).then(() => {
        const toast = document.getElementById('copy-toast');
        toast.classList.add('show');
        toast.style.opacity = '1';
        setTimeout(() => {
          toast.style.opacity = '0';
          toast.classList.remove('show');
        }, 2000);
      });
    }

    // Dark mode toggle
    document.getElementById('dark-mode-toggle').addEventListener('click', function() {
      document.documentElement.classList.toggle('dark');
      const isDark = document.documentElement.classList.contains('dark');
      document.cookie = `darkMode=${isDark}; path=/; max-age=31536000`;
    });

    // Back to top button
    const backToTop = document.getElementById('back-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 500) {
        backToTop.classList.add('visible');
      } else {
        backToTop.classList.remove('visible');
      }
    });
    backToTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>

</body>
</html>
