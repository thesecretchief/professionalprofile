<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Review: Brain Rules - 12 Principles for Surviving and Thriving | Lee Foropoulos</title>
  <meta name="description" content="John Medina's Brain Rules reveals how the brain actually works, and why most of what we do in offices, schools, and gyms fights against our biology.">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Brain Rules: The Neuroscience of Performance">
  <meta property="og:description" content="How sleep, exercise, and attention affect your brain and productivity.">
  <meta property="og:url" content="https://foropoulosnow.com/blog/posts/book-review-brain-rules.html">
  <meta property="og:image" content="https://res.cloudinary.com/foropoulosnow/image/fetch/w_1200,h_630,c_fill,q_auto,f_auto/https%3A%2F%2Fimages.unsplash.com%2Fphoto-1507003211169-0a1dd7228f2d">
  <meta property="article:author" content="Lee Foropoulos">
  <meta property="article:published_time" content="2025-11-08">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Brain Rules: The Neuroscience of Performance">
  <meta name="twitter:description" content="How sleep, exercise, and attention affect your brain and productivity.">
  <meta name="share:hook" content="Most of what we do in offices and schools fights against our biology. Brain Rules explains why, and what actually works:">
  <meta name="twitter:image" content="https://res.cloudinary.com/foropoulosnow/image/fetch/w_1200,h_630,c_fill,q_auto,f_auto/https%3A%2F%2Fimages.unsplash.com%2Fphoto-1507003211169-0a1dd7228f2d">
  <meta name="facebook-domain-verification" content="vx40czm6ccxtpl4crzqbiso70hmjoi" />

  <link rel="icon" type="image/svg+xml" href="../../favicon.svg">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            navy: { 900: '#0f172a', 800: '#1e293b', 700: '#334155', 600: '#475569' },
            gold: { 700: '#b45309', 600: '#d97706', 500: '#f59e0b', 400: '#fbbf24', 300: '#fcd34d', 200: '#fde68a', 100: '#fef3c7' }
          },
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
        }
      }
    }
  </script>
  <script>
    function getCookie(name) {
      const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
      return match ? match[2] : null;
    }
    const darkPref = getCookie('darkMode');
    if (darkPref === 'true' || (!darkPref && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, sans-serif; }
    .prose { line-height: 1.8; }
    .prose h2 { margin-top: 2.5rem; margin-bottom: 1rem; font-size: 1.75rem; }
    .prose h3 { margin-top: 2rem; margin-bottom: 0.75rem; font-size: 1.25rem; }
    .prose p { margin-bottom: 1.5rem; }
    .prose ul, .prose ol { margin-bottom: 1.5rem; padding-left: 1.5rem; }
    .prose li { margin-bottom: 0.5rem; }
    .prose blockquote { border-left: 4px solid #f59e0b; padding-left: 1.5rem; margin: 2rem 0; font-style: italic; background: rgba(245, 158, 11, 0.1); padding: 1.5rem; border-radius: 0 8px 8px 0; }
    .dark .prose blockquote { background: rgba(245, 158, 11, 0.05); }
    .book-cover { box-shadow: 0 25px 50px -12px rgba(0,0,0,0.4); transition: transform 0.3s ease; }
    .book-cover:hover { transform: rotate(-2deg) scale(1.02); }
    #back-to-top { opacity: 0; visibility: hidden; transition: all 0.3s ease; }
    #back-to-top.visible { opacity: 1; visibility: visible; }
    .content-image { border-radius: 0.75rem; margin: 2rem 0; box-shadow: 0 10px 40px rgba(0,0,0,0.15); }
    .share-section { display: flex; gap: 1rem; margin: 2rem 0; flex-wrap: wrap; }
    .share-btn { position: relative; display: inline-flex; align-items: center; justify-content: center; width: 2.75rem; height: 2.75rem; border-radius: 50%; transition: all 0.2s ease; cursor: pointer; border: none; }
    .share-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    .share-btn svg { width: 1.25rem; height: 1.25rem; }
    .share-btn[data-tooltip]:hover::after { content: attr(data-tooltip); position: absolute; bottom: -2rem; left: 50%; transform: translateX(-50%); background: #0f172a; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem; white-space: nowrap; z-index: 10; }
    .dark .share-btn[data-tooltip]:hover::after { background: #f59e0b; color: #0f172a; }
    .share-btn-twitter { background: #000; color: white; }
    .share-btn-linkedin { background: #0A66C2; color: white; }
    .share-btn-facebook { background: #1877F2; color: white; }
    .share-btn-copy { background: #f59e0b; color: #111827; }
    .copy-toast { position: fixed; bottom: 2rem; right: 2rem; background: #059669; color: white; padding: 1rem 1.5rem; border-radius: 0.5rem; box-shadow: 0 10px 25px rgba(0,0,0,0.2); opacity: 0; transform: translateY(20px); transition: all 0.3s ease; pointer-events: none; z-index: 50; }
    .copy-toast.show { opacity: 1; transform: translateY(0); pointer-events: auto; }
  </style>
  <!-- Analytics: Google Analytics 4 + Microsoft Clarity -->
  <script src="/analytics.js" defer></script>
</head>
<body class="bg-white dark:bg-navy-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">

  <!-- Navigation -->
  <nav class="fixed top-0 left-0 right-0 z-50 bg-navy-900/95 backdrop-blur-md border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <a href="../" class="text-white font-bold text-xl tracking-tight">
          Foropoulos<span class="text-gold-400">Now</span><span class="text-gray-400 text-sm">.com</span>
        </a>
        <div class="flex items-center gap-4">
          <a href="../" class="text-gray-300 hover:text-gold-400 transition text-sm font-medium">&larr; All Posts</a>
          <button id="dark-mode-toggle" class="text-gray-300 hover:text-gold-400 p-2 rounded-lg hover:bg-white/10 transition" aria-label="Toggle dark mode">
            <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
            <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Article Header with Book Cover -->
  <header class="bg-gradient-to-br from-navy-900 via-navy-800 to-navy-900 pt-24 pb-16">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col lg:flex-row gap-10 items-center lg:items-start">
        <!-- Book Cover -->
        <div class="flex-shrink-0">
          <img
            src="../bookcovers/brainrules.jpg"
            alt="Brain Rules Book Cover"
            class="book-cover w-48 lg:w-56 rounded-lg"
            onerror="this.src='https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=600&fit=crop'"
          >
        </div>

        <!-- Header Content -->
        <div class="flex-1 text-center lg:text-left">
          <div class="flex flex-wrap items-center justify-center lg:justify-start gap-3 mb-6">
            <span class="bg-purple-500/20 text-purple-400 text-xs font-semibold px-3 py-1 rounded-full">Book Review</span>
            <span class="bg-green-500/20 text-green-400 text-xs font-semibold px-3 py-1 rounded-full">Neuroscience</span>
            <span class="text-gray-500 text-sm">Nov 8, 2025</span>
          </div>
          <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4 leading-tight">
            Brain Rules: 12 Principles for Surviving and Thriving
          </h1>
          <p class="text-lg text-gray-400 mb-3">
            by <span class="text-gold-400">John Medina</span>
          </p>
          <p class="text-xl text-gray-400 mb-6">
            John Medina's guide to working with your brain instead of against it. Essential reading for anyone who wants to learn faster, remember more, and perform better.
          </p>
          <!-- Quick Share Buttons -->
          <div class="flex items-center justify-center lg:justify-start gap-2 mb-6">
            <span class="text-gray-500 text-sm mr-1">Share:</span>
            <button onclick="shareOnTwitter()" class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition" aria-label="Share on X">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
            </button>
            <button onclick="shareOnLinkedIn()" class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition" aria-label="Share on LinkedIn">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
            </button>
            <button onclick="shareOnFacebook()" class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition" aria-label="Share on Facebook">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
            </button>
            <button onclick="copyLink()" class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition" aria-label="Copy Link">
              <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
            </button>
          </div>
          <div class="flex items-center justify-center lg:justify-start gap-4">
            <div class="w-12 h-12 bg-gold-500 rounded-full flex items-center justify-center text-navy-900 font-bold text-lg">LF</div>
            <div>
              <p class="text-white font-semibold">Lee Foropoulos</p>
              <p class="text-gray-500 text-sm">7 min read</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Article Content -->
  <article class="py-16 bg-white dark:bg-navy-900">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="prose dark:prose-invert text-gray-700 dark:text-gray-300">

        <p class="text-xl leading-relaxed">
          Here's a humbling thought: the human brain hasn't significantly changed in 100,000 years, but everything about how we live, work, and learn has changed dramatically, especially in the last century. John Medina's <strong>Brain Rules</strong> argues that most modern environments (offices, schools, gyms) are designed in ways that actively fight our biology.
        </p>

        <p>
          Medina is a developmental molecular biologist who directs the Brain Center for Applied Learning Research at Seattle Pacific University. But don't let that intimidate you, this book is surprisingly accessible and often funny. Each of the 12 "rules" is backed by peer-reviewed research but explained in plain English with memorable examples.
        </p>

        <h2 class="text-navy-900 dark:text-white">The 12 Brain Rules (Summarized)</h2>

        <h3 class="text-navy-900 dark:text-white">Rule #1: Exercise Boosts Brain Power</h3>
        <p>
          This one hits different when you realize the science behind it. Our ancestors walked 12+ miles per day. Our brains evolved under conditions of almost constant motion. Sitting in a chair for 8 hours isn't just bad for your body, it's actively degrading your cognitive performance.
        </p>
        <blockquote>
          "Exercise does not just keep your brain from rotting. It actively improves cognitive performance."
        </blockquote>

        <h3 class="text-navy-900 dark:text-white">Rule #2: The Human Brain Evolved, Too</h3>
        <p>
          Understanding that our brains evolved for survival (not spreadsheets) helps explain many quirks. We're wired to detect threats, form social bonds, and learn from experience, not to process email or sit in meetings.
        </p>

        <h3 class="text-navy-900 dark:text-white">Rule #3: Every Brain Is Wired Differently</h3>
        <p>
          No two brains are alike. What works for one person's learning style may fail completely for another. This has massive implications for how we train teams and educate children.
        </p>

        <h3 class="text-navy-900 dark:text-white">Rule #4: We Don't Pay Attention to Boring Things</h3>
        <p>
          The brain's attention span in a lecture-style setting? About 10 minutes. After that, you need to reset with something emotionally compelling. This is why storytelling works and bullet points don't.
        </p>

        <!-- Inline Image -->
        <figure class="my-10">
          <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&h=450&fit=crop" alt="Focus and attention" class="content-image w-full">
          <figcaption class="text-center text-sm text-gray-500 dark:text-gray-400 mt-3">Attention is a limited resource, use it wisely</figcaption>
        </figure>

        <h3 class="text-navy-900 dark:text-white">Rule #5: Repeat to Remember</h3>
        <p>
          The brain needs repeated exposure to encode information into long-term memory. But not just rote repetition, spaced repetition at increasing intervals is the key.
        </p>

        <h3 class="text-navy-900 dark:text-white">Rule #6: Remember to Repeat</h3>
        <p>
          Even after you've learned something, it will decay without reinforcement. This is why habit stacking works, you're essentially creating automatic repetition loops.
        </p>

        <h3 class="text-navy-900 dark:text-white">Rule #7: Sleep Well, Think Well</h3>
        <p>
          Sleep deprivation doesn't just make you tired, it makes you stupid. Memory consolidation happens during sleep. Pulling all-nighters for work is counterproductive.
        </p>

        <!-- Inline Image -->
        <figure class="my-10">
          <img src="https://images.unsplash.com/photo-1541781774459-bb2af2f05b55?w=800&h=450&fit=crop" alt="Quality sleep" class="content-image w-full">
          <figcaption class="text-center text-sm text-gray-500 dark:text-gray-400 mt-3">Sleep is when your brain consolidates learning into long-term memory</figcaption>
        </figure>

        <h3 class="text-navy-900 dark:text-white">Rule #8: Stressed Brains Don't Learn the Same Way</h3>
        <p>
          Chronic stress literally damages the hippocampus (memory center). A high-pressure work environment isn't just unpleasant, it's cognitively destructive.
        </p>

        <h3 class="text-navy-900 dark:text-white">Rule #9: Stimulate More of the Senses</h3>
        <p>
          Multi-sensory learning dramatically improves retention. Reading about something, hearing it, and physically experiencing it creates stronger neural pathways than any single input.
        </p>

        <h3 class="text-navy-900 dark:text-white">Rule #10: Vision Trumps All Other Senses</h3>
        <p>
          Half your brain's resources are devoted to vision. Visual information is processed 60,000 times faster than text. If you want someone to remember something, show them a picture.
        </p>

        <h3 class="text-navy-900 dark:text-white">Rule #11: Male and Female Brains Are Different</h3>
        <p>
          Medina carefully navigates this controversial territory with nuance. The point isn't about capability, it's about understanding different processing styles.
        </p>

        <h3 class="text-navy-900 dark:text-white">Rule #12: We Are Powerful and Natural Explorers</h3>
        <p>
          Curiosity isn't childish, it's our greatest cognitive tool. Environments that reward exploration produce better learning outcomes than those that punish mistakes.
        </p>

        <h2 class="text-navy-900 dark:text-white">Practical Applications</h2>

        <p>I've integrated several of these rules into my personal training and coaching practice at gotHABITS:</p>

        <ul>
          <li><strong>Exercise before learning:</strong> Even 20 minutes of walking before a complex task improves performance.</li>
          <li><strong>10-minute reset rule:</strong> In long coaching sessions, I build in emotional "hooks" every 10 minutes to maintain attention.</li>
          <li><strong>Sleep as strategy:</strong> I no longer glorify "grinding" at the expense of rest. Sleep is when habits solidify.</li>
          <li><strong>Visual habit tracking:</strong> Charts and visual progress indicators work better than journal entries.</li>
          <li><strong>Multi-sensory cueing:</strong> Pairing a new habit with a sound, visual trigger, and physical action increases stickiness.</li>
        </ul>

        <h2 class="text-navy-900 dark:text-white">What This Means for Business Leaders</h2>

        <p>
          If you run a team or company, this book should change how you think about workplace design:
        </p>

        <ul>
          <li>Standing meetings and walking one-on-ones aren't gimmicks, they're cognitively superior.</li>
          <li>Afternoon slumps are biological, not moral failures. Design work around energy cycles.</li>
          <li>Open offices might be killing your team's productivity through chronic stress and distraction.</li>
          <li>PowerPoint decks with walls of text are neurologically hostile to comprehension.</li>
        </ul>

        <h2 class="text-navy-900 dark:text-white">The Bottom Line</h2>

        <p>
          <strong>Brain Rules</strong> is one of those rare books that actually changes behavior. The science is solid, the writing is engaging, and the applications are immediate. Whether you're trying to learn faster, lead better, or build sustainable habits, understanding how your brain actually works is foundational knowledge.
        </p>

        <p>
          For coaches, trainers, and anyone in the business of human performance, this is essential reading.
        </p>

        <div class="bg-gold-50 dark:bg-gold-500/10 rounded-xl p-6 mt-8 border border-gold-200 dark:border-gold-500/30">
          <p class="font-semibold text-navy-900 dark:text-white mb-2">Rating: 8.5/10</p>
          <p class="text-sm text-gray-600 dark:text-gray-400">Highly practical neuroscience. A must-read for anyone in learning, coaching, or leadership.</p>
        </div>

        <!-- Share Section -->
        <div class="mt-12 pt-8 border-t border-gray-200 dark:border-gray-700">
          <p class="text-sm font-semibold text-gray-600 dark:text-gray-400 mb-4">Share this article</p>
          <div class="share-section">
            <button class="share-btn share-btn-twitter" onclick="shareOnTwitter()" data-tooltip="Share on X" aria-label="Share on X">
              <svg fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
            </button>
            <button class="share-btn share-btn-linkedin" onclick="shareOnLinkedIn()" data-tooltip="Share on LinkedIn" aria-label="Share on LinkedIn">
              <svg fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
            </button>
            <button class="share-btn share-btn-facebook" onclick="shareOnFacebook()" data-tooltip="Share on Facebook" aria-label="Share on Facebook">
              <svg fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
            </button>
            <button class="share-btn share-btn-copy" onclick="copyLink()" data-tooltip="Copy Link" aria-label="Copy Link">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.658 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/></svg>
            </button>
          </div>
        </div>

      </div>
    </div>
  </article>

  <!-- Copy Toast -->
  <div id="copy-toast" class="copy-toast">
    Link copied to clipboard!
  </div>

  <!-- Related Posts -->
  <section class="py-16 bg-gray-50 dark:bg-navy-800">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-navy-900 dark:text-white mb-8">Related Reading</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <a href="building-sustainable-supplement-stack" class="block bg-white dark:bg-navy-900 rounded-xl p-6 border border-gray-200 dark:border-white/10 hover:border-gold-400 transition">
          <span class="text-amber-500 text-sm font-semibold">Fitness</span>
          <h3 class="font-bold text-navy-900 dark:text-white mt-2">Building a Sustainable Supplement Stack</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm mt-2">The science-backed essentials that actually work...</p>
        </a>
        <a href="book-review-ceo-excellence" class="block bg-white dark:bg-navy-900 rounded-xl p-6 border border-gray-200 dark:border-white/10 hover:border-gold-400 transition">
          <span class="text-purple-500 text-sm font-semibold">Book Review</span>
          <h3 class="font-bold text-navy-900 dark:text-white mt-2">CEO Excellence: Six Mindsets That Distinguish the Best</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm mt-2">McKinsey's research on exceptional leadership...</p>
        </a>
      </div>
    </div>
  </section>

  <!-- Back to Top Button -->
  <!-- VOICE_READER -->
<!-- Voice Reader for Blog Posts -->
<div id="voice-reader" class="fixed bottom-24 right-8 z-40 flex flex-col items-end gap-2">
  <!-- Controls (hidden by default, shown when reading) -->
  <div id="voice-controls" class="hidden bg-navy-800 rounded-xl shadow-xl border border-white/10 p-3 mb-2">
    <div class="flex items-center gap-3 mb-3">
      <button id="voice-slower" class="p-2 text-gray-400 hover:text-gold-400 transition" title="Slower">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path>
        </svg>
      </button>
      <span id="voice-speed" class="text-white text-sm font-medium min-w-[3rem] text-center">1.0x</span>
      <button id="voice-faster" class="p-2 text-gray-400 hover:text-gold-400 transition" title="Faster">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
      </button>
    </div>
    <div class="flex items-center gap-2">
      <button id="voice-skip-back" class="p-2 text-gray-400 hover:text-gold-400 transition" title="Previous paragraph">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"></path>
        </svg>
      </button>
      <button id="voice-skip-forward" class="p-2 text-gray-400 hover:text-gold-400 transition" title="Next paragraph">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"></path>
        </svg>
      </button>
    </div>
    <!-- Progress indicator -->
    <div class="mt-3 text-xs text-gray-400 text-center">
      <span id="voice-progress">0</span> / <span id="voice-total">0</span> paragraphs
    </div>
  </div>

  <!-- Main Play/Pause Button -->
  <button id="voice-toggle" class="bg-gold-500 hover:bg-gold-400 text-navy-900 p-4 rounded-full shadow-lg transition transform hover:scale-110 group" title="Listen to article">
    <!-- Play icon -->
    <svg id="voice-play-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <!-- Pause icon (hidden by default) -->
    <svg id="voice-pause-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <!-- Stop icon (hidden by default) -->
    <svg id="voice-stop-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10h6v4H9z"></path>
    </svg>
  </button>
</div>

<style>
  /* Highlight currently reading element */
  .voice-reading {
    background: linear-gradient(90deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.2) 50%, rgba(245, 158, 11, 0.1) 100%);
    border-left: 3px solid #f59e0b;
    padding-left: 1rem;
    margin-left: -1rem;
    border-radius: 0 0.5rem 0.5rem 0;
    transition: all 0.3s ease;
  }

  .dark .voice-reading {
    background: linear-gradient(90deg, rgba(245, 158, 11, 0.05) 0%, rgba(245, 158, 11, 0.15) 50%, rgba(245, 158, 11, 0.05) 100%);
  }
</style>

<script>
(function() {
  'use strict';

  // Check if Speech Synthesis is supported
  if (!('speechSynthesis' in window)) {
    const voiceReader = document.getElementById('voice-reader');
    if (voiceReader) voiceReader.style.display = 'none';
    return;
  }

  const synth = window.speechSynthesis;
  let utterance = null;
  let paragraphs = [];
  let currentIndex = 0;
  let isPlaying = false;
  let isPaused = false;
  let rate = 1.0;

  // DOM elements
  const toggleBtn = document.getElementById('voice-toggle');
  const playIcon = document.getElementById('voice-play-icon');
  const pauseIcon = document.getElementById('voice-pause-icon');
  const stopIcon = document.getElementById('voice-stop-icon');
  const controls = document.getElementById('voice-controls');
  const speedDisplay = document.getElementById('voice-speed');
  const progressDisplay = document.getElementById('voice-progress');
  const totalDisplay = document.getElementById('voice-total');
  const slowerBtn = document.getElementById('voice-slower');
  const fasterBtn = document.getElementById('voice-faster');
  const skipBackBtn = document.getElementById('voice-skip-back');
  const skipForwardBtn = document.getElementById('voice-skip-forward');

  // Get article content
  function getArticleParagraphs() {
    const article = document.querySelector('article .prose');
    if (!article) return [];

    const elements = article.querySelectorAll('p, h2, h3, li');
    return Array.from(elements).filter(el => {
      const text = el.innerText.trim();
      return text.length > 0;
    });
  }

  // Update UI state
  function updateUI() {
    if (isPlaying && !isPaused) {
      playIcon.classList.add('hidden');
      pauseIcon.classList.remove('hidden');
      stopIcon.classList.add('hidden');
      controls.classList.remove('hidden');
    } else if (isPaused) {
      playIcon.classList.remove('hidden');
      pauseIcon.classList.add('hidden');
      stopIcon.classList.add('hidden');
      controls.classList.remove('hidden');
    } else {
      playIcon.classList.remove('hidden');
      pauseIcon.classList.add('hidden');
      stopIcon.classList.add('hidden');
      controls.classList.add('hidden');
    }

    progressDisplay.textContent = currentIndex + 1;
    totalDisplay.textContent = paragraphs.length;
    speedDisplay.textContent = rate.toFixed(1) + 'x';
  }

  // Highlight current paragraph
  function highlightParagraph(index) {
    // Remove previous highlight
    document.querySelectorAll('.voice-reading').forEach(el => {
      el.classList.remove('voice-reading');
    });

    // Add highlight to current
    if (paragraphs[index]) {
      paragraphs[index].classList.add('voice-reading');

      // Smooth scroll to element
      const rect = paragraphs[index].getBoundingClientRect();
      const offset = window.innerHeight / 3;

      if (rect.top < 100 || rect.bottom > window.innerHeight - 100) {
        window.scrollTo({
          top: window.scrollY + rect.top - offset,
          behavior: 'smooth'
        });
      }
    }
  }

  // Speak a paragraph
  function speakParagraph(index) {
    if (index >= paragraphs.length) {
      stopReading();
      return;
    }

    currentIndex = index;
    highlightParagraph(index);
    updateUI();

    const text = paragraphs[index].innerText.trim();
    utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = rate;
    utterance.pitch = 1;

    // Try to get a good voice
    const voices = synth.getVoices();
    const preferredVoice = voices.find(v =>
      v.lang.startsWith('en') && (v.name.includes('Google') || v.name.includes('Natural') || v.name.includes('Premium'))
    ) || voices.find(v => v.lang.startsWith('en'));

    if (preferredVoice) {
      utterance.voice = preferredVoice;
    }

    utterance.onend = function() {
      if (isPlaying && !isPaused) {
        speakParagraph(currentIndex + 1);
      }
    };

    utterance.onerror = function(e) {
      if (e.error !== 'interrupted') {
        console.error('Speech error:', e.error);
        speakParagraph(currentIndex + 1);
      }
    };

    synth.speak(utterance);
  }

  // Start reading
  function startReading() {
    paragraphs = getArticleParagraphs();
    if (paragraphs.length === 0) return;

    isPlaying = true;
    isPaused = false;

    if (synth.paused) {
      synth.resume();
    } else {
      speakParagraph(currentIndex);
    }

    updateUI();
  }

  // Pause reading
  function pauseReading() {
    isPaused = true;
    synth.pause();
    updateUI();
  }

  // Resume reading
  function resumeReading() {
    isPaused = false;
    synth.resume();
    updateUI();
  }

  // Stop reading
  function stopReading() {
    isPlaying = false;
    isPaused = false;
    currentIndex = 0;
    synth.cancel();

    // Remove highlights
    document.querySelectorAll('.voice-reading').forEach(el => {
      el.classList.remove('voice-reading');
    });

    updateUI();
  }

  // Toggle button click
  toggleBtn.addEventListener('click', function() {
    if (!isPlaying) {
      startReading();
    } else if (isPaused) {
      resumeReading();
    } else {
      pauseReading();
    }
  });

  // Long press to stop
  let pressTimer;
  toggleBtn.addEventListener('mousedown', function() {
    pressTimer = setTimeout(function() {
      stopReading();
    }, 800);
  });
  toggleBtn.addEventListener('mouseup', function() {
    clearTimeout(pressTimer);
  });
  toggleBtn.addEventListener('mouseleave', function() {
    clearTimeout(pressTimer);
  });

  // Speed controls
  slowerBtn.addEventListener('click', function() {
    rate = Math.max(0.5, rate - 0.25);
    speedDisplay.textContent = rate.toFixed(1) + 'x';
    if (isPlaying && !isPaused) {
      synth.cancel();
      speakParagraph(currentIndex);
    }
  });

  fasterBtn.addEventListener('click', function() {
    rate = Math.min(2.0, rate + 0.25);
    speedDisplay.textContent = rate.toFixed(1) + 'x';
    if (isPlaying && !isPaused) {
      synth.cancel();
      speakParagraph(currentIndex);
    }
  });

  // Skip controls
  skipBackBtn.addEventListener('click', function() {
    if (currentIndex > 0) {
      synth.cancel();
      speakParagraph(currentIndex - 1);
    }
  });

  skipForwardBtn.addEventListener('click', function() {
    if (currentIndex < paragraphs.length - 1) {
      synth.cancel();
      speakParagraph(currentIndex + 1);
    }
  });

  // Initialize paragraphs count
  paragraphs = getArticleParagraphs();
  totalDisplay.textContent = paragraphs.length;

  // Load voices (some browsers load them asynchronously)
  if (synth.onvoiceschanged !== undefined) {
    synth.onvoiceschanged = function() {};
  }

  // Stop when leaving page
  window.addEventListener('beforeunload', function() {
    synth.cancel();
  });

})();
</script>

<!-- /VOICE_READER -->

<button id="back-to-top" class="fixed bottom-8 right-8 z-40 bg-gold-500 hover:bg-gold-400 text-navy-900 p-3 rounded-full shadow-lg transition transform hover:scale-110" aria-label="Back to top">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
    </svg>
  </button>

  <!-- Footer -->
  <footer class="bg-navy-900 border-t border-white/10 py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <p class="text-gray-500">&copy; 2026 Greek-Fire Corporation. All rights reserved.</p>
    </div>
  
    <!-- Legal Links -->
<div class="mt-8 pt-6 border-t border-white/10 flex flex-wrap justify-center gap-4 text-sm">
  <button id="cookie-settings-btn" class="text-gray-500 hover:text-gold-400 transition">Cookie Settings</button>
  <span class="text-gray-600">|</span>
  <a href="../../privacy" class="text-gray-500 hover:text-gold-400 transition">Privacy Policy</a>
</div>
  </footer>

  <script>
    // Back to Top Button
    const backToTop = document.getElementById('back-to-top');
    function updateBackToTop() {
      if (window.scrollY > 500) { backToTop.classList.add('visible'); }
      else { backToTop.classList.remove('visible'); }
    }
    backToTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    window.addEventListener('scroll', updateBackToTop);

    // Share functionality with engaging hooks
    function getShareData() {
      const title = document.querySelector('meta[property="og:title"]')?.content || document.title;
      const description = document.querySelector('meta[property="og:description"]')?.content || '';
      const url = document.querySelector('meta[property="og:url"]')?.content || window.location.href;
      const hook = document.querySelector('meta[name="share:hook"]')?.content || description;
      return { title, description, url, hook };
    }

    function shareOnTwitter() {
      const { hook, url } = getShareData();
      const text = hook;
      window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank', 'width=550,height=420');
    }

    function shareOnLinkedIn() {
      const { title, hook, url } = getShareData();
      const text = hook + '\n\nRead more:';
      window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank', 'width=550,height=420');
    }

    function shareOnFacebook() {
      const { hook, url } = getShareData();
      window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(hook)}`, '_blank', 'width=550,height=420');
    }

    function copyLink() {
      const { url } = getShareData();
      navigator.clipboard.writeText(url).then(() => {
        const toast = document.getElementById('copy-toast');
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 2000);
      });
    }
  </script>
<!-- COOKIE_CONSENT -->
<!-- Cookie Consent Banner -->
<div id="cookie-consent" class="fixed bottom-0 left-0 right-0 z-[100] transform translate-y-full transition-transform duration-500" role="dialog" aria-labelledby="cookie-consent-title" aria-describedby="cookie-consent-description">
  <div class="bg-navy-900/98 backdrop-blur-lg border-t border-white/10 shadow-2xl">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
        <div class="flex-1">
          <h3 id="cookie-consent-title" class="text-white font-semibold text-lg mb-2">We value your privacy</h3>
          <p id="cookie-consent-description" class="text-gray-400 text-sm leading-relaxed">
            We use cookies to enhance your browsing experience, analyze site traffic, and personalize content.
            By clicking "Accept All", you consent to our use of cookies. You can manage your preferences anytime.
          </p>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 lg:ml-8">
          <button id="cookie-customize" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Customize
          </button>
          <button id="cookie-reject" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Reject All
          </button>
          <button id="cookie-accept" class="px-6 py-2.5 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full text-sm font-semibold transition transform hover:scale-105">
            Accept All
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Cookie Settings Modal -->
<div id="cookie-modal" class="fixed inset-0 z-[110] hidden" role="dialog" aria-modal="true" aria-labelledby="cookie-modal-title">
  <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" id="cookie-modal-backdrop"></div>
  <div class="fixed inset-0 overflow-y-auto">
    <div class="flex min-h-full items-center justify-center p-4">
      <div class="bg-navy-800 rounded-2xl shadow-2xl max-w-lg w-full border border-white/10 transform transition-all">
        <div class="p-6 border-b border-white/10">
          <div class="flex items-center justify-between">
            <h3 id="cookie-modal-title" class="text-xl font-bold text-white">Cookie Preferences</h3>
            <button id="cookie-modal-close" class="text-gray-400 hover:text-white transition" aria-label="Close modal">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
          <p class="text-gray-400 text-sm mt-2">Manage your cookie preferences below. Essential cookies are always active as they're necessary for the site to function.</p>
        </div>

        <div class="p-6 space-y-4">
          <!-- Essential Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <h4 class="text-white font-semibold">Essential Cookies</h4>
              <p class="text-gray-400 text-sm mt-1">Required for basic site functionality like navigation and secure access. Cannot be disabled.</p>
            </div>
            <div class="relative">
              <input type="checkbox" id="cookie-essential" checked disabled class="sr-only">
              <div class="w-11 h-6 bg-gold-500 rounded-full opacity-50 cursor-not-allowed">
                <div class="absolute top-0.5 left-5 w-5 h-5 bg-white rounded-full shadow"></div>
              </div>
            </div>
          </div>

          <!-- Analytics Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <label for="cookie-analytics" class="text-white font-semibold cursor-pointer">Analytics Cookies</label>
              <p class="text-gray-400 text-sm mt-1">Help us understand how visitors interact with our site. We use Google Analytics and Microsoft Clarity.</p>
            </div>
            <label for="cookie-analytics" class="relative cursor-pointer">
              <input type="checkbox" id="cookie-analytics" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-600 peer-checked:bg-gold-500 rounded-full transition-colors"></div>
              <div class="absolute top-0.5 left-0.5 peer-checked:left-5 w-5 h-5 bg-white rounded-full shadow transition-all"></div>
            </label>
          </div>

          <!-- Marketing Cookies -->
          <div class="flex items-start justify-between p-4 bg-white/5 rounded-xl">
            <div class="flex-1 pr-4">
              <label for="cookie-marketing" class="text-white font-semibold cursor-pointer">Marketing Cookies</label>
              <p class="text-gray-400 text-sm mt-1">Used to track visitors across websites to display relevant ads and measure campaign effectiveness.</p>
            </div>
            <label for="cookie-marketing" class="relative cursor-pointer">
              <input type="checkbox" id="cookie-marketing" class="sr-only peer">
              <div class="w-11 h-6 bg-gray-600 peer-checked:bg-gold-500 rounded-full transition-colors"></div>
              <div class="absolute top-0.5 left-0.5 peer-checked:left-5 w-5 h-5 bg-white rounded-full shadow transition-all"></div>
            </label>
          </div>
        </div>

        <div class="p-6 border-t border-white/10 flex justify-end gap-3">
          <button id="cookie-modal-reject" class="px-5 py-2.5 text-gray-300 hover:text-white border border-white/20 hover:border-white/40 rounded-full text-sm font-medium transition">
            Reject All
          </button>
          <button id="cookie-modal-save" class="px-6 py-2.5 bg-gold-500 hover:bg-gold-400 text-navy-900 rounded-full text-sm font-semibold transition">
            Save Preferences
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /COOKIE_CONSENT -->

<!-- SHARED_SCRIPTS -->
<script>
// ===== COOKIE UTILITIES =====
function getCookie(name) {
  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
  return match ? match[2] : null;
}

function setCookie(name, value, days) {
  const expires = new Date(Date.now() + days * 864e5).toUTCString();
  document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/; SameSite=Lax';
}

function deleteCookie(name) {
  document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
}

// ===== COOKIE CONSENT MANAGEMENT =====
const CookieConsent = {
  CONSENT_COOKIE: 'cookieConsent',
  CONSENT_VERSION: '1.0',

  getConsent() {
    const consent = getCookie(this.CONSENT_COOKIE);
    if (!consent) return null;
    try {
      return JSON.parse(decodeURIComponent(consent));
    } catch (e) {
      return null;
    }
  },

  setConsent(preferences) {
    const consent = {
      version: this.CONSENT_VERSION,
      timestamp: new Date().toISOString(),
      essential: true, // Always true
      analytics: preferences.analytics || false,
      marketing: preferences.marketing || false
    };
    setCookie(this.CONSENT_COOKIE, JSON.stringify(consent), 365);
    return consent;
  },

  hasConsent() {
    return this.getConsent() !== null;
  },

  hasAnalyticsConsent() {
    const consent = this.getConsent();
    return consent && consent.analytics === true;
  },

  hasMarketingConsent() {
    const consent = this.getConsent();
    return consent && consent.marketing === true;
  },

  showBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.remove('translate-y-full');
    }
  },

  hideBanner() {
    const banner = document.getElementById('cookie-consent');
    if (banner) {
      banner.classList.add('translate-y-full');
    }
  },

  showModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      // Set checkboxes to current preferences
      const consent = this.getConsent() || { analytics: false, marketing: false };
      const analyticsCheckbox = document.getElementById('cookie-analytics');
      const marketingCheckbox = document.getElementById('cookie-marketing');
      if (analyticsCheckbox) analyticsCheckbox.checked = consent.analytics;
      if (marketingCheckbox) marketingCheckbox.checked = consent.marketing;
    }
  },

  hideModal() {
    const modal = document.getElementById('cookie-modal');
    if (modal) {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    }
  },

  acceptAll() {
    const consent = this.setConsent({ analytics: true, marketing: true });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'accept_all' });
    }
  },

  rejectAll() {
    const consent = this.setConsent({ analytics: false, marketing: false });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
  },

  savePreferences() {
    const analyticsCheckbox = document.getElementById('cookie-analytics');
    const marketingCheckbox = document.getElementById('cookie-marketing');
    const consent = this.setConsent({
      analytics: analyticsCheckbox ? analyticsCheckbox.checked : false,
      marketing: marketingCheckbox ? marketingCheckbox.checked : false
    });
    this.hideBanner();
    this.hideModal();
    this.applyConsent(consent);
    if (consent.analytics && typeof siteAnalytics !== 'undefined') {
      siteAnalytics.trackEvent('cookie_consent', { consent_type: 'custom', analytics: consent.analytics, marketing: consent.marketing });
    }
  },

  applyConsent(consent) {
    // Dispatch event for analytics.js to listen to
    window.dispatchEvent(new CustomEvent('cookieConsentUpdated', { detail: consent }));
  },

  init() {
    if (!this.hasConsent()) {
      // Show banner after a short delay for better UX
      setTimeout(() => this.showBanner(), 1000);
    } else {
      // Apply existing consent
      this.applyConsent(this.getConsent());
    }
  }
};

// ===== MOBILE MENU =====
function initMobileMenu() {
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const closeMenuBtn = document.getElementById('close-menu');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOverlay = document.getElementById('menu-overlay');

  if (!mobileMenuBtn || !mobileMenu) return;

  function openMobileMenu() {
    mobileMenu.classList.add('open');
    if (menuOverlay) menuOverlay.classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function closeMobileMenu() {
    mobileMenu.classList.remove('open');
    if (menuOverlay) menuOverlay.classList.remove('open');
    document.body.style.overflow = '';
  }

  mobileMenuBtn.addEventListener('click', openMobileMenu);
  if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMobileMenu);
  if (menuOverlay) menuOverlay.addEventListener('click', closeMobileMenu);

  // Close menu when clicking a link
  mobileMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', closeMobileMenu);
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && mobileMenu.classList.contains('open')) {
      closeMobileMenu();
    }
  });
}

// ===== DARK MODE TOGGLE =====
function initDarkMode() {
  const darkModeToggle = document.getElementById('dark-mode-toggle');
  const darkModeToggleMobile = document.getElementById('dark-mode-toggle-mobile');

  // Prevent duplicate initialization
  if (window._darkModeInitialized) return;
  window._darkModeInitialized = true;

  function toggleDarkMode() {
    document.documentElement.classList.toggle('dark');
    const isDark = document.documentElement.classList.contains('dark');
    setCookie('darkMode', isDark, 365);
  }

  if (darkModeToggle) darkModeToggle.addEventListener('click', toggleDarkMode);
  if (darkModeToggleMobile) darkModeToggleMobile.addEventListener('click', toggleDarkMode);
}

// ===== BACK TO TOP =====
function initBackToTop() {
  const backToTop = document.getElementById('back-to-top');
  if (!backToTop) return;

  function updateBackToTop() {
    if (window.scrollY > 500) {
      backToTop.classList.add('visible');
    } else {
      backToTop.classList.remove('visible');
    }
  }

  backToTop.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  window.addEventListener('scroll', updateBackToTop);
}

// ===== SCROLL REVEAL =====
function initScrollReveal() {
  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

  document.querySelectorAll('.reveal, .card-hover, .stagger-children').forEach(el => {
    revealObserver.observe(el);
  });
}

// ===== SMOOTH SCROLL =====
function initSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (href !== '#') {
        e.preventDefault();
        const target = document.querySelector(href);
        if (target) {
          const headerOffset = 80;
          const elementPosition = target.getBoundingClientRect().top;
          const offsetPosition = elementPosition + window.scrollY - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      }
    });
  });
}

// ===== COOKIE CONSENT EVENT LISTENERS =====
function initCookieConsentListeners() {
  // Banner buttons
  const acceptBtn = document.getElementById('cookie-accept');
  const rejectBtn = document.getElementById('cookie-reject');
  const customizeBtn = document.getElementById('cookie-customize');

  if (acceptBtn) acceptBtn.addEventListener('click', () => CookieConsent.acceptAll());
  if (rejectBtn) rejectBtn.addEventListener('click', () => CookieConsent.rejectAll());
  if (customizeBtn) customizeBtn.addEventListener('click', () => {
    CookieConsent.hideBanner();
    CookieConsent.showModal();
  });

  // Modal buttons
  const modalClose = document.getElementById('cookie-modal-close');
  const modalBackdrop = document.getElementById('cookie-modal-backdrop');
  const modalReject = document.getElementById('cookie-modal-reject');
  const modalSave = document.getElementById('cookie-modal-save');

  if (modalClose) modalClose.addEventListener('click', () => CookieConsent.hideModal());
  if (modalBackdrop) modalBackdrop.addEventListener('click', () => CookieConsent.hideModal());
  if (modalReject) modalReject.addEventListener('click', () => CookieConsent.rejectAll());
  if (modalSave) modalSave.addEventListener('click', () => CookieConsent.savePreferences());

  // Footer cookie settings button
  const cookieSettingsBtn = document.getElementById('cookie-settings-btn');
  if (cookieSettingsBtn) cookieSettingsBtn.addEventListener('click', () => CookieConsent.showModal());

  // Note: Cookie toggles are now wrapped in <label> elements, so native browser behavior handles the toggle.
  // No additional JavaScript handlers needed for the toggle switches.
}

// ===== INITIALIZE ALL =====
function initAll() {
  initMobileMenu();
  initDarkMode();
  initBackToTop();
  initScrollReveal();
  initSmoothScroll();
  initCookieConsentListeners();
  CookieConsent.init();
}

// Handle both fresh page load and cases where DOM is already ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initAll);
} else {
  // DOM is already ready, initialize immediately
  initAll();
}

// Expose CookieConsent for external use
window.CookieConsent = CookieConsent;
</script>

<!-- /SHARED_SCRIPTS -->
</body>
</html>
